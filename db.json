{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":1,"renderable":1},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/next/source/js/algolia-search.js","path":"js/algolia-search.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/local-search.js","path":"js/local-search.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/anime.min.js","path":"lib/anime.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/schemes/pisces.js","path":"js/schemes/pisces.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"533d18e79d9736c2b5dcac97290770c048e2cb3b","modified":1568876707633},{"_id":"themes/next/.all-contributorsrc","hash":"82bdd5689e6c7cf7bc9c8b40d6f856d554227053","modified":1568876759294},{"_id":"themes/next/.gitignore","hash":"7b68ca7a46104cf9aa84ec0541a4856ab1836eca","modified":1568876759298},{"_id":"themes/next/.editorconfig","hash":"8570735a8d8d034a3a175afd1dd40b39140b3e6a","modified":1568876759294},{"_id":"themes/next/.eslintrc.json","hash":"cc5f297f0322672fe3f684f823bc4659e4a54c41","modified":1568876759294},{"_id":"themes/next/.gitattributes","hash":"a54f902957d49356376b59287b894b1a3d7a003f","modified":1568876759294},{"_id":"themes/next/.stylintrc","hash":"2cf4d637b56d8eb423f59656a11f6403aa90f550","modified":1568876759298},{"_id":"themes/next/.travis.yml","hash":"3d1dc928c4a97933e64379cfde749dedf62f252c","modified":1568876759298},{"_id":"themes/next/LICENSE.md","hash":"18144d8ed58c75af66cb419d54f3f63374cd5c5b","modified":1568876759298},{"_id":"themes/next/README.md","hash":"e0fcd99c0a6db47fe5739df32d6ab39c44c65196","modified":1568876759298},{"_id":"themes/next/crowdin.yml","hash":"e026078448c77dcdd9ef50256bb6635a8f83dca6","modified":1568876759298},{"_id":"themes/next/gulpfile.coffee","hash":"25d1bf7f98ea03c647cb8caa19e109aaaacd6ad7","modified":1568876759302},{"_id":"themes/next/package.json","hash":"4891972e0a53023164ed241966ba93cb0a8c05fc","modified":1568876759314},{"_id":"source/_posts/VUE实现前端视频录制和截图.md","hash":"12915c8ba0398efd9a69f981a6f5f6af5b089ee7","modified":1568876707633},{"_id":"source/_posts/centOS安装php.md","hash":"eae982582dc40914edfa84ca074a8738d5ce9860","modified":1576488057391},{"_id":"source/_posts/centOS7安装mysql5-7.md","hash":"cc67d298510f4819272863dc1241a26c0daf583c","modified":1576573329396},{"_id":"source/_posts/laravel解析Excel文件.md","hash":"27599609e5be34ed5d1551a64467316c7bc71d25","modified":1576489923805},{"_id":"source/_posts/VUE中使用flvjs踩坑.md","hash":"324c346be60ef489d92451733c6c1ecc894e42a2","modified":1573634823278},{"_id":"themes/next/_config.yml","hash":"c4f77bb3b5f6f1f42857e2d28fef733e67906c94","modified":1573635030981},{"_id":"source/_posts/php安装拓展.md","hash":"3b011585cb42291c8ce2acd19f62f36e8c505957","modified":1576489840509},{"_id":"source/_posts/swagger在laravel中的使用.md","hash":"dc778f923681d4a0ba889ffc0c6f1efa3e56e33d","modified":1568876707633},{"_id":"source/_posts/关于JavaScript的分号问题.md","hash":"54cc8fb2af41fef8b6a8ddab1efe80cc3c78eb1d","modified":1573191479871},{"_id":"source/_posts/封装VUE组件并发布到npm.md","hash":"fb35c1a1e1c637bd60938e76d45e293fb1e36404","modified":1568876707641},{"_id":"source/_posts/服务器环境安装node.md","hash":"1fe606f28e1357b4945e1d5ef09dfb9cd468f6dc","modified":1572859896419},{"_id":"source/_posts/流媒体协议的认识.md","hash":"2dbb93ca7dd30cb6799ee975508412946c598f3e","modified":1574924936976},{"_id":"source/_posts/流媒体播放前端方案.md","hash":"db32dbbbc4ce07ab3f6236abcd18e2aeff3f8755","modified":1575340407883},{"_id":"source/_posts/浏览器并发限制.md","hash":"a5ad10ffddedd58d0a4ce9a8f0508e8fcfc0ee9e","modified":1571978726592},{"_id":"source/_posts/理解同源策略.md","hash":"112a2d1d917c113020a4a9304164b67780a10ed7","modified":1571384301293},{"_id":"source/categories/index.md","hash":"840e61eb41547e2b57ce24aeb3f09d6e9e56c8c9","modified":1568876707641},{"_id":"themes/next/.git/HEAD","hash":"1f4233a1de644e88922e010592393339ab082fd9","modified":1568876759270},{"_id":"themes/next/.git/config","hash":"004644130cacec134d0292973a04d3bb83cfab82","modified":1568876745558},{"_id":"source/_posts/nvm的使用.md","hash":"802eae8fb97411b8792216dc5df7a745974473f2","modified":1568876707633},{"_id":"source/_posts/VUE生成二维码并下载.md","hash":"fff95ed52d409fa4304a443bc05ed3cc054f8313","modified":1568876707633},{"_id":"themes/next/.git/index","hash":"c1b306213e0de61c3eaff2aa436766f3b734b7d3","modified":1568878380461},{"_id":"themes/next/.git/packed-refs","hash":"1cb4d2b400ebead42bda23fcf583121034265ca4","modified":1568876759270},{"_id":"source/_posts/php上传大文件配置.md","hash":"61d3126da3bf5cc7b845ba11a718ebeb3bb2562b","modified":1568876707633},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"00c25366764e6b9ccb40b877c60dc13b2916bbf7","modified":1568876759294},{"_id":"themes/next/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1568876743826},{"_id":"themes/next/.github/CODE_OF_CONDUCT.md","hash":"c149f003d03501565e7688915cd8f2e99fbf8f42","modified":1568876759294},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"88780daa3db837a34fe3ed90cc61cc578b5760ed","modified":1568876759294},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"d3e864f707c8bf2502579ef279d2c4e8cab8520a","modified":1568876759294},{"_id":"themes/next/.github/auto_assign.yml","hash":"cb68a1dca1c4623448c2ca899614a9f21df1b036","modified":1568876759294},{"_id":"themes/next/.github/config.yml","hash":"8a5cbf5aa9529390fe0a782758aca9c3a02f9dcf","modified":1568876759298},{"_id":"themes/next/.github/eslint-disable-bot.yml","hash":"16541fb7b80f5ab90135db96285badb63c4d7d3e","modified":1568876759298},{"_id":"themes/next/.github/lock.yml","hash":"585d2c471047be320aa62f2b74dad797bf09c530","modified":1568876759298},{"_id":"themes/next/.github/issue_label_bot.yaml","hash":"b09c85aa449f46bc025317ed196ec33a877f7c23","modified":1568876759298},{"_id":"themes/next/.github/mergeable.yml","hash":"0ee56e23bbc71e1e76427d2bd255a9879bd36e22","modified":1568876759298},{"_id":"themes/next/.github/stale.yml","hash":"41bf97ee86b8940a0b2e754499ec77fd2b44b717","modified":1568876759298},{"_id":"themes/next/.github/support.yml","hash":"d75db6ffa7b4ca3b865a925f9de9aef3fc51925c","modified":1568876759298},{"_id":"themes/next/.github/release-drafter.yml","hash":"f8a0ee0ad08e1493475dbb67b2957cd6afcafac0","modified":1568876759298},{"_id":"themes/next/docs/ALGOLIA-SEARCH.md","hash":"20f8a3d7db6e797a5a3ed8c84837315cb8e09e5b","modified":1568876759298},{"_id":"themes/next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1568876759298},{"_id":"themes/next/docs/DATA-FILES.md","hash":"a85ae0f3a9655eea9acd3f6209b72eb002f2058d","modified":1568876759298},{"_id":"themes/next/docs/AUTHORS.md","hash":"b18787dbbcef7877fa414d19c03eb79ad51fa94f","modified":1568876759298},{"_id":"themes/next/docs/INSTALLATION.md","hash":"5385246ab4756e3e26ec9fe1f6a6759812177cc4","modified":1568876759298},{"_id":"themes/next/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"1fb2c852fad03b73882069f1ec0659db2e1f2da0","modified":1568876759298},{"_id":"themes/next/docs/LICENSE.txt","hash":"368bf2c29d70f27d8726dd914f1b3211cae4bbab","modified":1568876759298},{"_id":"themes/next/docs/MATH.md","hash":"aa90364b1ac069b4f8cfdb48b4879311856224e6","modified":1568876759298},{"_id":"themes/next/docs/UPDATE-FROM-5.1.X.md","hash":"a07ca23c38f6e4dddd4b74016b30e88cd3796f75","modified":1568876759302},{"_id":"themes/next/languages/default.yml","hash":"c13eda783f8717c62b7ad9e8a9b724314ae74e1a","modified":1568876759302},{"_id":"themes/next/languages/en.yml","hash":"c13eda783f8717c62b7ad9e8a9b724314ae74e1a","modified":1568876759302},{"_id":"themes/next/languages/es.yml","hash":"7dc1d7d5ea1078ee3b9bc8e0e8d0f15f52a7a4aa","modified":1568876759302},{"_id":"themes/next/languages/de.yml","hash":"3d8920676d89494d7d1c74d4238680151ea6d9df","modified":1568876759302},{"_id":"themes/next/languages/hu.yml","hash":"e4a5f43fb45acd992def3de3b600aa4df4c95ed7","modified":1568876759302},{"_id":"themes/next/languages/fa.yml","hash":"269b5cb70774485d7dbbcf98eec72c9e84e135b2","modified":1568876759302},{"_id":"themes/next/languages/id.yml","hash":"5665dece8435964a27b5061d7283f339f84721f0","modified":1568876759302},{"_id":"themes/next/languages/fr.yml","hash":"dfdcfa536c40d06125dff373d042c50e08fcafd8","modified":1568876759302},{"_id":"themes/next/languages/it.yml","hash":"311597c620059dbb99474f19b2110a4485ecf70b","modified":1568876759302},{"_id":"themes/next/languages/ja.yml","hash":"4f929842b3d6aaed709ea99da679d3910ee184e5","modified":1568876759302},{"_id":"themes/next/languages/ko.yml","hash":"5f5194dd0f5a3c8484e7668bce6fbe23340e531a","modified":1568876759302},{"_id":"themes/next/languages/pt-BR.yml","hash":"13b579911e44a8b213e1860f9a50c341be1bf95e","modified":1568876759306},{"_id":"themes/next/languages/nl.yml","hash":"561c77ca68e9d51a5ce8c89d3361fdb033c96bba","modified":1568876759302},{"_id":"themes/next/languages/tr.yml","hash":"39caf8a3677fd6dfbd523e73f8482a509e87b603","modified":1568876759306},{"_id":"themes/next/languages/pt.yml","hash":"af9d9b581dca45ab9789ca41d3492883a911e383","modified":1568876759306},{"_id":"themes/next/languages/ru.yml","hash":"b485c57dd7b447406dafd0dcfdfc9356266708c9","modified":1568876759306},{"_id":"themes/next/languages/uk.yml","hash":"4cbdbb0ed09487c9b435be21ac35f62182f53283","modified":1568876759306},{"_id":"themes/next/languages/vi.yml","hash":"3c6bb816ee7278afcddac06998c9ebe47ee19aef","modified":1568876759306},{"_id":"themes/next/languages/zh-CN.yml","hash":"e92e1e07a89c9fab27f445f9ec0fa35049fef38c","modified":1568876759306},{"_id":"themes/next/layout/_layout.swig","hash":"698a065f1b1fd5bafde49872a9b941acce892bb4","modified":1568876759306},{"_id":"themes/next/languages/zh-TW.yml","hash":"ae2aa1c6ec1a5a01a3a3bde17bcc3a82f9a35fa7","modified":1568876759306},{"_id":"themes/next/languages/zh-HK.yml","hash":"93d10d6e448c519004b09b11fba980b5036c93af","modified":1568876759306},{"_id":"themes/next/layout/category.swig","hash":"38433a9de15f019267c9130e243e14343fb9bc3d","modified":1568876759314},{"_id":"themes/next/layout/archive.swig","hash":"72b4e0786668bc61c11eafa12da5d75272b93b61","modified":1568876759314},{"_id":"themes/next/layout/index.swig","hash":"20e776e8863f662c154bb765aaa0a1a22bf78126","modified":1568876759314},{"_id":"themes/next/layout/post.swig","hash":"0c3b34a6832b8e33574edc17095344f9e0bea74f","modified":1568876759314},{"_id":"themes/next/layout/tag.swig","hash":"153fb65e710a9643634aea4813431e92c11d09fe","modified":1568876759314},{"_id":"themes/next/layout/page.swig","hash":"a03a66a12a0642d57ad013d6724456810e48afd0","modified":1568876759314},{"_id":"source/_posts/swagger在laravel中的使用/swagger1.png","hash":"a208394d50e26798eb9be892e4ce506e07042cda","modified":1568876707633},{"_id":"source/_posts/VUE中使用flvjs踩坑/视频加载.png","hash":"ae2437f481f2e3ef338a12ef7d1284b389a5a65d","modified":1573634405342},{"_id":"source/_posts/swagger在laravel中的使用/swagger6.png","hash":"0028c2119d55a9c61cbf4bf4fd43b4919ad8abfa","modified":1568876707637},{"_id":"source/_posts/封装VUE组件并发布到npm/目录结构.png","hash":"4c700fe484c374c7a7643f63f5f60bed055cef06","modified":1568876707641},{"_id":"themes/next/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1568876743826},{"_id":"themes/next/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1568876743826},{"_id":"themes/next/.git/hooks/fsmonitor-watchman.sample","hash":"f7c0aa40cb0d620ff0bca3efe3521ec79e5d7156","modified":1568876743826},{"_id":"themes/next/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1568876743826},{"_id":"themes/next/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1568876743826},{"_id":"themes/next/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1568876743826},{"_id":"themes/next/.git/hooks/pre-commit.sample","hash":"33729ad4ce51acda35094e581e4088f3167a0af8","modified":1568876743826},{"_id":"themes/next/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1568876743826},{"_id":"themes/next/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1568876743826},{"_id":"themes/next/.git/logs/HEAD","hash":"c2a6f0673df85e8b0ee26f456f4a89b3626e7bd6","modified":1568876759270},{"_id":"themes/next/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1568876743826},{"_id":"themes/next/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1568876743826},{"_id":"themes/next/.github/ISSUE_TEMPLATE/bug-report.md","hash":"c37a60580c901c79ccb22564b228a46e06207445","modified":1568876759294},{"_id":"themes/next/.github/ISSUE_TEMPLATE/custom-issue-template.md","hash":"57e1e06e845193e80c7df4a4454af28352526f7a","modified":1568876759294},{"_id":"themes/next/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1568876743826},{"_id":"themes/next/.github/ISSUE_TEMPLATE/feature-request.md","hash":"07c423cce4157b8e2dbf60907ccbf3f18c4cf98a","modified":1568876759294},{"_id":"themes/next/.github/ISSUE_TEMPLATE/non-english.md","hash":"0b0727ff4d5180ae67f930fb4f8e9488e33eda9f","modified":1568876759294},{"_id":"source/_posts/VUE中使用flvjs踩坑/静音报错.png","hash":"35b816231a0e9bb11ef2cf6d4d3a0cca7763a986","modified":1573634419030},{"_id":"themes/next/docs/ru/DATA-FILES.md","hash":"67d04e3e29a2675d1a9f87d1ae6ea0769e963ff1","modified":1568876759302},{"_id":"themes/next/docs/ru/INSTALLATION.md","hash":"6c5d69e94961c793da156217ecf1179e868d7ba1","modified":1568876759302},{"_id":"themes/next/docs/ru/README.md","hash":"3ceab62de4db29e2257dd5a187c7f8731a207f84","modified":1568876759302},{"_id":"themes/next/docs/ru/UPDATE-FROM-5.1.X.md","hash":"b1dd18d9b890b21718883ea1832e7e02a773104a","modified":1568876759302},{"_id":"themes/next/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"5ad2c2d0a11443a03b3fd912925bc0dcfbcda88c","modified":1568876759302},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"0dfb458370a0ffbbe37c00f53c15e3aa3e79b125","modified":1568876759302},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"ca39e510b43ea1efe7e5feeca2243375e55eff5c","modified":1568876759302},{"_id":"themes/next/docs/zh-CN/DATA-FILES.md","hash":"c46f3f7496fc422207cc5954e10a2bc972b650aa","modified":1568876759302},{"_id":"themes/next/docs/zh-CN/INSTALLATION.md","hash":"c13546dd70a99a7d2d409cddf5d59f2f4d4d44a4","modified":1568876759302},{"_id":"themes/next/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"8ceaad956a1afedf179b2e0b98a67adee9afec08","modified":1568876759302},{"_id":"themes/next/docs/zh-CN/MATH.md","hash":"a658a72589738e11aefaa3a714b188ffd5aac822","modified":1568876759302},{"_id":"themes/next/docs/zh-CN/README.md","hash":"0981aaf68145a05b02cd10c95d38cbaf97622944","modified":1568876759302},{"_id":"themes/next/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"4ee0607ddcfb2fe0e5868aced6d5814d1ada4405","modified":1568876759302},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"f358e40e63f8c710d3f5f84dc13d1f5edd080a8d","modified":1568876759306},{"_id":"themes/next/layout/_macro/post.swig","hash":"9e4be9906a7263dd25cc9e9fcb2375c58168e039","modified":1568876759306},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"ccef7a8cd704575cf7bfe63c0492fe43592b1a6d","modified":1568876759306},{"_id":"themes/next/layout/_partials/footer.swig","hash":"9b1cf9a9248f117ecb185ddd822008236cc7fdf6","modified":1568876759306},{"_id":"themes/next/layout/_partials/comments.swig","hash":"e0f59221b6010bd3e05d34fac915556f51b8a458","modified":1568876759306},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"769a983fe2f77908bfc8590ff37a0d8958b47598","modified":1568876759310},{"_id":"themes/next/layout/_scripts/index.swig","hash":"cea942b450bcb0f352da78d76dc6d6f1d23d5029","modified":1568876759310},{"_id":"themes/next/layout/_partials/widgets.swig","hash":"58f12810a730ba8e3129c9b0d1a7cce42ac6f2d2","modified":1568876759310},{"_id":"themes/next/layout/_partials/post-edit.swig","hash":"4b0c972c44bfa7ab07604280563deb9cc3974657","modified":1568876759310},{"_id":"themes/next/layout/_scripts/noscript.swig","hash":"e08feac6f8904d7f2006e350514a2f07eb9fff44","modified":1568876759310},{"_id":"themes/next/layout/_scripts/pjax.swig","hash":"105004ddcc7fe9f4fd7ad1007b628ba8c08c1e27","modified":1568876759310},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"d3448044776dd23abd42b09ef0f26827f95efdf5","modified":1568876759310},{"_id":"themes/next/layout/_scripts/three.swig","hash":"eee4d26b5c0bb7872a21346151c38612a9b76d0b","modified":1568876759310},{"_id":"themes/next/layout/_third-party/baidu-push.swig","hash":"8627c8c8b031ecee16c522433b66fa4d6979b8ea","modified":1568876759310},{"_id":"themes/next/layout/_third-party/facebook-sdk.swig","hash":"ae5a96ad90f314da50bb6057bdd3a4a0a3106827","modified":1568876759310},{"_id":"themes/next/layout/_third-party/index.swig","hash":"32e4fe8dd8b3c40a17314569d1a14bde55251074","modified":1568876759310},{"_id":"themes/next/layout/_third-party/quicklink.swig","hash":"3a7824ba4ae7e5703fb196df45469f107387657e","modified":1568876759314},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"da6a9d14ed10203e378c6e2c00a7b5e7afabca58","modified":1568876759314},{"_id":"themes/next/scripts/events/core.js","hash":"a25690d8b03779f7e318108c8eace9baf6d4283a","modified":1568876759314},{"_id":"themes/next/scripts/filters/exturl.js","hash":"9c32675f64121ffbe454189b8e418b408f79d9c2","modified":1568876759314},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"834599d2b83f06e90f8cf618cddc106fe900ba5c","modified":1568876759314},{"_id":"themes/next/scripts/filters/minify.js","hash":"19985723b9f677ff775f3b17dcebf314819a76ac","modified":1568876759314},{"_id":"themes/next/scripts/filters/lazyload.js","hash":"51672320fff6b39f56fe6a2881c611afe4e79b8e","modified":1568876759314},{"_id":"themes/next/scripts/filters/excerpt.js","hash":"827c3733fa14b018dd1f07e41686c207880e823a","modified":1568876759314},{"_id":"themes/next/scripts/helpers/font.js","hash":"53169e2d04f0c21e68beb07c212be0a6c2a9aaea","modified":1568876759314},{"_id":"themes/next/scripts/helpers/engine.js","hash":"896a581feb9432e58a325ad04d66d6310a12374e","modified":1568876759314},{"_id":"themes/next/scripts/helpers/next-js.js","hash":"b28a8ed6d033946acbb5b91f6d8b884857410dd9","modified":1568876759314},{"_id":"themes/next/scripts/helpers/next-inject.js","hash":"33eb6f38de575b973fed237032c34d878594fdc1","modified":1568876759314},{"_id":"themes/next/scripts/helpers/next-vendors.js","hash":"d512f44195f68b0ff93f3c82afff9161cdf1b7d6","modified":1568876759314},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"799a042bbf497a4c7a2981aa2014ff28fa1bb382","modified":1568876759314},{"_id":"themes/next/scripts/tags/button.js","hash":"1d1d25f7e579d92fa563778dd0f163e8eda190da","modified":1568876759314},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"20e392b8583ba6ae5037449c2c7e191d3927641b","modified":1568876759314},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"f13430d9d1c9773b390787c2f046bb1f12a79878","modified":1568876759314},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"8fc05f22b88553bc1d96e0c925799cd97920fc6a","modified":1568876759318},{"_id":"themes/next/scripts/tags/full-image.js","hash":"70b1d6ed969143e3912daf051ccc3585d984c146","modified":1568876759318},{"_id":"themes/next/scripts/tags/include-raw.js","hash":"60f880c1e11a7df1aee4f2e01d65451fecc0372c","modified":1568876759318},{"_id":"themes/next/scripts/tags/label.js","hash":"fc5b267d903facb7a35001792db28b801cccb1f8","modified":1568876759318},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"983c6c4adea86160ecc0ba2204bc312aa338121d","modified":1568876759318},{"_id":"themes/next/scripts/tags/note.js","hash":"0a02bb4c15aec41f6d5f1271cdb5c65889e265d9","modified":1568876759318},{"_id":"themes/next/scripts/tags/pdf.js","hash":"f780cc72bff91d2720626e7af69eed25e9c12a29","modified":1568876759318},{"_id":"themes/next/scripts/tags/video.js","hash":"e5ff4c44faee604dd3ea9db6b222828c4750c227","modified":1568876759318},{"_id":"themes/next/scripts/tags/tabs.js","hash":"00ca6340d4fe0ccdae7525373e4729117775bbfa","modified":1568876759318},{"_id":"themes/next/layout/_third-party/vkontakte-api.swig","hash":"e0d012bdbae5545d90143030116114c34219bd37","modified":1568876759314},{"_id":"themes/next/source/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1568876759326},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1568876759326},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1568876759326},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1568876759326},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1568876759326},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1568876759326},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1568876759326},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1568876759326},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1568876759326},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1568876759326},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1568876759326},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1568876759326},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1568876759326},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1568876759326},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1568876759326},{"_id":"themes/next/source/css/main.styl","hash":"68c3377b643162aeaae2b60c196486fdb3b509c3","modified":1568876759326},{"_id":"themes/next/source/js/algolia-search.js","hash":"813afcc30feee11d59f297f2d5a96f98fbbd4743","modified":1568876759326},{"_id":"themes/next/source/js/bookmark.js","hash":"39b0022f8ee6c6d443affdbf8608a86155fbf8f4","modified":1568876759326},{"_id":"themes/next/source/js/motion.js","hash":"d52807a73efc34b1189c096477f348d05debf861","modified":1568876759330},{"_id":"themes/next/source/js/next-boot.js","hash":"2294cdcc61f265388c02955e86ff74641d18915a","modified":1568876759330},{"_id":"themes/next/source/js/local-search.js","hash":"0579159bf994e3726b3ba063e5905f79465fdfb1","modified":1568876759326},{"_id":"source/_posts/swagger在laravel中的使用/swagger2.png","hash":"5fa91101f811c880bb87e657b50f95f33ab7d8ae","modified":1568876707637},{"_id":"source/_posts/swagger在laravel中的使用/swagger3.png","hash":"dacad9389a6a90a6a2a8f9dbe884b0960146b216","modified":1568876707637},{"_id":"source/_posts/swagger在laravel中的使用/swagger5.png","hash":"94ef36c980900eafa324d2b99944d50ac05bdaa7","modified":1568876707637},{"_id":"themes/next/source/js/utils.js","hash":"7c5d0dcd99ac3bd0f49a058ddc2464260712836f","modified":1568876759330},{"_id":"themes/next/source/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1568876759330},{"_id":"source/_posts/swagger在laravel中的使用/swagger4.png","hash":"84e452b2a2a0501b607f3b9836258933302a0102","modified":1568876707637},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1568876759322},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1568876759322},{"_id":"source/_posts/swagger在laravel中的使用/swagger7.png","hash":"fc67167921cf2ed79351b8826041633d9496b7e2","modified":1568876707641},{"_id":"themes/next/layout/_macro/menu/menu-badge.swig","hash":"9e959646899a1dd381c0bea870408cd392c93c70","modified":1568876759306},{"_id":"themes/next/layout/_macro/menu/menu-item.swig","hash":"1dc3875981923aee38b7b1e3ca3813b75ed6ab9c","modified":1568876759306},{"_id":"themes/next/layout/_partials/analytics/cnzz-analytics.swig","hash":"a17ace37876822327a2f9306a472974442c9005d","modified":1568876759306},{"_id":"themes/next/layout/_partials/analytics/firestore.swig","hash":"67e63c25d509f02a6057ee9724f1b6efd647f72f","modified":1568876759306},{"_id":"themes/next/layout/_partials/analytics/busuanzi-counter.swig","hash":"b35b2bf2ce3d73cabe8c443a45c2a82d45baf151","modified":1568876759306},{"_id":"themes/next/layout/_partials/analytics/index.swig","hash":"ac6a3995c1330d2d73300b2427006509d0f8dba5","modified":1568876759306},{"_id":"themes/next/layout/_partials/analytics/tencent-analytics.swig","hash":"493a1ef6c8f475d4dd3156a6ab37690dc75695ea","modified":1568876759306},{"_id":"themes/next/layout/_partials/analytics/lean-analytics.swig","hash":"ca94a27904c4aa61dda840fa1bbe0d4c6e0ae8f6","modified":1568876759306},{"_id":"themes/next/layout/_partials/analytics/tencent-mta.swig","hash":"198813a3f382bda4278fe3759bf0f18a5769bb33","modified":1568876759306},{"_id":"themes/next/layout/_partials/head/head-unique.swig","hash":"6f02724e24945d7e5f0dcd351deebc90996ad38d","modified":1568876759306},{"_id":"themes/next/layout/_partials/head/head.swig","hash":"e1d442fae18f46e6902d3be40a1b7477e762152e","modified":1568876759306},{"_id":"themes/next/layout/_partials/header/index.swig","hash":"3e768faf37730891754f9817a01c04d754022017","modified":1568876759306},{"_id":"themes/next/layout/_partials/header/brand.swig","hash":"9718d372887f4b0ee952da42d10b2f736d0fc6de","modified":1568876759306},{"_id":"themes/next/layout/_partials/header/menu.swig","hash":"1ba4cd71b826186b7f782bd06258f2ec52a2b491","modified":1568876759306},{"_id":"themes/next/layout/_partials/header/sub-menu.swig","hash":"a72e33e11df9d3639cdebab4f480e397c70deacb","modified":1568876759306},{"_id":"themes/next/layout/_partials/page/breadcrumb.swig","hash":"883ea1d024a8262eb8d3213de71c8ccb30daf095","modified":1568876759306},{"_id":"themes/next/layout/_partials/page/page-header.swig","hash":"d3c25d70f0fd76121e4cacb9f8af4ccbe2a3c74d","modified":1568876759306},{"_id":"themes/next/layout/_partials/post/post-copyright.swig","hash":"3ed15de413b9ca83641bbd0b740f94b450630357","modified":1568876759310},{"_id":"themes/next/layout/_partials/post/post-footer.swig","hash":"b654d63d2ed221a8b642223e220392e5172d8f4d","modified":1568876759310},{"_id":"themes/next/layout/_partials/post/post-related.swig","hash":"e2549106ea26ac48019aa3f8023b8fdc78c0f6db","modified":1568876759310},{"_id":"themes/next/layout/_partials/post/post-reward.swig","hash":"40483139657cde24356c6a4033a6386b909327a9","modified":1568876759310},{"_id":"themes/next/layout/_partials/post/wechat-subscriber.swig","hash":"2edfaf1579ea58e15cb5583fb7962dfee9af2257","modified":1568876759310},{"_id":"themes/next/layout/_partials/search/algolia-search.swig","hash":"7fa01334a0ba84500e920bb9202baa08067d2ee1","modified":1568876759310},{"_id":"themes/next/layout/_partials/search/index.swig","hash":"d6fa9e4432b87004c5678dfe2d4b2c1f4a702b93","modified":1568876759310},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"733d6874aa4f50d1071e670a554508a5a0094eb3","modified":1568876759310},{"_id":"themes/next/layout/_partials/sidebar/site-overview.swig","hash":"caadb35670f3bf8e0a9ab06f00431def9a937746","modified":1568876759310},{"_id":"themes/next/layout/_scripts/pages/schedule.swig","hash":"9e44c795565837ba318fd739e42713de365673fd","modified":1568876759310},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"ffc8e8836714ea79abeb77b75859634615652877","modified":1568876759310},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"7f14ef43d9e82bc1efc204c5adf0b1dbfc919a9f","modified":1568876759310},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"1c910fc066c06d5fbbe9f2b0c47447539e029af7","modified":1568876759310},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"108b157fbd1ac3baaf19ae87234fa8728ab79556","modified":1568876759310},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"7fd0459d2f1cfe1254f2c2b8087dc094c8cb0e84","modified":1568876759310},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"4790058691b7d36cf6d2d6b4e93795a7b8d608ad","modified":1568876759310},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"9f73476ebcf5cd3b7f55525b3f35dc7e9f01e154","modified":1568876759310},{"_id":"themes/next/layout/_third-party/analytics/growingio.swig","hash":"42aa3022f7739a552c7a55de316d8c0994b2fdc1","modified":1568876759310},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"20fcbed44aede1b908bd17d7a0279b03639068b1","modified":1568876759310},{"_id":"themes/next/layout/_third-party/chat/chatra.swig","hash":"fdcf006e1ba2e53eab65e901b6c63159538307ef","modified":1568876759310},{"_id":"themes/next/layout/_third-party/chat/index.swig","hash":"5ab4a8b4306c837d2f8c211a9d7fdaed76fa254d","modified":1568876759310},{"_id":"themes/next/layout/_third-party/chat/tidio.swig","hash":"cba0e6e0fad08568a9e74ba9a5bee5341cfc04c1","modified":1568876759310},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"86092b31761948486ecb379eb7445f66a158769d","modified":1568876759310},{"_id":"themes/next/layout/_third-party/comments/disqusjs.swig","hash":"df8413cba22deffca94cf4edd6d9f8d35d2bb58f","modified":1568876759310},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"1130b8bd60f3b84397974486e6586d7f0afaf836","modified":1568876759310},{"_id":"themes/next/layout/_third-party/comments/gitalk.swig","hash":"261c4f1ab42f692279a310943b807ed34516df7c","modified":1568876759310},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"6f95bc4d7ffaddc3c0df0ef3eeeaac58ff83f560","modified":1568876759310},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"feba64b1246acc88461b9126bd22e2d75ee10ec9","modified":1568876759310},{"_id":"themes/next/layout/_third-party/math/katex.swig","hash":"6a05a8847cbd915029a511e995d5ee1ce571292c","modified":1568876759310},{"_id":"themes/next/layout/_third-party/math/index.swig","hash":"bc23c9eb9c06b0b377695f44373c14c5cde1d0e3","modified":1568876759310},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"b2fd17688f0433571b37704bc8df798e175e7811","modified":1568876759314},{"_id":"themes/next/layout/_third-party/math/mathjax.swig","hash":"dff6835d0b03ecc2db6919ca27cfb7b63949e6a8","modified":1568876759314},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"767b6c714c22588bcd26ba70b0fc19b6810cbacd","modified":1568876759314},{"_id":"themes/next/layout/_third-party/search/algolia-search.swig","hash":"ad7a22ee0f183481c7843ecd881b9f9e8e037e31","modified":1568876759314},{"_id":"themes/next/layout/_third-party/tags/index.swig","hash":"83d0a8f71878c6b96a04ba08567b9064de6cce83","modified":1568876759314},{"_id":"themes/next/layout/_third-party/tags/pdf.swig","hash":"7597800b6ce2f545baea797d95d1b8c7cf624299","modified":1568876759314},{"_id":"themes/next/layout/_third-party/tags/mermaid.swig","hash":"a54308f934c33b12f6bf28e4ce90e517f38cab57","modified":1568876759314},{"_id":"themes/next/scripts/events/lib/config.js","hash":"867b23bb231224064a79df5278ba0a02215044eb","modified":1568876759314},{"_id":"themes/next/scripts/events/lib/injects-point.js","hash":"6661c1c91c7cbdefc6a5e6a034b443b8811235a1","modified":1568876759314},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"7f2d93af012c1e14b8596fecbfc7febb43d9b7f5","modified":1568876759314},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"0803d4f4d3d02c24417c163ad0b27b60fda79250","modified":1568876759314},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"2a5f7c7e507bb354ec05a881bc9a1f4f2f28197c","modified":1568876759314},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"3ac62f5510f22e9d970089bb01f96ba2134ae161","modified":1568876759314},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"ccfac51bde0063ab7ef88182f8cbc98c210e78c9","modified":1568876759314},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"178c4618b29a1e06221285146071e72e24c40499","modified":1568876759314},{"_id":"themes/next/scripts/filters/comment/facebook-comments-plugin.js","hash":"e3c74b24f3818f2504fd0c7a954adaa6681bb969","modified":1568876759314},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"e51dc3072c1ba0ea3008f09ecae8b46242ec6021","modified":1568876759314},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"3c4bdc2a682f9889a532e1cb856bc5caeb4208e1","modified":1568876759314},{"_id":"themes/next/scripts/filters/comment/valine.js","hash":"e34d38aee93558b2c68a7fa6203c2e4806405d62","modified":1568876759314},{"_id":"themes/next/scripts/filters/comment/vkontakte.js","hash":"031337c2e2157628a15a5f4d96fa6e3fcf2733fe","modified":1568876759314},{"_id":"themes/next/layout/_third-party/search/swiftype.swig","hash":"ba0dbc06b9d244073a1c681ff7a722dcbf920b51","modified":1568876759314},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"2315dd8a7a2c7aabd29efa6193df08e805cb15fc","modified":1568876759322},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"644c1f0b02be9bf59955ebdf496136b3fa4b660b","modified":1568876759322},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"59384f63e608b272e4c8679009bbe5e6594fd1b1","modified":1568876759322},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"1e99dfbe7736acfee59d6f54dbd6b33ddfe2fe8a","modified":1568876759326},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"d9a2eff154fafff547b3aca7321eee94b450c00a","modified":1568876759326},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"14e4bd0bd702c7a7f83bf7d529fade2d0634c2f1","modified":1568876759326},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"db52bce619bb848189e83b7bfabd1b2a06fd5578","modified":1568876759326},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1568876759330},{"_id":"themes/next/source/css/_variables/base.styl","hash":"639b65a486154cf1f70c31f3fff440ce022255c0","modified":1568876759326},{"_id":"themes/next/source/js/schemes/muse.js","hash":"be8471d4a84b773014b46a3650887ab55116ea68","modified":1568876759330},{"_id":"themes/next/source/js/schemes/pisces.js","hash":"367aeb7efe8ebf8c12abef56c6dcf705ba5bd353","modified":1568876759330},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1568876759330},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1568876759330},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1568876759330},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1568876759334},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1568876759330},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1568876759334},{"_id":"themes/next/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1568876759270},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"b6b9dc8a350e51ad7b8bb08141a61fc2fd7466fc","modified":1568876759322},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"cb25eed35117be256ea7a573fec2cdfb66901dbb","modified":1568876759322},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"c4a5c52e30444602237530f379c1707ec864fa9a","modified":1568876759322},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"0c60cf489cd083d3a1e3502a240a761b656241c2","modified":1568876759322},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"4f7140cc0db08b47a25c4c7aad71047d433051a1","modified":1568876759322},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"19a20393d266b21ee44ff07d6fa1e9ebbc39a5d9","modified":1568876759322},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"4ddbc8b2dba6fad900c5eca793a31f18ba850f5a","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"cda066b495a4b6b10c7bc88b2a9b82722156b66b","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"e0db0d9205cd47c48edba81c7397e09ed24783fa","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"060aeb5cff414014f7cdbb61e0ec7855cb0d4b32","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"3faa8a7cdb05ef3f3b02920d381773dfd54270a5","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"6c61a120d61dec145c8db3a244cae0e724f6f3ef","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"674c32b6e9df4b2294df07c3966bf6555e0fb5ad","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"0dd11537a4b9a4d2faf3ad5cdae0f0f770a99ccf","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/rainbow.styl","hash":"8e9deaf1e0a27d5bf5f0401bf04f5637df12b6c4","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/scrollbar.styl","hash":"202ee1f1f8e64d8292df16f40ee176ff4e5d7e71","modified":1568876759322},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"c42802ecca44d4ea435c26700070a65375edfd7c","modified":1568876759322},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"3646e915b0a55f3b66e41d802b082aba88a76e06","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"54c5e23ec3dcbbc77848ededba76e861cf0f4719","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"b22583b7340c2686a46aefeeed086540b08324a3","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"eeab294e14abbae231107e1a327e907b25323136","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"71d75fa309cf5b96d876da536f57c047e57afcff","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"41b1d10a530913908e026fd991216e234766d148","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"87d19a45db10689aae9a09736efd1eb896a35b3d","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"3462ffd270f3e218e0a8362262466e79d731f975","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"73fe940abb0787a19f505fb614aafe73c8a24f08","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"dc2a3217f9b50cf42c4262c9e486281203eaef83","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"e859283440617f18f1ad298f7f1218aafa9b39d5","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"f1f81bca31e82ccbd375f0cb9fb8dbb3beac810d","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"2ab9e0499f241d1b91e2f7722072d23c95104e1f","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"ac523812bebb13cde268dc3cde65d0b7c6862e30","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"44ac3dff65c1bd3fe47feeed8e58aa00c9f2fb7b","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"10b4794ba62726fc052c74d786d962ed79d0780b","modified":1568876759326},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"3bcb47b9b9ea671e0a3cba6a821045d3434734cb","modified":1568876759326},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1568876759330},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1568876759330},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1568876759330},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1568876759334},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1568876759334},{"_id":"themes/next/.git/logs/refs/remotes/origin/HEAD","hash":"f685026946c6e73d78a6c40fbd0b973c513253e4","modified":1568876759270},{"_id":"themes/next/source/css/_common/components/header/bookmark.styl","hash":"e02b1097a72a7d2ddc45ea8d53aa6d77c25ac407","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"caf2abcffa5674adea300046fd3dbee2e830b40e","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"1bfa07d40ceb03b0b69a5752478ca555723f7a15","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/header/github-banner.styl","hash":"386fce803e5240c2d6860ae53f38ae3aa2e8b680","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"0caf32492692ba8e854da43697a2ec8a41612194","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"139c17e7d4aa3e1112340a26a270efe58c279f8e","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"dada73ae88f01fab2ab4d2c83eddfc558de2110a","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"4718d17fc4ee30802925890771a032d966133a31","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/highlight/copy-code.styl","hash":"2124abd41b69ff152f4bb39e78d8fbce96a45c65","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"d3f73688bb7423e3ab0de1efdf6db46db5e34f80","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"a67dc85f6d158dac20e951ab55988ff7e9e1739b","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"fafc96c86926b22afba8bb9418c05e6afbc05a57","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"4efe9174369bfe2125bd167feac18a07271635d6","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"2bd0eb1512415325653b26d62a4463e6de83c5ac","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"919cc9aaf60b03c2bf00aca3748127f38a2026cf","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"7ddb7453bf9b85b01bff136e9d10a7f06baac9e8","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"e72a89e0f421444453e149ba32c77a64bd8e44e8","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"db718eee14347f30ccabaa33bf6f9fbdea8b9462","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"ac2105c5a7f581b1c0f2b59f2c0c3e87a7c28383","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"3abf46c513e92f3f36c14d90f032983b94f36488","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"602a3c3d2785965b23412b5c219dfe74b5fb0844","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"caa9a78993d549117cdc8fa7a76c473a5e7f0f67","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"c60afb603d58cad3ad13e1a16c66832538510063","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"2e2a09dddd2a394a635bcefb6207b6cddcb784c7","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"541d6257023915a7caca7540f12cdf283ce025f3","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"f5c2788a78790aca1a2f37f7149d6058afb539e0","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"469d5e4e188f484abff24eddd5640fa4d4d77ed1","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"5da763d541540586ccd13868a36e3da55549eb22","modified":1568876759318},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"8b6481a0ac60007cf3defa3c9d85a6e412c91d6e","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"e77986ca3b914348b5c3c6b34c94b49ad53e4b9c","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"2ef546b4cfa5038ebb050c592c5135bbeb51af41","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"9b3ff4aa24069eab0e9771437013f45e450d4217","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"95339b71ac90553fb1634c536c9749055e0c788a","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-button.styl","hash":"41ccae779f918e6f9f5f625789a7360f1362454c","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"d055f8420583c7a009818dcdfaada592308bd628","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"f3108a247549fbdf11071d023add3f1b34ad2b23","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"db44ef2b99fc33d003010f38e64caad930c08ad0","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"782cf8847c9aca96f9194fcf1d910509e4073ce6","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"17c3f58fb84453603621d6a718fcc821c8d6bced","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"02e5a998748a67fa885fb06fae242bcf3f2786fb","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"0527bc64708a9446dc7bbb2c7e39ab3a61251c26","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"514999bde116ef5cd5f7aedea80059b12a87a1ea","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"78d309e22206a4addda3c393282518dae02250ed","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"a1eed8fe7f97885a9234502a197abf2e90ba22b6","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/tags/pdf.styl","hash":"2dc2a5b7becb11de1d4bdab6b5195588ae878cfc","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"754f70161b7e810f582cc4755d177859dcbcfced","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"9e4c0653cfd3cc6908fa0d97581bcf80861fb1e7","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"8a7fc03a568b95be8d3337195e38bc7ec5ba2b23","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"ef66c0a08e4243a25e41408d70ca66682b8dcea1","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"85b8606763f4177d2f9a11c1909a21ab1ae2011c","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"38ce7d692b8bc6fde02e3271dfd50ad37e107e4e","modified":1568876759322},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"4525465f40f82bd66e5f34e986440c75a9e2d2b2","modified":1568876759322},{"_id":"themes/next/.git/objects/pack/pack-7a9c5fc4af46356e7d24908f69f6833a52d7fb8b.idx","hash":"83a93ab895f29bd3b1637bceb0225f79b63245d0","modified":1568876759122},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1568876759334},{"_id":"themes/next/.git/objects/pack/pack-7a9c5fc4af46356e7d24908f69f6833a52d7fb8b.pack","hash":"61a61c3490c465a85f2e3404878fc8cc572905f0","modified":1568876759118},{"_id":"public/categories/index.html","hash":"da49a90ab9b8031d22bb4d190c40d70591199e43","modified":1576573344135},{"_id":"public/2019/11/04/服务器环境安装node/index.html","hash":"120cc7fdc6f116fffd428d6ad6d547010b956a64","modified":1576573344135},{"_id":"public/archives/index.html","hash":"79bef5485b3c0c4dca3edaa4bf047f12374b2af8","modified":1576573344136},{"_id":"public/archives/page/2/index.html","hash":"abcda08e764be03e675e129634fba1fa11d30887","modified":1576573344136},{"_id":"public/archives/2019/index.html","hash":"e849a8088baa4de7a355dd1e5c48c689e276261f","modified":1576573344140},{"_id":"public/archives/2019/page/2/index.html","hash":"2d09b14626aca0a2155f12293087de942f4a490e","modified":1576573344140},{"_id":"public/archives/2019/07/index.html","hash":"e5c66778bc28d5fe975dfcbe3bc76aa60c208da3","modified":1576573344140},{"_id":"public/archives/2019/08/index.html","hash":"4a63a11da4c0d48cba70f7c70da72553d9082f78","modified":1576573344140},{"_id":"public/archives/2019/09/index.html","hash":"d11729ead45688f522de0df96b24064da1682a03","modified":1576573344140},{"_id":"public/archives/2019/10/index.html","hash":"8389cd23fe15bf450ec3b094d7f039d4362af7af","modified":1576573344140},{"_id":"public/archives/2019/11/index.html","hash":"4cb7a33dd27a215144d323fc0d2a1e0350c1a780","modified":1576573344140},{"_id":"public/archives/2019/12/index.html","hash":"93c0a2eeff6e90a6756beb3005cf127b0f171b1e","modified":1576573344140},{"_id":"public/categories/VUE/index.html","hash":"a4a2423f29e16678f50ce871e5eb639eb455ab37","modified":1576573344140},{"_id":"public/categories/服务器配置问题/index.html","hash":"d66eb650489c01c4c753a7d43feaa43211ce6944","modified":1576573344140},{"_id":"public/categories/PHP/index.html","hash":"a31e1133c60af02d0840c77f0f06238ed3285c39","modified":1576573344140},{"_id":"public/categories/JavaScript/index.html","hash":"8019f3800cad7ef8fecc403e10ab4c71bba57995","modified":1576573344140},{"_id":"public/categories/开发小工具/index.html","hash":"1949edf86d6992b4a0eacce88526dc1b134fbbf5","modified":1576573344140},{"_id":"public/categories/其他/index.html","hash":"4873b3a6499cdc8c91b763e97c2c1b2f2ee26760","modified":1576573344141},{"_id":"public/categories/http/index.html","hash":"3efd8f322706afebc1d74caedc33b1a88f73fc24","modified":1576573344141},{"_id":"public/categories/浏览器/index.html","hash":"f20fc4eb67f1d90495c124c764871e859ca97660","modified":1576573344141},{"_id":"public/2019/12/17/centOS7安装mysql5-7/index.html","hash":"655882d62156564495cc5eb594df1062a6abbcba","modified":1576573344141},{"_id":"public/2019/12/16/php安装拓展/index.html","hash":"d81f669b7bee3580a96bb1084d35561d2d37205d","modified":1576573344141},{"_id":"public/2019/12/10/centOS安装php/index.html","hash":"b28ab7060e39c291443f646a75df5cacd3ec9252","modified":1576573344141},{"_id":"public/2019/12/02/流媒体播放前端方案/index.html","hash":"100cab287e0b89abbeaa3d56edbc7a8bec4d32ea","modified":1576573344141},{"_id":"public/2019/11/28/流媒体协议的认识/index.html","hash":"17ea39150037eb173fa8f39e204c300a3895fffa","modified":1576573344141},{"_id":"public/2019/11/13/VUE中使用flvjs踩坑/index.html","hash":"cdcfb3770c244041b91d918ef0ca55b4190ddcd1","modified":1576573344141},{"_id":"public/2019/11/08/关于JavaScript的分号问题/index.html","hash":"5bfdf46378b707d542c7a6bbb867b5bf34d7b1c1","modified":1576573344141},{"_id":"public/2019/10/25/浏览器并发限制/index.html","hash":"360dafcad975ccfe76fabd90a235f1fedb429cfc","modified":1576573344141},{"_id":"public/2019/10/18/理解同源策略/index.html","hash":"0737326c30537d1f1792a50fa88a04336a59297e","modified":1576573344141},{"_id":"public/2019/09/19/VUE生成二维码并下载/index.html","hash":"c8eecee2cce9f5b89884eeb2551b0ed158f78f06","modified":1576573344142},{"_id":"public/2019/09/18/封装VUE组件并发布到npm/index.html","hash":"3994d2043076246d79c1952a702b7cf0b6288522","modified":1576573344142},{"_id":"public/2019/09/18/nvm的使用/index.html","hash":"fca4b1bcc28acfa73911d13c5fd41522b738b731","modified":1576573344142},{"_id":"public/2019/09/17/VUE实现前端视频录制和截图/index.html","hash":"f8603f133fe645a15067c0a86f47b9e2180906b9","modified":1576573344142},{"_id":"public/2019/08/16/php上传大文件配置/index.html","hash":"47611e091f0d402d2090cae0a0d9cbab913fd423","modified":1576573344142},{"_id":"public/2019/08/04/laravel解析Excel文件/index.html","hash":"bb71071c30b6e4c7b9d00df7e7d9d9b01dcc8504","modified":1576573344142},{"_id":"public/2019/07/19/swagger在laravel中的使用/index.html","hash":"e6d39a9f52849262382776f6d5aadd3ca76b50ec","modified":1576573344142},{"_id":"public/index.html","hash":"6b0e51fcd1a5570b226babf3ab3281958cd6a4c5","modified":1576573344142},{"_id":"public/page/2/index.html","hash":"f4283793f661f8b44218f15b508f6d9cb435ee72","modified":1576573344142},{"_id":"public/CNAME","hash":"533d18e79d9736c2b5dcac97290770c048e2cb3b","modified":1576573344145},{"_id":"public/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1576573344145},{"_id":"public/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1576573344145},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1576573344146},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1576573344146},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1576573344146},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1576573344146},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1576573344146},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1576573344146},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1576573344146},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1576573344146},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1576573344146},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1576573344146},{"_id":"public/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1576573344146},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1576573344146},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1576573344146},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1576573344146},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1576573344146},{"_id":"public/2019/09/18/封装VUE组件并发布到npm/目录结构.png","hash":"4c700fe484c374c7a7643f63f5f60bed055cef06","modified":1576573344146},{"_id":"public/2019/11/13/VUE中使用flvjs踩坑/视频加载.png","hash":"ae2437f481f2e3ef338a12ef7d1284b389a5a65d","modified":1576573344146},{"_id":"public/2019/11/13/VUE中使用flvjs踩坑/静音报错.png","hash":"35b816231a0e9bb11ef2cf6d4d3a0cca7763a986","modified":1576573344146},{"_id":"public/2019/07/19/swagger在laravel中的使用/swagger1.png","hash":"a208394d50e26798eb9be892e4ce506e07042cda","modified":1576573344146},{"_id":"public/2019/07/19/swagger在laravel中的使用/swagger5.png","hash":"94ef36c980900eafa324d2b99944d50ac05bdaa7","modified":1576573344146},{"_id":"public/2019/07/19/swagger在laravel中的使用/swagger6.png","hash":"0028c2119d55a9c61cbf4bf4fd43b4919ad8abfa","modified":1576573344146},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1576573345176},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1576573345176},{"_id":"public/2019/07/19/swagger在laravel中的使用/swagger2.png","hash":"5fa91101f811c880bb87e657b50f95f33ab7d8ae","modified":1576573345176},{"_id":"public/2019/07/19/swagger在laravel中的使用/swagger3.png","hash":"dacad9389a6a90a6a2a8f9dbe884b0960146b216","modified":1576573345176},{"_id":"public/2019/07/19/swagger在laravel中的使用/swagger4.png","hash":"84e452b2a2a0501b607f3b9836258933302a0102","modified":1576573345176},{"_id":"public/js/bookmark.js","hash":"39b0022f8ee6c6d443affdbf8608a86155fbf8f4","modified":1576573345182},{"_id":"public/js/next-boot.js","hash":"2294cdcc61f265388c02955e86ff74641d18915a","modified":1576573345182},{"_id":"public/js/algolia-search.js","hash":"813afcc30feee11d59f297f2d5a96f98fbbd4743","modified":1576573345182},{"_id":"public/js/motion.js","hash":"d52807a73efc34b1189c096477f348d05debf861","modified":1576573345182},{"_id":"public/js/schemes/muse.js","hash":"be8471d4a84b773014b46a3650887ab55116ea68","modified":1576573345182},{"_id":"public/js/schemes/pisces.js","hash":"367aeb7efe8ebf8c12abef56c6dcf705ba5bd353","modified":1576573345182},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1576573345182},{"_id":"public/css/main.css","hash":"f27b293131b27bb81d737a6d9fccc5d947e42e73","modified":1576573345182},{"_id":"public/js/local-search.js","hash":"0579159bf994e3726b3ba063e5905f79465fdfb1","modified":1576573345194},{"_id":"public/js/utils.js","hash":"7c5d0dcd99ac3bd0f49a058ddc2464260712836f","modified":1576573345194},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1576573345194},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1576573345194},{"_id":"public/2019/07/19/swagger在laravel中的使用/swagger7.png","hash":"fc67167921cf2ed79351b8826041633d9496b7e2","modified":1576573345195},{"_id":"public/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1576573345202},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1576573345212},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1576573345224},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1576573345224}],"Category":[{"name":"VUE","_id":"ck49n28ad0003fiyhovu1vt6w"},{"name":"服务器配置问题","_id":"ck49n28ah0007fiyhm2ou1any"},{"name":"PHP","_id":"ck49n28ak000bfiyh45v1frqo"},{"name":"JavaScript","_id":"ck49n28ar000ofiyhj7dqmsm4"},{"name":"开发小工具","_id":"ck49n28at000tfiyht1k3hc6m"},{"name":"其他","_id":"ck49n28au000wfiyhk3rj7ppt"},{"name":"http","_id":"ck49n28au000zfiyh0cczp62m"},{"name":"浏览器","_id":"ck49n28av0011fiyho48bybkk"}],"Data":[],"Page":[{"title":"分类","date":"2019-07-24T02:58:39.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2019-07-24 10:58:39\ntype: categories\n---\n","updated":"2019-09-19T07:05:07.641Z","path":"categories/index.html","comments":1,"layout":"page","_id":"ck49n28aa0001fiyhb1y9533n","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"VUE实现前端视频录制和截图","date":"2019-09-17T07:15:18.000Z","_content":"\n## 介绍\n\n该功能是基于`vue-video-player`和`recordrtc`两个库来实现的。视频录制功能大多在后端实现，但是会出现不同步的情况，所以如果在直播或者视频播放时，想要录制一个简短的视频同时又要保证一致性的情况下，可以选择在前端进行视频的录制。\n<!-- more -->\n\n## 依赖\n\n```bash\nnpm install vue-video-player recordrtc\n```\n\n## 引入\n\n因为`vue-video-player`文档比较坑爹，如果按照文档的方式引入，会导致视频流解析不了。具体引入方式应该为：\n\n```javascript\n//组件内引入\nimport { videoPlayer } from 'vue-video-player';\nimport 'videojs-contrib-hls';\nrequire('video.js/dist/video-js.css');\nrequire('vue-video-player/src/custom-theme.css');\n\n//全局引入\nimport VideoPlayer from 'vue-video-player';\nimport 'videojs-contrib-hls';\nrequire('video.js/dist/video-js.css');\nrequire('vue-video-player/src/custom-theme.css');\nVue.use(VideoPlayer);\n```\n然后在需要使用的组件内引入`recordrtc`\n\n```javascript\nimport RecordRTC from 'recordrtc'\n```\n\n## 截图\n\n主要思路：    \n1. 获取当前播放的`video`标签；\n2. 创建一个`canvas`；\n3. 调用`canvas`的`drawImage`方法进行绘制；\n4. 将`canvas`转换为图片或base64；\n\n### 获取video标签\n\n因为在vue项目中，可以利用`ref`属性获取到video标签。我使用的是这种方法，也有其他的方法可以获取到，自由发挥就好。\n\n```javascript\n//获取video元素\nlet video = this.$refs.videoPlayer;\nlet videoEl = video.player.tech({\n    IWillNotUseThisInPlugins: true\n}).el();\n```\n\n### 创建canvas\n\n```javascript\n//创建一个canvas\nlet canvasEl = document.createElement('canvas');\ncanvasEl.width = videoEl.videoWidth;\ncanvasEl.height = videoEl.videoHeight;\n```\n\n### 调用drawImage方法\n\n具体关于`drawImage`方法的使用，可以参考[文档](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage \"drwaImage文档\")\n\n```javascript\n//截图\nlet ctx = canvasEl.getContext('2d');\nctx.drawImage(videoEl, 0, 0, 544, 960, 0, 0, 544, 960);\n```\n\n### 转换为base64\n\n```javascript\nlet image = canvasEl.toDataURL('image/png');\n```\n\n## 视频录制\n\n实现思路：    \n- 开始录像    \n    1. 获取video标签；\n    2. 获取视频流；\n    3. 将视频流注入到`recordrtc`；\n    4. 调用录制事件；\n- 停止录像       \n    1. 获取到录制的`blob`对象；\n    2. 生成可以直接播放的`url`；\n    2. 将`blob`转换为视频文件；\n\n### 开始录像\n\n```javascript\n//获取video元素\nlet video = this.$refs.videoPlayer;\nlet videoEl = video.player.tech({\n    IWillNotUseThisInPlugins: true\n}).el();\n\n//获取视频流\nlet stream = videoEl.captureStream();\n\n//将视频流注入到recordRTC\nthis.recorder = RecordRTC(stream, {\n    type: 'video'\n});\n\n//开始录制\nthis.recorder.startRecording();\n```\n\n### 停止录像\n\n```javascript\n//停止录制\nthis.recorder.stopRecording(() => {\n\n    //获取录制的blob对象\n    let blob = this.recorder.getBlob();\n    this.videoFile = this.recorder.getBlob();\n\n    //将blob转换为可以供video播放的url\n    let url = URL.createObjectURL(blob);\n\n    //将blob对象转换为文件\n    let fileName = this.videoFileName+\".webm\";\n    let fileObject = new File([blob], fileName, {\n        type: 'video/webm'\n    });     \n    \n});\n```\n\n## 录制插件\n\n如果觉得自己实现太麻烦可以直接下载我的包，具体如何使用可以去[这里](https://github.com/lp-liupan/vue-video-tape \"vue-video-tape\")","source":"_posts/VUE实现前端视频录制和截图.md","raw":"---\ntitle: VUE实现前端视频录制和截图\ndate: 2019-09-17 15:15:18\ncategories: VUE\n---\n\n## 介绍\n\n该功能是基于`vue-video-player`和`recordrtc`两个库来实现的。视频录制功能大多在后端实现，但是会出现不同步的情况，所以如果在直播或者视频播放时，想要录制一个简短的视频同时又要保证一致性的情况下，可以选择在前端进行视频的录制。\n<!-- more -->\n\n## 依赖\n\n```bash\nnpm install vue-video-player recordrtc\n```\n\n## 引入\n\n因为`vue-video-player`文档比较坑爹，如果按照文档的方式引入，会导致视频流解析不了。具体引入方式应该为：\n\n```javascript\n//组件内引入\nimport { videoPlayer } from 'vue-video-player';\nimport 'videojs-contrib-hls';\nrequire('video.js/dist/video-js.css');\nrequire('vue-video-player/src/custom-theme.css');\n\n//全局引入\nimport VideoPlayer from 'vue-video-player';\nimport 'videojs-contrib-hls';\nrequire('video.js/dist/video-js.css');\nrequire('vue-video-player/src/custom-theme.css');\nVue.use(VideoPlayer);\n```\n然后在需要使用的组件内引入`recordrtc`\n\n```javascript\nimport RecordRTC from 'recordrtc'\n```\n\n## 截图\n\n主要思路：    \n1. 获取当前播放的`video`标签；\n2. 创建一个`canvas`；\n3. 调用`canvas`的`drawImage`方法进行绘制；\n4. 将`canvas`转换为图片或base64；\n\n### 获取video标签\n\n因为在vue项目中，可以利用`ref`属性获取到video标签。我使用的是这种方法，也有其他的方法可以获取到，自由发挥就好。\n\n```javascript\n//获取video元素\nlet video = this.$refs.videoPlayer;\nlet videoEl = video.player.tech({\n    IWillNotUseThisInPlugins: true\n}).el();\n```\n\n### 创建canvas\n\n```javascript\n//创建一个canvas\nlet canvasEl = document.createElement('canvas');\ncanvasEl.width = videoEl.videoWidth;\ncanvasEl.height = videoEl.videoHeight;\n```\n\n### 调用drawImage方法\n\n具体关于`drawImage`方法的使用，可以参考[文档](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage \"drwaImage文档\")\n\n```javascript\n//截图\nlet ctx = canvasEl.getContext('2d');\nctx.drawImage(videoEl, 0, 0, 544, 960, 0, 0, 544, 960);\n```\n\n### 转换为base64\n\n```javascript\nlet image = canvasEl.toDataURL('image/png');\n```\n\n## 视频录制\n\n实现思路：    \n- 开始录像    \n    1. 获取video标签；\n    2. 获取视频流；\n    3. 将视频流注入到`recordrtc`；\n    4. 调用录制事件；\n- 停止录像       \n    1. 获取到录制的`blob`对象；\n    2. 生成可以直接播放的`url`；\n    2. 将`blob`转换为视频文件；\n\n### 开始录像\n\n```javascript\n//获取video元素\nlet video = this.$refs.videoPlayer;\nlet videoEl = video.player.tech({\n    IWillNotUseThisInPlugins: true\n}).el();\n\n//获取视频流\nlet stream = videoEl.captureStream();\n\n//将视频流注入到recordRTC\nthis.recorder = RecordRTC(stream, {\n    type: 'video'\n});\n\n//开始录制\nthis.recorder.startRecording();\n```\n\n### 停止录像\n\n```javascript\n//停止录制\nthis.recorder.stopRecording(() => {\n\n    //获取录制的blob对象\n    let blob = this.recorder.getBlob();\n    this.videoFile = this.recorder.getBlob();\n\n    //将blob转换为可以供video播放的url\n    let url = URL.createObjectURL(blob);\n\n    //将blob对象转换为文件\n    let fileName = this.videoFileName+\".webm\";\n    let fileObject = new File([blob], fileName, {\n        type: 'video/webm'\n    });     \n    \n});\n```\n\n## 录制插件\n\n如果觉得自己实现太麻烦可以直接下载我的包，具体如何使用可以去[这里](https://github.com/lp-liupan/vue-video-tape \"vue-video-tape\")","slug":"VUE实现前端视频录制和截图","published":1,"updated":"2019-09-19T07:05:07.633Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28a60000fiyhl02210xp","content":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>该功能是基于<code>vue-video-player</code>和<code>recordrtc</code>两个库来实现的。视频录制功能大多在后端实现，但是会出现不同步的情况，所以如果在直播或者视频播放时，想要录制一个简短的视频同时又要保证一致性的情况下，可以选择在前端进行视频的录制。</p>\n<a id=\"more\"></a>\n\n<h2 id=\"依赖\"><a href=\"#依赖\" class=\"headerlink\" title=\"依赖\"></a>依赖</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vue-video-player recordrtc</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"引入\"><a href=\"#引入\" class=\"headerlink\" title=\"引入\"></a>引入</h2><p>因为<code>vue-video-player</code>文档比较坑爹，如果按照文档的方式引入，会导致视频流解析不了。具体引入方式应该为：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//组件内引入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; videoPlayer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-player'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'videojs-contrib-hls'</span>;</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'video.js/dist/video-js.css'</span>);</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'vue-video-player/src/custom-theme.css'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//全局引入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> VideoPlayer <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-player'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'videojs-contrib-hls'</span>;</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'video.js/dist/video-js.css'</span>);</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'vue-video-player/src/custom-theme.css'</span>);</span><br><span class=\"line\">Vue.use(VideoPlayer);</span><br></pre></td></tr></table></figure>\n\n<p>然后在需要使用的组件内引入<code>recordrtc</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> RecordRTC <span class=\"keyword\">from</span> <span class=\"string\">'recordrtc'</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"截图\"><a href=\"#截图\" class=\"headerlink\" title=\"截图\"></a>截图</h2><p>主要思路：    </p>\n<ol>\n<li>获取当前播放的<code>video</code>标签；</li>\n<li>创建一个<code>canvas</code>；</li>\n<li>调用<code>canvas</code>的<code>drawImage</code>方法进行绘制；</li>\n<li>将<code>canvas</code>转换为图片或base64；</li>\n</ol>\n<h3 id=\"获取video标签\"><a href=\"#获取video标签\" class=\"headerlink\" title=\"获取video标签\"></a>获取video标签</h3><p>因为在vue项目中，可以利用<code>ref</code>属性获取到video标签。我使用的是这种方法，也有其他的方法可以获取到，自由发挥就好。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//获取video元素</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> video = <span class=\"keyword\">this</span>.$refs.videoPlayer;</span><br><span class=\"line\"><span class=\"keyword\">let</span> videoEl = video.player.tech(&#123;</span><br><span class=\"line\">    IWillNotUseThisInPlugins: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;).el();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建canvas\"><a href=\"#创建canvas\" class=\"headerlink\" title=\"创建canvas\"></a>创建canvas</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//创建一个canvas</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> canvasEl = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'canvas'</span>);</span><br><span class=\"line\">canvasEl.width = videoEl.videoWidth;</span><br><span class=\"line\">canvasEl.height = videoEl.videoHeight;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"调用drawImage方法\"><a href=\"#调用drawImage方法\" class=\"headerlink\" title=\"调用drawImage方法\"></a>调用drawImage方法</h3><p>具体关于<code>drawImage</code>方法的使用，可以参考<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage\" title=\"drwaImage文档\" target=\"_blank\" rel=\"noopener\">文档</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//截图</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> ctx = canvasEl.getContext(<span class=\"string\">'2d'</span>);</span><br><span class=\"line\">ctx.drawImage(videoEl, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">544</span>, <span class=\"number\">960</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">544</span>, <span class=\"number\">960</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"转换为base64\"><a href=\"#转换为base64\" class=\"headerlink\" title=\"转换为base64\"></a>转换为base64</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> image = canvasEl.toDataURL(<span class=\"string\">'image/png'</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"视频录制\"><a href=\"#视频录制\" class=\"headerlink\" title=\"视频录制\"></a>视频录制</h2><p>实现思路：    </p>\n<ul>\n<li>开始录像    <ol>\n<li>获取video标签；</li>\n<li>获取视频流；</li>\n<li>将视频流注入到<code>recordrtc</code>；</li>\n<li>调用录制事件；</li>\n</ol>\n</li>\n<li>停止录像       <ol>\n<li>获取到录制的<code>blob</code>对象；</li>\n<li>生成可以直接播放的<code>url</code>；</li>\n<li>将<code>blob</code>转换为视频文件；</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"开始录像\"><a href=\"#开始录像\" class=\"headerlink\" title=\"开始录像\"></a>开始录像</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//获取video元素</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> video = <span class=\"keyword\">this</span>.$refs.videoPlayer;</span><br><span class=\"line\"><span class=\"keyword\">let</span> videoEl = video.player.tech(&#123;</span><br><span class=\"line\">    IWillNotUseThisInPlugins: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;).el();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//获取视频流</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> stream = videoEl.captureStream();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//将视频流注入到recordRTC</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.recorder = RecordRTC(stream, &#123;</span><br><span class=\"line\">    type: <span class=\"string\">'video'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//开始录制</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.recorder.startRecording();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"停止录像\"><a href=\"#停止录像\" class=\"headerlink\" title=\"停止录像\"></a>停止录像</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//停止录制</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.recorder.stopRecording(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//获取录制的blob对象</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> blob = <span class=\"keyword\">this</span>.recorder.getBlob();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.videoFile = <span class=\"keyword\">this</span>.recorder.getBlob();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//将blob转换为可以供video播放的url</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> url = URL.createObjectURL(blob);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//将blob对象转换为文件</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> fileName = <span class=\"keyword\">this</span>.videoFileName+<span class=\"string\">\".webm\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> fileObject = <span class=\"keyword\">new</span> File([blob], fileName, &#123;</span><br><span class=\"line\">        type: <span class=\"string\">'video/webm'</span></span><br><span class=\"line\">    &#125;);     </span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"录制插件\"><a href=\"#录制插件\" class=\"headerlink\" title=\"录制插件\"></a>录制插件</h2><p>如果觉得自己实现太麻烦可以直接下载我的包，具体如何使用可以去<a href=\"https://github.com/lp-liupan/vue-video-tape\" title=\"vue-video-tape\" target=\"_blank\" rel=\"noopener\">这里</a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>该功能是基于<code>vue-video-player</code>和<code>recordrtc</code>两个库来实现的。视频录制功能大多在后端实现，但是会出现不同步的情况，所以如果在直播或者视频播放时，想要录制一个简短的视频同时又要保证一致性的情况下，可以选择在前端进行视频的录制。</p>","more":"<h2 id=\"依赖\"><a href=\"#依赖\" class=\"headerlink\" title=\"依赖\"></a>依赖</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vue-video-player recordrtc</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"引入\"><a href=\"#引入\" class=\"headerlink\" title=\"引入\"></a>引入</h2><p>因为<code>vue-video-player</code>文档比较坑爹，如果按照文档的方式引入，会导致视频流解析不了。具体引入方式应该为：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//组件内引入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; videoPlayer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-player'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'videojs-contrib-hls'</span>;</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'video.js/dist/video-js.css'</span>);</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'vue-video-player/src/custom-theme.css'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//全局引入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> VideoPlayer <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-player'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'videojs-contrib-hls'</span>;</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'video.js/dist/video-js.css'</span>);</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'vue-video-player/src/custom-theme.css'</span>);</span><br><span class=\"line\">Vue.use(VideoPlayer);</span><br></pre></td></tr></table></figure>\n\n<p>然后在需要使用的组件内引入<code>recordrtc</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> RecordRTC <span class=\"keyword\">from</span> <span class=\"string\">'recordrtc'</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"截图\"><a href=\"#截图\" class=\"headerlink\" title=\"截图\"></a>截图</h2><p>主要思路：    </p>\n<ol>\n<li>获取当前播放的<code>video</code>标签；</li>\n<li>创建一个<code>canvas</code>；</li>\n<li>调用<code>canvas</code>的<code>drawImage</code>方法进行绘制；</li>\n<li>将<code>canvas</code>转换为图片或base64；</li>\n</ol>\n<h3 id=\"获取video标签\"><a href=\"#获取video标签\" class=\"headerlink\" title=\"获取video标签\"></a>获取video标签</h3><p>因为在vue项目中，可以利用<code>ref</code>属性获取到video标签。我使用的是这种方法，也有其他的方法可以获取到，自由发挥就好。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//获取video元素</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> video = <span class=\"keyword\">this</span>.$refs.videoPlayer;</span><br><span class=\"line\"><span class=\"keyword\">let</span> videoEl = video.player.tech(&#123;</span><br><span class=\"line\">    IWillNotUseThisInPlugins: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;).el();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建canvas\"><a href=\"#创建canvas\" class=\"headerlink\" title=\"创建canvas\"></a>创建canvas</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//创建一个canvas</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> canvasEl = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'canvas'</span>);</span><br><span class=\"line\">canvasEl.width = videoEl.videoWidth;</span><br><span class=\"line\">canvasEl.height = videoEl.videoHeight;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"调用drawImage方法\"><a href=\"#调用drawImage方法\" class=\"headerlink\" title=\"调用drawImage方法\"></a>调用drawImage方法</h3><p>具体关于<code>drawImage</code>方法的使用，可以参考<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage\" title=\"drwaImage文档\" target=\"_blank\" rel=\"noopener\">文档</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//截图</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> ctx = canvasEl.getContext(<span class=\"string\">'2d'</span>);</span><br><span class=\"line\">ctx.drawImage(videoEl, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">544</span>, <span class=\"number\">960</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">544</span>, <span class=\"number\">960</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"转换为base64\"><a href=\"#转换为base64\" class=\"headerlink\" title=\"转换为base64\"></a>转换为base64</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> image = canvasEl.toDataURL(<span class=\"string\">'image/png'</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"视频录制\"><a href=\"#视频录制\" class=\"headerlink\" title=\"视频录制\"></a>视频录制</h2><p>实现思路：    </p>\n<ul>\n<li>开始录像    <ol>\n<li>获取video标签；</li>\n<li>获取视频流；</li>\n<li>将视频流注入到<code>recordrtc</code>；</li>\n<li>调用录制事件；</li>\n</ol>\n</li>\n<li>停止录像       <ol>\n<li>获取到录制的<code>blob</code>对象；</li>\n<li>生成可以直接播放的<code>url</code>；</li>\n<li>将<code>blob</code>转换为视频文件；</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"开始录像\"><a href=\"#开始录像\" class=\"headerlink\" title=\"开始录像\"></a>开始录像</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//获取video元素</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> video = <span class=\"keyword\">this</span>.$refs.videoPlayer;</span><br><span class=\"line\"><span class=\"keyword\">let</span> videoEl = video.player.tech(&#123;</span><br><span class=\"line\">    IWillNotUseThisInPlugins: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;).el();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//获取视频流</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> stream = videoEl.captureStream();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//将视频流注入到recordRTC</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.recorder = RecordRTC(stream, &#123;</span><br><span class=\"line\">    type: <span class=\"string\">'video'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//开始录制</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.recorder.startRecording();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"停止录像\"><a href=\"#停止录像\" class=\"headerlink\" title=\"停止录像\"></a>停止录像</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//停止录制</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.recorder.stopRecording(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//获取录制的blob对象</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> blob = <span class=\"keyword\">this</span>.recorder.getBlob();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.videoFile = <span class=\"keyword\">this</span>.recorder.getBlob();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//将blob转换为可以供video播放的url</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> url = URL.createObjectURL(blob);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//将blob对象转换为文件</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> fileName = <span class=\"keyword\">this</span>.videoFileName+<span class=\"string\">\".webm\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> fileObject = <span class=\"keyword\">new</span> File([blob], fileName, &#123;</span><br><span class=\"line\">        type: <span class=\"string\">'video/webm'</span></span><br><span class=\"line\">    &#125;);     </span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"录制插件\"><a href=\"#录制插件\" class=\"headerlink\" title=\"录制插件\"></a>录制插件</h2><p>如果觉得自己实现太麻烦可以直接下载我的包，具体如何使用可以去<a href=\"https://github.com/lp-liupan/vue-video-tape\" title=\"vue-video-tape\" target=\"_blank\" rel=\"noopener\">这里</a></p>"},{"title":"centOS7安装mysql5.7","date":"2019-12-17T08:30:12.000Z","_content":"\n# 介绍\n\ncentos安装软件基本上是两种方式，一种是RPM二进制包的方式，另一种tarble（源码）的方式。源码安装软件的方式可以参考[centOS安装php](https://www.xiaotaotao.vip/2019/12/10/centOS%E5%AE%89%E8%A3%85php/#more)。这里安装mysql5.7主要就是使用RPM二进制包的方式。\n\n# 下载RPM包\n\n推荐去mysql官网的[yum库下载](https://dev.mysql.com/downloads/repo/yum/)与系统匹配的包，右键复制下载链接，然后去下载目录下载。\n\n```bash\ncd /usr/local/src/\n\n#使用wget下载\nwget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm\n```\n\n# yum本地安装（配置源）\n\n```bash\n#在下载目录执行`yum localinstall RPM包名`\nyum localinstall  mysql80-community-release-el7-3.noarch.rpm\n```\n# 选择安装版本（可选）\n\n通过下载的RPM包名就可以看出，我们当前默认安装的话MySQL的版本就是8.0的，如果不需要更改安装版本，直接`yum install mysql-community-server`下载就可以了。而我们要安装5.7版本的，这时候就需要修改yum的配置文件，选择我们需要的版本。\n\n```bash\n#修改配置文件\nvim /etc/yum.repos.d/mysql-community.repo \n\n\n#可以看到8.0版本中的enable选项值为1，如果需要改为5.7版本，\n#需要将8.0版本中的enable选项值改为0,5.7版本的enable值改为1\n\n[mysql57-community]\nname=MySQL 5.7 Community Server\nbaseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/7/$basearch/\nenabled=0\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql\n\n[mysql80-community]\nname=MySQL 8.0 Community Server\nbaseurl=http://repo.mysql.com/yum/mysql-8.0-community/el/7/$basearch/\nenabled=1\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql\n```\n\n修改好了配置文件后，再使用`yum install mysql-community-server`安装MySQL就是5.7版本。\n\n# 启动MySQL服务\n\n使用RPM包安装的MySQL已经默认配置了systemctl，直接使用systemctl启动就可以了。\n\n```bash\n#启动\nsystemctl start mysqld\n\n#关闭\nsystemctl stop mysqld\n```\n\n>注意：如果原来安装过其他版本的MySQL，这里启动的时候可能会报错，自行到`/var/log/mysqld.log`日志文件中查看，然后百度吧。\n\n# 修改密码\n\nMySQL默认创建了root用户，密码是随机生成的，需要到日志文件中查看。进入数据库系统后，第一时间改掉root密码。\n\n```bash\n#获取root密码\ncat /var/log/mysqld.log | grep \"temporary password\"\n\n#登录\nmysql -u root -p\n\n#修改密码\nSET PASSWORD = PASSWORD('密码（有复杂度验证，简单密码会报错）');\n\n```","source":"_posts/centOS7安装mysql5-7.md","raw":"---\ntitle: centOS7安装mysql5.7\ndate: 2019-12-17 16:30:12\ncategories: 服务器配置问题\n---\n\n# 介绍\n\ncentos安装软件基本上是两种方式，一种是RPM二进制包的方式，另一种tarble（源码）的方式。源码安装软件的方式可以参考[centOS安装php](https://www.xiaotaotao.vip/2019/12/10/centOS%E5%AE%89%E8%A3%85php/#more)。这里安装mysql5.7主要就是使用RPM二进制包的方式。\n\n# 下载RPM包\n\n推荐去mysql官网的[yum库下载](https://dev.mysql.com/downloads/repo/yum/)与系统匹配的包，右键复制下载链接，然后去下载目录下载。\n\n```bash\ncd /usr/local/src/\n\n#使用wget下载\nwget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm\n```\n\n# yum本地安装（配置源）\n\n```bash\n#在下载目录执行`yum localinstall RPM包名`\nyum localinstall  mysql80-community-release-el7-3.noarch.rpm\n```\n# 选择安装版本（可选）\n\n通过下载的RPM包名就可以看出，我们当前默认安装的话MySQL的版本就是8.0的，如果不需要更改安装版本，直接`yum install mysql-community-server`下载就可以了。而我们要安装5.7版本的，这时候就需要修改yum的配置文件，选择我们需要的版本。\n\n```bash\n#修改配置文件\nvim /etc/yum.repos.d/mysql-community.repo \n\n\n#可以看到8.0版本中的enable选项值为1，如果需要改为5.7版本，\n#需要将8.0版本中的enable选项值改为0,5.7版本的enable值改为1\n\n[mysql57-community]\nname=MySQL 5.7 Community Server\nbaseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/7/$basearch/\nenabled=0\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql\n\n[mysql80-community]\nname=MySQL 8.0 Community Server\nbaseurl=http://repo.mysql.com/yum/mysql-8.0-community/el/7/$basearch/\nenabled=1\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql\n```\n\n修改好了配置文件后，再使用`yum install mysql-community-server`安装MySQL就是5.7版本。\n\n# 启动MySQL服务\n\n使用RPM包安装的MySQL已经默认配置了systemctl，直接使用systemctl启动就可以了。\n\n```bash\n#启动\nsystemctl start mysqld\n\n#关闭\nsystemctl stop mysqld\n```\n\n>注意：如果原来安装过其他版本的MySQL，这里启动的时候可能会报错，自行到`/var/log/mysqld.log`日志文件中查看，然后百度吧。\n\n# 修改密码\n\nMySQL默认创建了root用户，密码是随机生成的，需要到日志文件中查看。进入数据库系统后，第一时间改掉root密码。\n\n```bash\n#获取root密码\ncat /var/log/mysqld.log | grep \"temporary password\"\n\n#登录\nmysql -u root -p\n\n#修改密码\nSET PASSWORD = PASSWORD('密码（有复杂度验证，简单密码会报错）');\n\n```","slug":"centOS7安装mysql5-7","published":1,"updated":"2019-12-17T09:02:09.396Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28ab0002fiyhkh7rcndi","content":"<h1 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h1><p>centos安装软件基本上是两种方式，一种是RPM二进制包的方式，另一种tarble（源码）的方式。源码安装软件的方式可以参考<a href=\"https://www.xiaotaotao.vip/2019/12/10/centOS%E5%AE%89%E8%A3%85php/#more\">centOS安装php</a>。这里安装mysql5.7主要就是使用RPM二进制包的方式。</p><a id=\"more\"></a>\n<h1 id=\"下载RPM包\"><a href=\"#下载RPM包\" class=\"headerlink\" title=\"下载RPM包\"></a>下载RPM包</h1><p>推荐去mysql官网的<a href=\"https://dev.mysql.com/downloads/repo/yum/\" target=\"_blank\" rel=\"noopener\">yum库下载</a>与系统匹配的包，右键复制下载链接，然后去下载目录下载。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用wget下载</span></span><br><span class=\"line\">wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"yum本地安装（配置源）\"><a href=\"#yum本地安装（配置源）\" class=\"headerlink\" title=\"yum本地安装（配置源）\"></a>yum本地安装（配置源）</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#在下载目录执行`yum localinstall RPM包名`</span></span><br><span class=\"line\">yum localinstall  mysql80-community-release-el7-3.noarch.rpm</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"选择安装版本（可选）\"><a href=\"#选择安装版本（可选）\" class=\"headerlink\" title=\"选择安装版本（可选）\"></a>选择安装版本（可选）</h1><p>通过下载的RPM包名就可以看出，我们当前默认安装的话MySQL的版本就是8.0的，如果不需要更改安装版本，直接<code>yum install mysql-community-server</code>下载就可以了。而我们要安装5.7版本的，这时候就需要修改yum的配置文件，选择我们需要的版本。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#修改配置文件</span></span><br><span class=\"line\">vim /etc/yum.repos.d/mysql-community.repo </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#可以看到8.0版本中的enable选项值为1，如果需要改为5.7版本，</span></span><br><span class=\"line\"><span class=\"comment\">#需要将8.0版本中的enable选项值改为0,5.7版本的enable值改为1</span></span><br><span class=\"line\"></span><br><span class=\"line\">[mysql57-community]</span><br><span class=\"line\">name=MySQL 5.7 Community Server</span><br><span class=\"line\">baseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/7/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">enabled=0</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br><span class=\"line\"></span><br><span class=\"line\">[mysql80-community]</span><br><span class=\"line\">name=MySQL 8.0 Community Server</span><br><span class=\"line\">baseurl=http://repo.mysql.com/yum/mysql-8.0-community/el/7/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br></pre></td></tr></table></figure>\n\n<p>修改好了配置文件后，再使用<code>yum install mysql-community-server</code>安装MySQL就是5.7版本。</p>\n<h1 id=\"启动MySQL服务\"><a href=\"#启动MySQL服务\" class=\"headerlink\" title=\"启动MySQL服务\"></a>启动MySQL服务</h1><p>使用RPM包安装的MySQL已经默认配置了systemctl，直接使用systemctl启动就可以了。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#启动</span></span><br><span class=\"line\">systemctl start mysqld</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#关闭</span></span><br><span class=\"line\">systemctl stop mysqld</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：如果原来安装过其他版本的MySQL，这里启动的时候可能会报错，自行到<code>/var/log/mysqld.log</code>日志文件中查看，然后百度吧。</p>\n</blockquote>\n<h1 id=\"修改密码\"><a href=\"#修改密码\" class=\"headerlink\" title=\"修改密码\"></a>修改密码</h1><p>MySQL默认创建了root用户，密码是随机生成的，需要到日志文件中查看。进入数据库系统后，第一时间改掉root密码。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#获取root密码</span></span><br><span class=\"line\">cat /var/<span class=\"built_in\">log</span>/mysqld.log | grep <span class=\"string\">\"temporary password\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#登录</span></span><br><span class=\"line\">mysql -u root -p</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#修改密码</span></span><br><span class=\"line\">SET PASSWORD = PASSWORD(<span class=\"string\">'密码（有复杂度验证，简单密码会报错）'</span>);</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<h1 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h1><p>centos安装软件基本上是两种方式，一种是RPM二进制包的方式，另一种tarble（源码）的方式。源码安装软件的方式可以参考<a href=\"https://www.xiaotaotao.vip/2019/12/10/centOS%E5%AE%89%E8%A3%85php/#more\">centOS安装php</a>。这里安装mysql5.7主要就是使用RPM二进制包的方式。</p>","more":"\n<h1 id=\"下载RPM包\"><a href=\"#下载RPM包\" class=\"headerlink\" title=\"下载RPM包\"></a>下载RPM包</h1><p>推荐去mysql官网的<a href=\"https://dev.mysql.com/downloads/repo/yum/\" target=\"_blank\" rel=\"noopener\">yum库下载</a>与系统匹配的包，右键复制下载链接，然后去下载目录下载。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用wget下载</span></span><br><span class=\"line\">wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"yum本地安装（配置源）\"><a href=\"#yum本地安装（配置源）\" class=\"headerlink\" title=\"yum本地安装（配置源）\"></a>yum本地安装（配置源）</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#在下载目录执行`yum localinstall RPM包名`</span></span><br><span class=\"line\">yum localinstall  mysql80-community-release-el7-3.noarch.rpm</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"选择安装版本（可选）\"><a href=\"#选择安装版本（可选）\" class=\"headerlink\" title=\"选择安装版本（可选）\"></a>选择安装版本（可选）</h1><p>通过下载的RPM包名就可以看出，我们当前默认安装的话MySQL的版本就是8.0的，如果不需要更改安装版本，直接<code>yum install mysql-community-server</code>下载就可以了。而我们要安装5.7版本的，这时候就需要修改yum的配置文件，选择我们需要的版本。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#修改配置文件</span></span><br><span class=\"line\">vim /etc/yum.repos.d/mysql-community.repo </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#可以看到8.0版本中的enable选项值为1，如果需要改为5.7版本，</span></span><br><span class=\"line\"><span class=\"comment\">#需要将8.0版本中的enable选项值改为0,5.7版本的enable值改为1</span></span><br><span class=\"line\"></span><br><span class=\"line\">[mysql57-community]</span><br><span class=\"line\">name=MySQL 5.7 Community Server</span><br><span class=\"line\">baseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/7/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">enabled=0</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br><span class=\"line\"></span><br><span class=\"line\">[mysql80-community]</span><br><span class=\"line\">name=MySQL 8.0 Community Server</span><br><span class=\"line\">baseurl=http://repo.mysql.com/yum/mysql-8.0-community/el/7/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br></pre></td></tr></table></figure>\n\n<p>修改好了配置文件后，再使用<code>yum install mysql-community-server</code>安装MySQL就是5.7版本。</p>\n<h1 id=\"启动MySQL服务\"><a href=\"#启动MySQL服务\" class=\"headerlink\" title=\"启动MySQL服务\"></a>启动MySQL服务</h1><p>使用RPM包安装的MySQL已经默认配置了systemctl，直接使用systemctl启动就可以了。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#启动</span></span><br><span class=\"line\">systemctl start mysqld</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#关闭</span></span><br><span class=\"line\">systemctl stop mysqld</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：如果原来安装过其他版本的MySQL，这里启动的时候可能会报错，自行到<code>/var/log/mysqld.log</code>日志文件中查看，然后百度吧。</p>\n</blockquote>\n<h1 id=\"修改密码\"><a href=\"#修改密码\" class=\"headerlink\" title=\"修改密码\"></a>修改密码</h1><p>MySQL默认创建了root用户，密码是随机生成的，需要到日志文件中查看。进入数据库系统后，第一时间改掉root密码。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#获取root密码</span></span><br><span class=\"line\">cat /var/<span class=\"built_in\">log</span>/mysqld.log | grep <span class=\"string\">\"temporary password\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#登录</span></span><br><span class=\"line\">mysql -u root -p</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#修改密码</span></span><br><span class=\"line\">SET PASSWORD = PASSWORD(<span class=\"string\">'密码（有复杂度验证，简单密码会报错）'</span>);</span><br></pre></td></tr></table></figure>"},{"title":"laravel解析Excel文件","date":"2019-08-04T02:31:36.000Z","_content":"\n## 安装\n\n```bash\n#该插件已经更新到了3.1版本，目前我项目中使用的是2.1，这篇文章也是针对2.1版本的\ncomposer require maatwebsite/excel=2.1.*\n```\n<!-- more -->\n\n## 配置\n\n在laravel项目的`config/app.php`文件中，找到`providers`和`aliases`数组，分别在两个数组中添加下面的内容。\n\n```php\n'providers'=>[\n    ...\n\n    Maatwebsite\\Excel\\ExcelServiceProvider::class,\n],\n\n'aliases'=>[\n    ...\n\n    'Excel' => Maatwebsite\\Excel\\Facades\\Excel::class,\n]\n```\n\n配置好后，在项目的命令行中执行下列命令，可以在项目中生成`config/excel.php`文件，可以通过该文件对该插件进行配置。\n\n```bash\nphp artisan vendor:publish --provider=\"Maatwebsite\\Excel\\ExcelServiceProvider\"\n```\n\n## 解析Excel文件\n\n直接调用`load`方法，第一个参数是导入的文件名或文件地址。解析过后可以通过`toArray()`方法将解析后的结果转换为数组。\n\n```php\n$arr = [];\n\\Excel::load('企业导入模板.xlsx', function($reader) {\n            $arr = $reader->get()->toArray();\n        });\n```\n\n## 注意\n如果出现因为中文表头导致解析数据不完整的时候，请在`config/excel.php`文件中对`to_ascii`进行修改。\n\n```php\n'to_ascii'=>false,\n```\n\n如需其他配置问题，请参考[官方文档](https://laravel-excel.com/ \"官方文档\")","source":"_posts/laravel解析Excel文件.md","raw":"---\ntitle: laravel解析Excel文件\ndate: 2019-08-04 10:31:36\ncategories: PHP\n---\n\n## 安装\n\n```bash\n#该插件已经更新到了3.1版本，目前我项目中使用的是2.1，这篇文章也是针对2.1版本的\ncomposer require maatwebsite/excel=2.1.*\n```\n<!-- more -->\n\n## 配置\n\n在laravel项目的`config/app.php`文件中，找到`providers`和`aliases`数组，分别在两个数组中添加下面的内容。\n\n```php\n'providers'=>[\n    ...\n\n    Maatwebsite\\Excel\\ExcelServiceProvider::class,\n],\n\n'aliases'=>[\n    ...\n\n    'Excel' => Maatwebsite\\Excel\\Facades\\Excel::class,\n]\n```\n\n配置好后，在项目的命令行中执行下列命令，可以在项目中生成`config/excel.php`文件，可以通过该文件对该插件进行配置。\n\n```bash\nphp artisan vendor:publish --provider=\"Maatwebsite\\Excel\\ExcelServiceProvider\"\n```\n\n## 解析Excel文件\n\n直接调用`load`方法，第一个参数是导入的文件名或文件地址。解析过后可以通过`toArray()`方法将解析后的结果转换为数组。\n\n```php\n$arr = [];\n\\Excel::load('企业导入模板.xlsx', function($reader) {\n            $arr = $reader->get()->toArray();\n        });\n```\n\n## 注意\n如果出现因为中文表头导致解析数据不完整的时候，请在`config/excel.php`文件中对`to_ascii`进行修改。\n\n```php\n'to_ascii'=>false,\n```\n\n如需其他配置问题，请参考[官方文档](https://laravel-excel.com/ \"官方文档\")","slug":"laravel解析Excel文件","published":1,"updated":"2019-12-16T09:52:03.805Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28ae0004fiyhvwfowatx","content":"<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#该插件已经更新到了3.1版本，目前我项目中使用的是2.1，这篇文章也是针对2.1版本的</span></span><br><span class=\"line\">composer require maatwebsite/excel=2.1.*</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><p>在laravel项目的<code>config/app.php</code>文件中，找到<code>providers</code>和<code>aliases</code>数组，分别在两个数组中添加下面的内容。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'providers'</span>=&gt;[</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    Maatwebsite\\Excel\\ExcelServiceProvider::class,</span><br><span class=\"line\">],</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">'aliases'</span>=&gt;[</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">'Excel'</span> =&gt; Maatwebsite\\Excel\\Facades\\Excel::class,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n\n<p>配置好后，在项目的命令行中执行下列命令，可以在项目中生成<code>config/excel.php</code>文件，可以通过该文件对该插件进行配置。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php artisan vendor:publish --provider=<span class=\"string\">\"Maatwebsite\\Excel\\ExcelServiceProvider\"</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"解析Excel文件\"><a href=\"#解析Excel文件\" class=\"headerlink\" title=\"解析Excel文件\"></a>解析Excel文件</h2><p>直接调用<code>load</code>方法，第一个参数是导入的文件名或文件地址。解析过后可以通过<code>toArray()</code>方法将解析后的结果转换为数组。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$arr = [];</span><br><span class=\"line\">\\Excel::load(<span class=\"string\">'企业导入模板.xlsx'</span>, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">($reader)</span> </span>&#123;</span><br><span class=\"line\">            $arr = $reader-&gt;get()-&gt;toArray();</span><br><span class=\"line\">        &#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h2><p>如果出现因为中文表头导致解析数据不完整的时候，请在<code>config/excel.php</code>文件中对<code>to_ascii</code>进行修改。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'to_ascii'</span>=&gt;<span class=\"keyword\">false</span>,</span><br></pre></td></tr></table></figure>\n\n<p>如需其他配置问题，请参考<a href=\"https://laravel-excel.com/\" title=\"官方文档\" target=\"_blank\" rel=\"noopener\">官方文档</a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#该插件已经更新到了3.1版本，目前我项目中使用的是2.1，这篇文章也是针对2.1版本的</span></span><br><span class=\"line\">composer require maatwebsite/excel=2.1.*</span><br></pre></td></tr></table></figure>","more":"<h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><p>在laravel项目的<code>config/app.php</code>文件中，找到<code>providers</code>和<code>aliases</code>数组，分别在两个数组中添加下面的内容。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'providers'</span>=&gt;[</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    Maatwebsite\\Excel\\ExcelServiceProvider::class,</span><br><span class=\"line\">],</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">'aliases'</span>=&gt;[</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">'Excel'</span> =&gt; Maatwebsite\\Excel\\Facades\\Excel::class,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n\n<p>配置好后，在项目的命令行中执行下列命令，可以在项目中生成<code>config/excel.php</code>文件，可以通过该文件对该插件进行配置。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php artisan vendor:publish --provider=<span class=\"string\">\"Maatwebsite\\Excel\\ExcelServiceProvider\"</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"解析Excel文件\"><a href=\"#解析Excel文件\" class=\"headerlink\" title=\"解析Excel文件\"></a>解析Excel文件</h2><p>直接调用<code>load</code>方法，第一个参数是导入的文件名或文件地址。解析过后可以通过<code>toArray()</code>方法将解析后的结果转换为数组。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$arr = [];</span><br><span class=\"line\">\\Excel::load(<span class=\"string\">'企业导入模板.xlsx'</span>, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">($reader)</span> </span>&#123;</span><br><span class=\"line\">            $arr = $reader-&gt;get()-&gt;toArray();</span><br><span class=\"line\">        &#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h2><p>如果出现因为中文表头导致解析数据不完整的时候，请在<code>config/excel.php</code>文件中对<code>to_ascii</code>进行修改。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'to_ascii'</span>=&gt;<span class=\"keyword\">false</span>,</span><br></pre></td></tr></table></figure>\n\n<p>如需其他配置问题，请参考<a href=\"https://laravel-excel.com/\" title=\"官方文档\" target=\"_blank\" rel=\"noopener\">官方文档</a></p>"},{"title":"centOS7安装php","date":"2019-12-10T08:17:09.000Z","_content":"\n# 下载\n\n>这里使用源码安装的方式，最好是直接去[官网](https://www.php.net/downloads.php)下载压缩包。选择合适的版本，右键复制链接地址。\n\n```bash\n#源码下载文件夹\ncd /usr/local/src/\n\n#使用wget下载（刚才复制的链接）\nwget https://www.php.net/distributions/php-7.4.0.tar.xz\n\n#解压\ntar -Jxvf php-7.4.0.tar.xz\n\ncd php-7.4.0\n```\n\n# 编译配置\n\n>进入解压的文件夹（php-7.4.0）后需要检查编译环境，然后生成`Makefile`文件。在检查编译环境过程中可能会出现错误，主要是要保证检查后没有`error`，如果检查后有错误，则不能生成`Makefile`文件。\n\n>`./configure`的`--prefix=/usr/local/php7.3 `是确定安装文件夹，`--with-config-file-path=/usr/local/php7.3/etc`是确定php运行配置文件的文件夹，这两个参数最好都使用，如果没有指定文件夹，最终会按照默认的方式安装，对整体的管理比较麻烦。\n\n>`./configure`的参数详解自行百度了解。\n\n```bash\n#配置编译参数，检查编译环境是否符合\n./configure --prefix=/usr/local/php7.3 --with-config-file-path=/usr/local/php7.3/lib --with-curl --with-freetype-dir --with-gd --with-gettext --with-iconv-dir --with-kerberos --with-libdir=lib64 --with-libxml-dir --with-openssl --with-pcre-regex --with-pdo-mysql --with-pdo-sqlite --with-pear --with-png-dir --with-xmlrpc --with-xsl --with-zlib --with-mhash --with-jpeg-dir --enable-fpm --enable-bcmath --enable-libxml --enable-inline-optimization --enable-mbregex --enable-mbstring --enable-opcache --enable-pcntl --enable-shmop --enable-soap --enable-sockets --enable-sysvsem --enable-xml --enable-zip --enable-ftp --enable-intl --enable-mysqlnd --disable-rpath --disable-fileinfo\n```\n\n一般执行上面代码后都会出现找不到某个包的错误，因为配置参数中设置了php支持的功能需要下载包。主要是有以下几个问题，如果出现了其他问题处理方式类似。总之就是要保证执行完上述命令后不能有错误。\n\n```bash\n#1、\n#报错找不到某个包(会出现多次这种类型的错误，解决方法都一样)\n#configure: error: libxml2 not found. Please check your libxml2 installation.\n\nyum install libxml2-devel\n\n\n\n\n#2、\n#有的包版本过低，不能通过yum下载了，需要用源码安装\n#checking for libzip... configure: error: system libzip must be upgraded to version >= 0.11\n\nyum remove libzip #删除旧版本\n\ncd /usr/local/src #返回到源码下载目录\n\nwget https://libzip.org/download/libzip-1.5.2.tar.xz #下载新版本\n\ntar -Jxvf libzip-1.5.2 #解压\n\ncd libzip-1.5.2\n\n./configure #检查编译环境（举例的这个包比较特殊，不能用`./configure`命令，具体安装方式查看INSTALL.md文件）\n\nmake #编译\n\nmake install #安装到指定文件夹\n\ncd /usr/local/src/php-7.4.0 #返回php文件夹继续执行`./configure ....`检查执行环境\n\n\n\n#3、\n#off_t undefind报错\n#configure: error: off_t undefined; check your library configuration\n\n# 添加搜索路径到配置文件\necho '/usr/local/lib64\n/usr/local/lib\n/usr/lib\n/usr/lib64'>>/etc/ld.so.conf\n\nldconfig -v #更新配置\n\n```\n\n# 编译\n\n>在确定检查编译没问题，并且生成了`Makefile`文件，这时候就可以进行编译了。\n\n```bash\n#编译\nmake\n\n#安装到指定文件(具体安装到哪里根据`./configure`的参数确定)\nmake install\n\n```\n\n# 配置\n\n>这里只针对`./configure`设置了`--prefix`和`--with-config-file-path`参数的情况进行说明。\n\n```bash\n# 进入php安装文件夹\ncd /usr/local/php7.3\n\n# 进入配置文件夹\ncd /etc\n\n# 使用默认配置（具体配置百度）\ncp php-fpm.conf.default php-fpm.conf\n\ncd php-fpm.d\n\ncp www.conf.default www.conf\n\n```\n\n>环境变量设置（可选）\n\n```bash\n# 对profile文件进行编辑\nvim /etc/profile\n\n# 在profile文件的最后加上\nexprot PATH=$PATH=:/usr/local/php7.3/bin:/usr/local/php7.3/sbin\n\n# 重新读取文件\nsource /etc/profile\n```\n\n\n# 启动\n\n```bash\n# 如果配置了环境变量\nphp-fpm\n\n# 如果没有配置环境变量\n/usr/local/php7.3/sbin/php-fpm\n\n# 查看是否启动成功\nps aux | grep php-fpm\n```","source":"_posts/centOS安装php.md","raw":"---\ntitle: centOS7安装php\ndate: 2019-12-10 16:17:09\ncategories: 服务器配置问题\n---\n\n# 下载\n\n>这里使用源码安装的方式，最好是直接去[官网](https://www.php.net/downloads.php)下载压缩包。选择合适的版本，右键复制链接地址。\n\n```bash\n#源码下载文件夹\ncd /usr/local/src/\n\n#使用wget下载（刚才复制的链接）\nwget https://www.php.net/distributions/php-7.4.0.tar.xz\n\n#解压\ntar -Jxvf php-7.4.0.tar.xz\n\ncd php-7.4.0\n```\n\n# 编译配置\n\n>进入解压的文件夹（php-7.4.0）后需要检查编译环境，然后生成`Makefile`文件。在检查编译环境过程中可能会出现错误，主要是要保证检查后没有`error`，如果检查后有错误，则不能生成`Makefile`文件。\n\n>`./configure`的`--prefix=/usr/local/php7.3 `是确定安装文件夹，`--with-config-file-path=/usr/local/php7.3/etc`是确定php运行配置文件的文件夹，这两个参数最好都使用，如果没有指定文件夹，最终会按照默认的方式安装，对整体的管理比较麻烦。\n\n>`./configure`的参数详解自行百度了解。\n\n```bash\n#配置编译参数，检查编译环境是否符合\n./configure --prefix=/usr/local/php7.3 --with-config-file-path=/usr/local/php7.3/lib --with-curl --with-freetype-dir --with-gd --with-gettext --with-iconv-dir --with-kerberos --with-libdir=lib64 --with-libxml-dir --with-openssl --with-pcre-regex --with-pdo-mysql --with-pdo-sqlite --with-pear --with-png-dir --with-xmlrpc --with-xsl --with-zlib --with-mhash --with-jpeg-dir --enable-fpm --enable-bcmath --enable-libxml --enable-inline-optimization --enable-mbregex --enable-mbstring --enable-opcache --enable-pcntl --enable-shmop --enable-soap --enable-sockets --enable-sysvsem --enable-xml --enable-zip --enable-ftp --enable-intl --enable-mysqlnd --disable-rpath --disable-fileinfo\n```\n\n一般执行上面代码后都会出现找不到某个包的错误，因为配置参数中设置了php支持的功能需要下载包。主要是有以下几个问题，如果出现了其他问题处理方式类似。总之就是要保证执行完上述命令后不能有错误。\n\n```bash\n#1、\n#报错找不到某个包(会出现多次这种类型的错误，解决方法都一样)\n#configure: error: libxml2 not found. Please check your libxml2 installation.\n\nyum install libxml2-devel\n\n\n\n\n#2、\n#有的包版本过低，不能通过yum下载了，需要用源码安装\n#checking for libzip... configure: error: system libzip must be upgraded to version >= 0.11\n\nyum remove libzip #删除旧版本\n\ncd /usr/local/src #返回到源码下载目录\n\nwget https://libzip.org/download/libzip-1.5.2.tar.xz #下载新版本\n\ntar -Jxvf libzip-1.5.2 #解压\n\ncd libzip-1.5.2\n\n./configure #检查编译环境（举例的这个包比较特殊，不能用`./configure`命令，具体安装方式查看INSTALL.md文件）\n\nmake #编译\n\nmake install #安装到指定文件夹\n\ncd /usr/local/src/php-7.4.0 #返回php文件夹继续执行`./configure ....`检查执行环境\n\n\n\n#3、\n#off_t undefind报错\n#configure: error: off_t undefined; check your library configuration\n\n# 添加搜索路径到配置文件\necho '/usr/local/lib64\n/usr/local/lib\n/usr/lib\n/usr/lib64'>>/etc/ld.so.conf\n\nldconfig -v #更新配置\n\n```\n\n# 编译\n\n>在确定检查编译没问题，并且生成了`Makefile`文件，这时候就可以进行编译了。\n\n```bash\n#编译\nmake\n\n#安装到指定文件(具体安装到哪里根据`./configure`的参数确定)\nmake install\n\n```\n\n# 配置\n\n>这里只针对`./configure`设置了`--prefix`和`--with-config-file-path`参数的情况进行说明。\n\n```bash\n# 进入php安装文件夹\ncd /usr/local/php7.3\n\n# 进入配置文件夹\ncd /etc\n\n# 使用默认配置（具体配置百度）\ncp php-fpm.conf.default php-fpm.conf\n\ncd php-fpm.d\n\ncp www.conf.default www.conf\n\n```\n\n>环境变量设置（可选）\n\n```bash\n# 对profile文件进行编辑\nvim /etc/profile\n\n# 在profile文件的最后加上\nexprot PATH=$PATH=:/usr/local/php7.3/bin:/usr/local/php7.3/sbin\n\n# 重新读取文件\nsource /etc/profile\n```\n\n\n# 启动\n\n```bash\n# 如果配置了环境变量\nphp-fpm\n\n# 如果没有配置环境变量\n/usr/local/php7.3/sbin/php-fpm\n\n# 查看是否启动成功\nps aux | grep php-fpm\n```","slug":"centOS安装php","published":1,"updated":"2019-12-16T09:20:57.391Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28ag0005fiyhqi6axs5h","content":"<h1 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h1><blockquote>\n<p>这里使用源码安装的方式，最好是直接去<a href=\"https://www.php.net/downloads.php\" target=\"_blank\" rel=\"noopener\">官网</a>下载压缩包。选择合适的版本，右键复制链接地址。</p>\n</blockquote><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#源码下载文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用wget下载（刚才复制的链接）</span></span><br><span class=\"line\">wget https://www.php.net/distributions/php-7.4.0.tar.xz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#解压</span></span><br><span class=\"line\">tar -Jxvf php-7.4.0.tar.xz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> php-7.4.0</span><br></pre></td></tr></table></figure><a id=\"more\"></a>\n\n\n<h1 id=\"编译配置\"><a href=\"#编译配置\" class=\"headerlink\" title=\"编译配置\"></a>编译配置</h1><blockquote>\n<p>进入解压的文件夹（php-7.4.0）后需要检查编译环境，然后生成<code>Makefile</code>文件。在检查编译环境过程中可能会出现错误，主要是要保证检查后没有<code>error</code>，如果检查后有错误，则不能生成<code>Makefile</code>文件。</p>\n</blockquote>\n<blockquote>\n<p><code>./configure</code>的<code>--prefix=/usr/local/php7.3</code>是确定安装文件夹，<code>--with-config-file-path=/usr/local/php7.3/etc</code>是确定php运行配置文件的文件夹，这两个参数最好都使用，如果没有指定文件夹，最终会按照默认的方式安装，对整体的管理比较麻烦。</p>\n</blockquote>\n<blockquote>\n<p><code>./configure</code>的参数详解自行百度了解。</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#配置编译参数，检查编译环境是否符合</span></span><br><span class=\"line\">./configure --prefix=/usr/<span class=\"built_in\">local</span>/php7.3 --with-config-file-path=/usr/<span class=\"built_in\">local</span>/php7.3/lib --with-curl --with-freetype-dir --with-gd --with-gettext --with-iconv-dir --with-kerberos --with-libdir=lib64 --with-libxml-dir --with-openssl --with-pcre-regex --with-pdo-mysql --with-pdo-sqlite --with-pear --with-png-dir --with-xmlrpc --with-xsl --with-zlib --with-mhash --with-jpeg-dir --<span class=\"built_in\">enable</span>-fpm --<span class=\"built_in\">enable</span>-bcmath --<span class=\"built_in\">enable</span>-libxml --<span class=\"built_in\">enable</span>-inline-optimization --<span class=\"built_in\">enable</span>-mbregex --<span class=\"built_in\">enable</span>-mbstring --<span class=\"built_in\">enable</span>-opcache --<span class=\"built_in\">enable</span>-pcntl --<span class=\"built_in\">enable</span>-shmop --<span class=\"built_in\">enable</span>-soap --<span class=\"built_in\">enable</span>-sockets --<span class=\"built_in\">enable</span>-sysvsem --<span class=\"built_in\">enable</span>-xml --<span class=\"built_in\">enable</span>-zip --<span class=\"built_in\">enable</span>-ftp --<span class=\"built_in\">enable</span>-intl --<span class=\"built_in\">enable</span>-mysqlnd --<span class=\"built_in\">disable</span>-rpath --<span class=\"built_in\">disable</span>-fileinfo</span><br></pre></td></tr></table></figure>\n\n<p>一般执行上面代码后都会出现找不到某个包的错误，因为配置参数中设置了php支持的功能需要下载包。主要是有以下几个问题，如果出现了其他问题处理方式类似。总之就是要保证执行完上述命令后不能有错误。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1、</span></span><br><span class=\"line\"><span class=\"comment\">#报错找不到某个包(会出现多次这种类型的错误，解决方法都一样)</span></span><br><span class=\"line\"><span class=\"comment\">#configure: error: libxml2 not found. Please check your libxml2 installation.</span></span><br><span class=\"line\"></span><br><span class=\"line\">yum install libxml2-devel</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#2、</span></span><br><span class=\"line\"><span class=\"comment\">#有的包版本过低，不能通过yum下载了，需要用源码安装</span></span><br><span class=\"line\"><span class=\"comment\">#checking for libzip... configure: error: system libzip must be upgraded to version &gt;= 0.11</span></span><br><span class=\"line\"></span><br><span class=\"line\">yum remove libzip <span class=\"comment\">#删除旧版本</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src <span class=\"comment\">#返回到源码下载目录</span></span><br><span class=\"line\"></span><br><span class=\"line\">wget https://libzip.org/download/libzip-1.5.2.tar.xz <span class=\"comment\">#下载新版本</span></span><br><span class=\"line\"></span><br><span class=\"line\">tar -Jxvf libzip-1.5.2 <span class=\"comment\">#解压</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> libzip-1.5.2</span><br><span class=\"line\"></span><br><span class=\"line\">./configure <span class=\"comment\">#检查编译环境（举例的这个包比较特殊，不能用`./configure`命令，具体安装方式查看INSTALL.md文件）</span></span><br><span class=\"line\"></span><br><span class=\"line\">make <span class=\"comment\">#编译</span></span><br><span class=\"line\"></span><br><span class=\"line\">make install <span class=\"comment\">#安装到指定文件夹</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src/php-7.4.0 <span class=\"comment\">#返回php文件夹继续执行`./configure ....`检查执行环境</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#3、</span></span><br><span class=\"line\"><span class=\"comment\">#off_t undefind报错</span></span><br><span class=\"line\"><span class=\"comment\">#configure: error: off_t undefined; check your library configuration</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加搜索路径到配置文件</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'/usr/local/lib64</span></span><br><span class=\"line\"><span class=\"string\">/usr/local/lib</span></span><br><span class=\"line\"><span class=\"string\">/usr/lib</span></span><br><span class=\"line\"><span class=\"string\">/usr/lib64'</span>&gt;&gt;/etc/ld.so.conf</span><br><span class=\"line\"></span><br><span class=\"line\">ldconfig -v <span class=\"comment\">#更新配置</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h1><blockquote>\n<p>在确定检查编译没问题，并且生成了<code>Makefile</code>文件，这时候就可以进行编译了。</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#编译</span></span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#安装到指定文件(具体安装到哪里根据`./configure`的参数确定)</span></span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><blockquote>\n<p>这里只针对<code>./configure</code>设置了<code>--prefix</code>和<code>--with-config-file-path</code>参数的情况进行说明。</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 进入php安装文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/php7.3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 进入配置文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /etc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 使用默认配置（具体配置百度）</span></span><br><span class=\"line\">cp php-fpm.conf.default php-fpm.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> php-fpm.d</span><br><span class=\"line\"></span><br><span class=\"line\">cp www.conf.default www.conf</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>环境变量设置（可选）</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 对profile文件进行编辑</span></span><br><span class=\"line\">vim /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在profile文件的最后加上</span></span><br><span class=\"line\">exprot PATH=<span class=\"variable\">$PATH</span>=:/usr/<span class=\"built_in\">local</span>/php7.3/bin:/usr/<span class=\"built_in\">local</span>/php7.3/sbin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 重新读取文件</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> /etc/profile</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 如果配置了环境变量</span></span><br><span class=\"line\">php-fpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果没有配置环境变量</span></span><br><span class=\"line\">/usr/<span class=\"built_in\">local</span>/php7.3/sbin/php-fpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看是否启动成功</span></span><br><span class=\"line\">ps aux | grep php-fpm</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<h1 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h1><blockquote>\n<p>这里使用源码安装的方式，最好是直接去<a href=\"https://www.php.net/downloads.php\" target=\"_blank\" rel=\"noopener\">官网</a>下载压缩包。选择合适的版本，右键复制链接地址。</p>\n</blockquote><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#源码下载文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用wget下载（刚才复制的链接）</span></span><br><span class=\"line\">wget https://www.php.net/distributions/php-7.4.0.tar.xz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#解压</span></span><br><span class=\"line\">tar -Jxvf php-7.4.0.tar.xz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> php-7.4.0</span><br></pre></td></tr></table></figure>","more":"\n\n\n<h1 id=\"编译配置\"><a href=\"#编译配置\" class=\"headerlink\" title=\"编译配置\"></a>编译配置</h1><blockquote>\n<p>进入解压的文件夹（php-7.4.0）后需要检查编译环境，然后生成<code>Makefile</code>文件。在检查编译环境过程中可能会出现错误，主要是要保证检查后没有<code>error</code>，如果检查后有错误，则不能生成<code>Makefile</code>文件。</p>\n</blockquote>\n<blockquote>\n<p><code>./configure</code>的<code>--prefix=/usr/local/php7.3</code>是确定安装文件夹，<code>--with-config-file-path=/usr/local/php7.3/etc</code>是确定php运行配置文件的文件夹，这两个参数最好都使用，如果没有指定文件夹，最终会按照默认的方式安装，对整体的管理比较麻烦。</p>\n</blockquote>\n<blockquote>\n<p><code>./configure</code>的参数详解自行百度了解。</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#配置编译参数，检查编译环境是否符合</span></span><br><span class=\"line\">./configure --prefix=/usr/<span class=\"built_in\">local</span>/php7.3 --with-config-file-path=/usr/<span class=\"built_in\">local</span>/php7.3/lib --with-curl --with-freetype-dir --with-gd --with-gettext --with-iconv-dir --with-kerberos --with-libdir=lib64 --with-libxml-dir --with-openssl --with-pcre-regex --with-pdo-mysql --with-pdo-sqlite --with-pear --with-png-dir --with-xmlrpc --with-xsl --with-zlib --with-mhash --with-jpeg-dir --<span class=\"built_in\">enable</span>-fpm --<span class=\"built_in\">enable</span>-bcmath --<span class=\"built_in\">enable</span>-libxml --<span class=\"built_in\">enable</span>-inline-optimization --<span class=\"built_in\">enable</span>-mbregex --<span class=\"built_in\">enable</span>-mbstring --<span class=\"built_in\">enable</span>-opcache --<span class=\"built_in\">enable</span>-pcntl --<span class=\"built_in\">enable</span>-shmop --<span class=\"built_in\">enable</span>-soap --<span class=\"built_in\">enable</span>-sockets --<span class=\"built_in\">enable</span>-sysvsem --<span class=\"built_in\">enable</span>-xml --<span class=\"built_in\">enable</span>-zip --<span class=\"built_in\">enable</span>-ftp --<span class=\"built_in\">enable</span>-intl --<span class=\"built_in\">enable</span>-mysqlnd --<span class=\"built_in\">disable</span>-rpath --<span class=\"built_in\">disable</span>-fileinfo</span><br></pre></td></tr></table></figure>\n\n<p>一般执行上面代码后都会出现找不到某个包的错误，因为配置参数中设置了php支持的功能需要下载包。主要是有以下几个问题，如果出现了其他问题处理方式类似。总之就是要保证执行完上述命令后不能有错误。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1、</span></span><br><span class=\"line\"><span class=\"comment\">#报错找不到某个包(会出现多次这种类型的错误，解决方法都一样)</span></span><br><span class=\"line\"><span class=\"comment\">#configure: error: libxml2 not found. Please check your libxml2 installation.</span></span><br><span class=\"line\"></span><br><span class=\"line\">yum install libxml2-devel</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#2、</span></span><br><span class=\"line\"><span class=\"comment\">#有的包版本过低，不能通过yum下载了，需要用源码安装</span></span><br><span class=\"line\"><span class=\"comment\">#checking for libzip... configure: error: system libzip must be upgraded to version &gt;= 0.11</span></span><br><span class=\"line\"></span><br><span class=\"line\">yum remove libzip <span class=\"comment\">#删除旧版本</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src <span class=\"comment\">#返回到源码下载目录</span></span><br><span class=\"line\"></span><br><span class=\"line\">wget https://libzip.org/download/libzip-1.5.2.tar.xz <span class=\"comment\">#下载新版本</span></span><br><span class=\"line\"></span><br><span class=\"line\">tar -Jxvf libzip-1.5.2 <span class=\"comment\">#解压</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> libzip-1.5.2</span><br><span class=\"line\"></span><br><span class=\"line\">./configure <span class=\"comment\">#检查编译环境（举例的这个包比较特殊，不能用`./configure`命令，具体安装方式查看INSTALL.md文件）</span></span><br><span class=\"line\"></span><br><span class=\"line\">make <span class=\"comment\">#编译</span></span><br><span class=\"line\"></span><br><span class=\"line\">make install <span class=\"comment\">#安装到指定文件夹</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src/php-7.4.0 <span class=\"comment\">#返回php文件夹继续执行`./configure ....`检查执行环境</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#3、</span></span><br><span class=\"line\"><span class=\"comment\">#off_t undefind报错</span></span><br><span class=\"line\"><span class=\"comment\">#configure: error: off_t undefined; check your library configuration</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加搜索路径到配置文件</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'/usr/local/lib64</span></span><br><span class=\"line\"><span class=\"string\">/usr/local/lib</span></span><br><span class=\"line\"><span class=\"string\">/usr/lib</span></span><br><span class=\"line\"><span class=\"string\">/usr/lib64'</span>&gt;&gt;/etc/ld.so.conf</span><br><span class=\"line\"></span><br><span class=\"line\">ldconfig -v <span class=\"comment\">#更新配置</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h1><blockquote>\n<p>在确定检查编译没问题，并且生成了<code>Makefile</code>文件，这时候就可以进行编译了。</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#编译</span></span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#安装到指定文件(具体安装到哪里根据`./configure`的参数确定)</span></span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><blockquote>\n<p>这里只针对<code>./configure</code>设置了<code>--prefix</code>和<code>--with-config-file-path</code>参数的情况进行说明。</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 进入php安装文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/php7.3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 进入配置文件夹</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /etc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 使用默认配置（具体配置百度）</span></span><br><span class=\"line\">cp php-fpm.conf.default php-fpm.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> php-fpm.d</span><br><span class=\"line\"></span><br><span class=\"line\">cp www.conf.default www.conf</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>环境变量设置（可选）</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 对profile文件进行编辑</span></span><br><span class=\"line\">vim /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在profile文件的最后加上</span></span><br><span class=\"line\">exprot PATH=<span class=\"variable\">$PATH</span>=:/usr/<span class=\"built_in\">local</span>/php7.3/bin:/usr/<span class=\"built_in\">local</span>/php7.3/sbin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 重新读取文件</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> /etc/profile</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 如果配置了环境变量</span></span><br><span class=\"line\">php-fpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果没有配置环境变量</span></span><br><span class=\"line\">/usr/<span class=\"built_in\">local</span>/php7.3/sbin/php-fpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看是否启动成功</span></span><br><span class=\"line\">ps aux | grep php-fpm</span><br></pre></td></tr></table></figure>"},{"title":"php安装拓展","date":"2019-12-16T09:23:55.000Z","_content":"\n# 安装方式\n\nPHP拓展的安装方式主要有两种，一种是直接使用PECL拓展管理工具安装，另一种是使用源码安装。因为PECL存在一些问题，所以一般比较推荐使用源码安装的方式。这里也是使用源码安装PHP拓展的完整记录。\n\n# 下载解压\n\n1. 打开[PECL](https://pecl.php.net/)网址，直接搜索你需要下载的拓展包。\n\n2. 选择状态为stable的最新版，然后右键复制后面压缩包的下载链接。\n\n3. 下载\n```bash\ncd /usr/local/src\n\nwget 下载链接\n\n#解压\ntar -zxvf 压缩包名称\n```\n\n# 安装\n\n```bash\ncd 解压后的文件夹\n\n#挂载到php，成功后会生成configure文件\nphpize\n\n#检查编译环境，配置编译参数\n./configure\n\n#编译\nmake\n\n#安装到预定文件\nmake install\n```\n\n# 配置\n\n找到php的配置文件（一般我都会安装在`/usr/local/php7.3/lib`这个文件夹下面）\n\n进入`php.ini`文件，添加`extension=拓展名`选项。\n\n重启php（记得带上配置文件`php-fpm -c /usr/local/php7.3/lib/php.ini`）。\n\n```bash\n#查看拓展是否已经安装成功\nphp -m\n```\n\n# 注意\n\n如果`php -m`查看没有发现新安装的拓展，一般是下面几种情况：\n\n1. 重启php的时候没有指定配置文件；\n2. 重启php的时候警告没有找到拓展，一般是因为你拓展的安装位置有问题。可以修改php.ini文件的`extension_dir`选项指定拓展安装的位置；\n\n\n\n","source":"_posts/php安装拓展.md","raw":"---\ntitle: php安装拓展\ndate: 2019-12-16 17:23:55\ncategories: PHP\n---\n\n# 安装方式\n\nPHP拓展的安装方式主要有两种，一种是直接使用PECL拓展管理工具安装，另一种是使用源码安装。因为PECL存在一些问题，所以一般比较推荐使用源码安装的方式。这里也是使用源码安装PHP拓展的完整记录。\n\n# 下载解压\n\n1. 打开[PECL](https://pecl.php.net/)网址，直接搜索你需要下载的拓展包。\n\n2. 选择状态为stable的最新版，然后右键复制后面压缩包的下载链接。\n\n3. 下载\n```bash\ncd /usr/local/src\n\nwget 下载链接\n\n#解压\ntar -zxvf 压缩包名称\n```\n\n# 安装\n\n```bash\ncd 解压后的文件夹\n\n#挂载到php，成功后会生成configure文件\nphpize\n\n#检查编译环境，配置编译参数\n./configure\n\n#编译\nmake\n\n#安装到预定文件\nmake install\n```\n\n# 配置\n\n找到php的配置文件（一般我都会安装在`/usr/local/php7.3/lib`这个文件夹下面）\n\n进入`php.ini`文件，添加`extension=拓展名`选项。\n\n重启php（记得带上配置文件`php-fpm -c /usr/local/php7.3/lib/php.ini`）。\n\n```bash\n#查看拓展是否已经安装成功\nphp -m\n```\n\n# 注意\n\n如果`php -m`查看没有发现新安装的拓展，一般是下面几种情况：\n\n1. 重启php的时候没有指定配置文件；\n2. 重启php的时候警告没有找到拓展，一般是因为你拓展的安装位置有问题。可以修改php.ini文件的`extension_dir`选项指定拓展安装的位置；\n\n\n\n","slug":"php安装拓展","published":1,"updated":"2019-12-16T09:50:40.509Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28ah0006fiyhs2uzfx9a","content":"<h1 id=\"安装方式\"><a href=\"#安装方式\" class=\"headerlink\" title=\"安装方式\"></a>安装方式</h1><p>PHP拓展的安装方式主要有两种，一种是直接使用PECL拓展管理工具安装，另一种是使用源码安装。因为PECL存在一些问题，所以一般比较推荐使用源码安装的方式。这里也是使用源码安装PHP拓展的完整记录。</p><a id=\"more\"></a>\n<h1 id=\"下载解压\"><a href=\"#下载解压\" class=\"headerlink\" title=\"下载解压\"></a>下载解压</h1><ol>\n<li><p>打开<a href=\"https://pecl.php.net/\" target=\"_blank\" rel=\"noopener\">PECL</a>网址，直接搜索你需要下载的拓展包。</p>\n</li>\n<li><p>选择状态为stable的最新版，然后右键复制后面压缩包的下载链接。</p>\n</li>\n<li><p>下载</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src</span><br><span class=\"line\"></span><br><span class=\"line\">wget 下载链接</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#解压</span></span><br><span class=\"line\">tar -zxvf 压缩包名称</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> 解压后的文件夹</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#挂载到php，成功后会生成configure文件</span></span><br><span class=\"line\">phpize</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#检查编译环境，配置编译参数</span></span><br><span class=\"line\">./configure</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#编译</span></span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#安装到预定文件</span></span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><p>找到php的配置文件（一般我都会安装在<code>/usr/local/php7.3/lib</code>这个文件夹下面）</p>\n<p>进入<code>php.ini</code>文件，添加<code>extension=拓展名</code>选项。</p>\n<p>重启php（记得带上配置文件<code>php-fpm -c /usr/local/php7.3/lib/php.ini</code>）。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#查看拓展是否已经安装成功</span></span><br><span class=\"line\">php -m</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h1><p>如果<code>php -m</code>查看没有发现新安装的拓展，一般是下面几种情况：</p>\n<ol>\n<li>重启php的时候没有指定配置文件；</li>\n<li>重启php的时候警告没有找到拓展，一般是因为你拓展的安装位置有问题。可以修改php.ini文件的<code>extension_dir</code>选项指定拓展安装的位置；</li>\n</ol>\n","site":{"data":{}},"excerpt":"<h1 id=\"安装方式\"><a href=\"#安装方式\" class=\"headerlink\" title=\"安装方式\"></a>安装方式</h1><p>PHP拓展的安装方式主要有两种，一种是直接使用PECL拓展管理工具安装，另一种是使用源码安装。因为PECL存在一些问题，所以一般比较推荐使用源码安装的方式。这里也是使用源码安装PHP拓展的完整记录。</p>","more":"\n<h1 id=\"下载解压\"><a href=\"#下载解压\" class=\"headerlink\" title=\"下载解压\"></a>下载解压</h1><ol>\n<li><p>打开<a href=\"https://pecl.php.net/\" target=\"_blank\" rel=\"noopener\">PECL</a>网址，直接搜索你需要下载的拓展包。</p>\n</li>\n<li><p>选择状态为stable的最新版，然后右键复制后面压缩包的下载链接。</p>\n</li>\n<li><p>下载</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src</span><br><span class=\"line\"></span><br><span class=\"line\">wget 下载链接</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#解压</span></span><br><span class=\"line\">tar -zxvf 压缩包名称</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> 解压后的文件夹</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#挂载到php，成功后会生成configure文件</span></span><br><span class=\"line\">phpize</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#检查编译环境，配置编译参数</span></span><br><span class=\"line\">./configure</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#编译</span></span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#安装到预定文件</span></span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><p>找到php的配置文件（一般我都会安装在<code>/usr/local/php7.3/lib</code>这个文件夹下面）</p>\n<p>进入<code>php.ini</code>文件，添加<code>extension=拓展名</code>选项。</p>\n<p>重启php（记得带上配置文件<code>php-fpm -c /usr/local/php7.3/lib/php.ini</code>）。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#查看拓展是否已经安装成功</span></span><br><span class=\"line\">php -m</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h1><p>如果<code>php -m</code>查看没有发现新安装的拓展，一般是下面几种情况：</p>\n<ol>\n<li>重启php的时候没有指定配置文件；</li>\n<li>重启php的时候警告没有找到拓展，一般是因为你拓展的安装位置有问题。可以修改php.ini文件的<code>extension_dir</code>选项指定拓展安装的位置；</li>\n</ol>\n"},{"title":"VUE中使用flvjs踩坑","date":"2019-11-13T08:13:48.000Z","_content":"\n# 在vue项目中使用flvjs\n\n安装\n```bash\nnpm install flv.js\n```\n\n组件内引入\n```js\nimport flvjs from 'flv.js'\n```\n\n使用：\n\n1. 创建一个id为`videoElement`的`video`标签；\n2. 在生命周期`mounted`中使用flvjs，具体使用范例如下；\n\t```html\n\t<template>\n\t\t<div id=\"app\">\n\t\t\t<video id=\"videoElement\" controls autoplay muted width=\"600\" height=\"450\"></video>\n\t\t</div>\n\t</template>\n\n\t<script>\n\n\timport flvjs from 'flv.js'\n\texport default {\n\tname: 'app',\n\tdata(){\n\t\treturn{}\n\t},\n\tmounted(){\n\t\tif (flvjs.isSupported()) {\n\t\t\tlet videoElement = document.getElementById('videoElement');\n\t\t\tlet flvPlayer = flvjs.createPlayer({\n\t\t\t\ttype: 'flv',\n\t\t\t\tisLive: true,\n\t\t\t\thasAudio: false,\n\t\t\t\turl: 'http://www.xxxxxxx.com:18080/11/22.flv'\n\t\t\t});\n\t\t\tconsole.log(flvPlayer,'flv对象')\n\t\t\tflvPlayer.attachMediaElement(videoElement);\n\t\t\tflvPlayer.load();\n\t\t\tflvPlayer.play();\n\t\t}\n\n\t},\n\tmethods:{\n\t\t\n\n\t}\n\t}\n\t</script>\n\n\t```\n\n# 播放失败原因\n\n## 协议不支持\n\n在一开始我以为flvjs可以播放所有flv格式的视频流，但是经过测试和查看文档发现，这个包仅支持`HTTPFLV`协议的流，如果使用`RTMP`协议的流则依然需要使用flash插件。\n\n>支持：http://www.xxxxxxx.com:18080/11/22.flv\n\n>不支持：rtmp://www.xxxxx.com/api/6538-1.1567494734966.flv\n\n## 音频流没有\n\n现在在物联网行业中有非常多的摄像头需要接入到web中，而摄像头往往是没有音频的。这时候如果你在界面中看到视频一直在加载，就像下图这样：\n\n{% asset_img 视频加载.png %}  \n\n这时候就要考虑是不是直播流中没有包含音频流，如果没有就要设置如下：\n```js\nlet flvPlayer = flvjs.createPlayer({\n\t\t\t\ttype: 'flv',\n\t\t\t\tisLive: true,\n\t\t\t\thasAudio: false, //设置这个参数为false\n\t\t\t\turl: 'http://www.xxxxxxx.com:18080/11/22.flv'\n\t\t\t});\n```\n\n## 自动播放失败\n\n{% asset_img 静音报错.png %} \n\n视频流的播放往往我们都选择自动开始播放，但是自动播放被谷歌等浏览器禁用了，需要单独进行设置。这对于用户体验非常的不好，所以经过一系列的百度谷歌，最后知道了实际上浏览器禁用的是音频自动播放，只要我们在`video`标签上设置`muted`属性即可。\n```html\n<video id=\"videoElement\" controls autoplay muted width=\"600\" height=\"450\"></video>\n```\n","source":"_posts/VUE中使用flvjs踩坑.md","raw":"---\ntitle: VUE中使用flvjs踩坑\ndate: 2019-11-13 16:13:48\ncategories: VUE\n---\n\n# 在vue项目中使用flvjs\n\n安装\n```bash\nnpm install flv.js\n```\n\n组件内引入\n```js\nimport flvjs from 'flv.js'\n```\n\n使用：\n\n1. 创建一个id为`videoElement`的`video`标签；\n2. 在生命周期`mounted`中使用flvjs，具体使用范例如下；\n\t```html\n\t<template>\n\t\t<div id=\"app\">\n\t\t\t<video id=\"videoElement\" controls autoplay muted width=\"600\" height=\"450\"></video>\n\t\t</div>\n\t</template>\n\n\t<script>\n\n\timport flvjs from 'flv.js'\n\texport default {\n\tname: 'app',\n\tdata(){\n\t\treturn{}\n\t},\n\tmounted(){\n\t\tif (flvjs.isSupported()) {\n\t\t\tlet videoElement = document.getElementById('videoElement');\n\t\t\tlet flvPlayer = flvjs.createPlayer({\n\t\t\t\ttype: 'flv',\n\t\t\t\tisLive: true,\n\t\t\t\thasAudio: false,\n\t\t\t\turl: 'http://www.xxxxxxx.com:18080/11/22.flv'\n\t\t\t});\n\t\t\tconsole.log(flvPlayer,'flv对象')\n\t\t\tflvPlayer.attachMediaElement(videoElement);\n\t\t\tflvPlayer.load();\n\t\t\tflvPlayer.play();\n\t\t}\n\n\t},\n\tmethods:{\n\t\t\n\n\t}\n\t}\n\t</script>\n\n\t```\n\n# 播放失败原因\n\n## 协议不支持\n\n在一开始我以为flvjs可以播放所有flv格式的视频流，但是经过测试和查看文档发现，这个包仅支持`HTTPFLV`协议的流，如果使用`RTMP`协议的流则依然需要使用flash插件。\n\n>支持：http://www.xxxxxxx.com:18080/11/22.flv\n\n>不支持：rtmp://www.xxxxx.com/api/6538-1.1567494734966.flv\n\n## 音频流没有\n\n现在在物联网行业中有非常多的摄像头需要接入到web中，而摄像头往往是没有音频的。这时候如果你在界面中看到视频一直在加载，就像下图这样：\n\n{% asset_img 视频加载.png %}  \n\n这时候就要考虑是不是直播流中没有包含音频流，如果没有就要设置如下：\n```js\nlet flvPlayer = flvjs.createPlayer({\n\t\t\t\ttype: 'flv',\n\t\t\t\tisLive: true,\n\t\t\t\thasAudio: false, //设置这个参数为false\n\t\t\t\turl: 'http://www.xxxxxxx.com:18080/11/22.flv'\n\t\t\t});\n```\n\n## 自动播放失败\n\n{% asset_img 静音报错.png %} \n\n视频流的播放往往我们都选择自动开始播放，但是自动播放被谷歌等浏览器禁用了，需要单独进行设置。这对于用户体验非常的不好，所以经过一系列的百度谷歌，最后知道了实际上浏览器禁用的是音频自动播放，只要我们在`video`标签上设置`muted`属性即可。\n```html\n<video id=\"videoElement\" controls autoplay muted width=\"600\" height=\"450\"></video>\n```\n","slug":"VUE中使用flvjs踩坑","published":1,"updated":"2019-11-13T08:47:03.278Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28ai0008fiyhdfnkmrta","content":"<h1 id=\"在vue项目中使用flvjs\"><a href=\"#在vue项目中使用flvjs\" class=\"headerlink\" title=\"在vue项目中使用flvjs\"></a>在vue项目中使用flvjs</h1><p>安装</p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install flv.js</span><br></pre></td></tr></table></figure><p>组件内引入</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> flvjs <span class=\"keyword\">from</span> <span class=\"string\">'flv.js'</span></span><br></pre></td></tr></table></figure><a id=\"more\"></a>\n\n\n\n\n\n<p>使用：</p>\n<ol>\n<li>创建一个id为<code>videoElement</code>的<code>video</code>标签；</li>\n<li>在生命周期<code>mounted</code>中使用flvjs，具体使用范例如下； <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">video</span> <span class=\"attr\">id</span>=<span class=\"string\">\"videoElement\"</span> <span class=\"attr\">controls</span> <span class=\"attr\">autoplay</span> <span class=\"attr\">muted</span> <span class=\"attr\">width</span>=<span class=\"string\">\"600\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"450\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> flvjs <span class=\"keyword\">from</span> <span class=\"string\">'flv.js'</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">name: <span class=\"string\">'app'</span>,</span></span><br><span class=\"line\">data()&#123;</span><br><span class=\"line\"><span class=\"javascript\">\t<span class=\"keyword\">return</span>&#123;&#125;</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">mounted()&#123;</span><br><span class=\"line\"><span class=\"javascript\">\t<span class=\"keyword\">if</span> (flvjs.isSupported()) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">let</span> videoElement = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'videoElement'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">let</span> flvPlayer = flvjs.createPlayer(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\ttype: <span class=\"string\">'flv'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\tisLive: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\thasAudio: <span class=\"literal\">false</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\turl: <span class=\"string\">'http://www.xxxxxxx.com:18080/11/22.flv'</span></span></span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(flvPlayer,<span class=\"string\">'flv对象'</span>)</span></span><br><span class=\"line\">\t\tflvPlayer.attachMediaElement(videoElement);</span><br><span class=\"line\">\t\tflvPlayer.load();</span><br><span class=\"line\">\t\tflvPlayer.play();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">methods:&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h1 id=\"播放失败原因\"><a href=\"#播放失败原因\" class=\"headerlink\" title=\"播放失败原因\"></a>播放失败原因</h1><h2 id=\"协议不支持\"><a href=\"#协议不支持\" class=\"headerlink\" title=\"协议不支持\"></a>协议不支持</h2><p>在一开始我以为flvjs可以播放所有flv格式的视频流，但是经过测试和查看文档发现，这个包仅支持<code>HTTPFLV</code>协议的流，如果使用<code>RTMP</code>协议的流则依然需要使用flash插件。</p>\n<blockquote>\n<p>支持：<a href=\"http://www.xxxxxxx.com:18080/11/22.flv\" target=\"_blank\" rel=\"noopener\">http://www.xxxxxxx.com:18080/11/22.flv</a></p>\n</blockquote>\n<blockquote>\n<p>不支持：rtmp://<a href=\"http://www.xxxxx.com/api/6538-1.1567494734966.flv\" target=\"_blank\" rel=\"noopener\">www.xxxxx.com/api/6538-1.1567494734966.flv</a></p>\n</blockquote>\n<h2 id=\"音频流没有\"><a href=\"#音频流没有\" class=\"headerlink\" title=\"音频流没有\"></a>音频流没有</h2><p>现在在物联网行业中有非常多的摄像头需要接入到web中，而摄像头往往是没有音频的。这时候如果你在界面中看到视频一直在加载，就像下图这样：</p>\n<img src=\"/2019/11/13/VUE中使用flvjs踩坑/视频加载.png\">  \n\n<p>这时候就要考虑是不是直播流中没有包含音频流，如果没有就要设置如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> flvPlayer = flvjs.createPlayer(&#123;</span><br><span class=\"line\">\t\t\t\ttype: <span class=\"string\">'flv'</span>,</span><br><span class=\"line\">\t\t\t\tisLive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t\t\thasAudio: <span class=\"literal\">false</span>, <span class=\"comment\">//设置这个参数为false</span></span><br><span class=\"line\">\t\t\t\turl: <span class=\"string\">'http://www.xxxxxxx.com:18080/11/22.flv'</span></span><br><span class=\"line\">\t\t\t&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"自动播放失败\"><a href=\"#自动播放失败\" class=\"headerlink\" title=\"自动播放失败\"></a>自动播放失败</h2><img src=\"/2019/11/13/VUE中使用flvjs踩坑/静音报错.png\"> \n\n<p>视频流的播放往往我们都选择自动开始播放，但是自动播放被谷歌等浏览器禁用了，需要单独进行设置。这对于用户体验非常的不好，所以经过一系列的百度谷歌，最后知道了实际上浏览器禁用的是音频自动播放，只要我们在<code>video</code>标签上设置<code>muted</code>属性即可。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">video</span> <span class=\"attr\">id</span>=<span class=\"string\">\"videoElement\"</span> <span class=\"attr\">controls</span> <span class=\"attr\">autoplay</span> <span class=\"attr\">muted</span> <span class=\"attr\">width</span>=<span class=\"string\">\"600\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"450\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"<h1 id=\"在vue项目中使用flvjs\"><a href=\"#在vue项目中使用flvjs\" class=\"headerlink\" title=\"在vue项目中使用flvjs\"></a>在vue项目中使用flvjs</h1><p>安装</p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install flv.js</span><br></pre></td></tr></table></figure><p>组件内引入</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> flvjs <span class=\"keyword\">from</span> <span class=\"string\">'flv.js'</span></span><br></pre></td></tr></table></figure>","more":"\n\n\n\n\n\n<p>使用：</p>\n<ol>\n<li>创建一个id为<code>videoElement</code>的<code>video</code>标签；</li>\n<li>在生命周期<code>mounted</code>中使用flvjs，具体使用范例如下； <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">video</span> <span class=\"attr\">id</span>=<span class=\"string\">\"videoElement\"</span> <span class=\"attr\">controls</span> <span class=\"attr\">autoplay</span> <span class=\"attr\">muted</span> <span class=\"attr\">width</span>=<span class=\"string\">\"600\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"450\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> flvjs <span class=\"keyword\">from</span> <span class=\"string\">'flv.js'</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">name: <span class=\"string\">'app'</span>,</span></span><br><span class=\"line\">data()&#123;</span><br><span class=\"line\"><span class=\"javascript\">\t<span class=\"keyword\">return</span>&#123;&#125;</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">mounted()&#123;</span><br><span class=\"line\"><span class=\"javascript\">\t<span class=\"keyword\">if</span> (flvjs.isSupported()) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">let</span> videoElement = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'videoElement'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">let</span> flvPlayer = flvjs.createPlayer(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\ttype: <span class=\"string\">'flv'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\tisLive: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\thasAudio: <span class=\"literal\">false</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\turl: <span class=\"string\">'http://www.xxxxxxx.com:18080/11/22.flv'</span></span></span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(flvPlayer,<span class=\"string\">'flv对象'</span>)</span></span><br><span class=\"line\">\t\tflvPlayer.attachMediaElement(videoElement);</span><br><span class=\"line\">\t\tflvPlayer.load();</span><br><span class=\"line\">\t\tflvPlayer.play();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">methods:&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h1 id=\"播放失败原因\"><a href=\"#播放失败原因\" class=\"headerlink\" title=\"播放失败原因\"></a>播放失败原因</h1><h2 id=\"协议不支持\"><a href=\"#协议不支持\" class=\"headerlink\" title=\"协议不支持\"></a>协议不支持</h2><p>在一开始我以为flvjs可以播放所有flv格式的视频流，但是经过测试和查看文档发现，这个包仅支持<code>HTTPFLV</code>协议的流，如果使用<code>RTMP</code>协议的流则依然需要使用flash插件。</p>\n<blockquote>\n<p>支持：<a href=\"http://www.xxxxxxx.com:18080/11/22.flv\" target=\"_blank\" rel=\"noopener\">http://www.xxxxxxx.com:18080/11/22.flv</a></p>\n</blockquote>\n<blockquote>\n<p>不支持：rtmp://<a href=\"http://www.xxxxx.com/api/6538-1.1567494734966.flv\" target=\"_blank\" rel=\"noopener\">www.xxxxx.com/api/6538-1.1567494734966.flv</a></p>\n</blockquote>\n<h2 id=\"音频流没有\"><a href=\"#音频流没有\" class=\"headerlink\" title=\"音频流没有\"></a>音频流没有</h2><p>现在在物联网行业中有非常多的摄像头需要接入到web中，而摄像头往往是没有音频的。这时候如果你在界面中看到视频一直在加载，就像下图这样：</p>\n<img src=\"/2019/11/13/VUE中使用flvjs踩坑/视频加载.png\">  \n\n<p>这时候就要考虑是不是直播流中没有包含音频流，如果没有就要设置如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> flvPlayer = flvjs.createPlayer(&#123;</span><br><span class=\"line\">\t\t\t\ttype: <span class=\"string\">'flv'</span>,</span><br><span class=\"line\">\t\t\t\tisLive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t\t\thasAudio: <span class=\"literal\">false</span>, <span class=\"comment\">//设置这个参数为false</span></span><br><span class=\"line\">\t\t\t\turl: <span class=\"string\">'http://www.xxxxxxx.com:18080/11/22.flv'</span></span><br><span class=\"line\">\t\t\t&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"自动播放失败\"><a href=\"#自动播放失败\" class=\"headerlink\" title=\"自动播放失败\"></a>自动播放失败</h2><img src=\"/2019/11/13/VUE中使用flvjs踩坑/静音报错.png\"> \n\n<p>视频流的播放往往我们都选择自动开始播放，但是自动播放被谷歌等浏览器禁用了，需要单独进行设置。这对于用户体验非常的不好，所以经过一系列的百度谷歌，最后知道了实际上浏览器禁用的是音频自动播放，只要我们在<code>video</code>标签上设置<code>muted</code>属性即可。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">video</span> <span class=\"attr\">id</span>=<span class=\"string\">\"videoElement\"</span> <span class=\"attr\">controls</span> <span class=\"attr\">autoplay</span> <span class=\"attr\">muted</span> <span class=\"attr\">width</span>=<span class=\"string\">\"600\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"450\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n"},{"title":"关于JavaScript的分号问题","date":"2019-11-08T04:42:17.000Z","_content":"\n# 分号的争论  \n\n关于JavaScript是不是应该使用分号结尾这个话题已经被撕逼很多次了，有着无数的分号严谨论者，也有随喜好自由决定者。我原来本属于前者，一度认为分号可以让我的代码更加的严谨，后来发现我经常会忘记使用分号，但是对代码并没有造成什么后果，反而成为了我心里上的负担，总觉得没有打分号就感觉代码有问题。后来看了[尤雨溪和玉伯等几位大佬的回答](https://www.zhihu.com/question/20298345)，越发的觉得自己不应该被分号所限制，我只要保证好我的编码习惯，也就不会出现因为分号导致的bug。\n\n# JavaScript的分号处理机制\n\nJavaScript为自动的在每行代码的结尾处加上分号以表示该行的结束，如果碰见下列5种符号开头的代码，如：`/`、`(`、`[`、`+`、`-`，并且上一行代码没有使用分号结尾，则该行代码会被直接合并到上一行代码后面，例：\n```js\nlet a = b\n(function (){\n\tconsole.log('111111');\n})\n\n//上面的代码会被JavaScript解析为\nlet a = b(function (){\n\tconsole.log('111111');\n})\n```\n>注意：在使用`return`返回值的时候，如果返回值和`return`不在同一行，则会返回undefined。所以我们要保证返回的值必须和return在同一行，即：\n\n```js\n\t//错误示范\n\t(function (){\n\t\treturn \n\t\t{\n\t\t\ta:1\n\t\t}\n\t})()\n\n\t//上面代码会被解析为\n\t(function (){\n\t\treturn ;\n\t\t{\n\t\t\ta:1\n\t\t};\n\t})()\n\n\t//正确的书写方式应该是\n\t(function (){\n\t\treturn {\n\t\t\ta:1\n\t\t}\n\t})()\n```\n\n>由此可知，我们其实只要避免在`/`、`(`、`[`、`+`、`-`这五种符号开头的代码的上一行中注意使用分号即可。而且在真正的实际开发中，几乎不会出现这五种符号开头的代码，需要被你注意的情况可以忽略不计。\n\n# 到底是否应该使用分号\n\n我比较支持[玉伯](https://www.zhihu.com/question/20298345)的说法，按照项目来，按照风格来。毕竟分号不是一个强制的规定，如果项目规范中要求了使用，，或者原来的项目中一贯风格都使用了，那么后续也应该保持统一风格。如果没有强制性的规定，那么大可以放松的面对分号。比如vue项目源码中就不使用分号，那么我们也没必要强求。总之就是，看个人习惯，你习惯了C风格的代码，那你就写分号，你觉得麻烦，那就不写。\n\n","source":"_posts/关于JavaScript的分号问题.md","raw":"---\ntitle: 关于JavaScript的分号问题\ndate: 2019-11-08 12:42:17\ncategories: JavaScript\n---\n\n# 分号的争论  \n\n关于JavaScript是不是应该使用分号结尾这个话题已经被撕逼很多次了，有着无数的分号严谨论者，也有随喜好自由决定者。我原来本属于前者，一度认为分号可以让我的代码更加的严谨，后来发现我经常会忘记使用分号，但是对代码并没有造成什么后果，反而成为了我心里上的负担，总觉得没有打分号就感觉代码有问题。后来看了[尤雨溪和玉伯等几位大佬的回答](https://www.zhihu.com/question/20298345)，越发的觉得自己不应该被分号所限制，我只要保证好我的编码习惯，也就不会出现因为分号导致的bug。\n\n# JavaScript的分号处理机制\n\nJavaScript为自动的在每行代码的结尾处加上分号以表示该行的结束，如果碰见下列5种符号开头的代码，如：`/`、`(`、`[`、`+`、`-`，并且上一行代码没有使用分号结尾，则该行代码会被直接合并到上一行代码后面，例：\n```js\nlet a = b\n(function (){\n\tconsole.log('111111');\n})\n\n//上面的代码会被JavaScript解析为\nlet a = b(function (){\n\tconsole.log('111111');\n})\n```\n>注意：在使用`return`返回值的时候，如果返回值和`return`不在同一行，则会返回undefined。所以我们要保证返回的值必须和return在同一行，即：\n\n```js\n\t//错误示范\n\t(function (){\n\t\treturn \n\t\t{\n\t\t\ta:1\n\t\t}\n\t})()\n\n\t//上面代码会被解析为\n\t(function (){\n\t\treturn ;\n\t\t{\n\t\t\ta:1\n\t\t};\n\t})()\n\n\t//正确的书写方式应该是\n\t(function (){\n\t\treturn {\n\t\t\ta:1\n\t\t}\n\t})()\n```\n\n>由此可知，我们其实只要避免在`/`、`(`、`[`、`+`、`-`这五种符号开头的代码的上一行中注意使用分号即可。而且在真正的实际开发中，几乎不会出现这五种符号开头的代码，需要被你注意的情况可以忽略不计。\n\n# 到底是否应该使用分号\n\n我比较支持[玉伯](https://www.zhihu.com/question/20298345)的说法，按照项目来，按照风格来。毕竟分号不是一个强制的规定，如果项目规范中要求了使用，，或者原来的项目中一贯风格都使用了，那么后续也应该保持统一风格。如果没有强制性的规定，那么大可以放松的面对分号。比如vue项目源码中就不使用分号，那么我们也没必要强求。总之就是，看个人习惯，你习惯了C风格的代码，那你就写分号，你觉得麻烦，那就不写。\n\n","slug":"关于JavaScript的分号问题","published":1,"updated":"2019-11-08T05:37:59.871Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28aj0009fiyh0fsb1d8k","content":"<h1 id=\"分号的争论\"><a href=\"#分号的争论\" class=\"headerlink\" title=\"分号的争论\"></a>分号的争论</h1><p>关于JavaScript是不是应该使用分号结尾这个话题已经被撕逼很多次了，有着无数的分号严谨论者，也有随喜好自由决定者。我原来本属于前者，一度认为分号可以让我的代码更加的严谨，后来发现我经常会忘记使用分号，但是对代码并没有造成什么后果，反而成为了我心里上的负担，总觉得没有打分号就感觉代码有问题。后来看了<a href=\"https://www.zhihu.com/question/20298345\" target=\"_blank\" rel=\"noopener\">尤雨溪和玉伯等几位大佬的回答</a>，越发的觉得自己不应该被分号所限制，我只要保证好我的编码习惯，也就不会出现因为分号导致的bug。</p><a id=\"more\"></a>\n<h1 id=\"JavaScript的分号处理机制\"><a href=\"#JavaScript的分号处理机制\" class=\"headerlink\" title=\"JavaScript的分号处理机制\"></a>JavaScript的分号处理机制</h1><p>JavaScript为自动的在每行代码的结尾处加上分号以表示该行的结束，如果碰见下列5种符号开头的代码，如：<code>/</code>、<code>(</code>、<code>[</code>、<code>+</code>、<code>-</code>，并且上一行代码没有使用分号结尾，则该行代码会被直接合并到上一行代码后面，例：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = b</span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'111111'</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//上面的代码会被JavaScript解析为</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = b(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'111111'</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：在使用<code>return</code>返回值的时候，如果返回值和<code>return</code>不在同一行，则会返回undefined。所以我们要保证返回的值必须和return在同一行，即：</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//错误示范</span></span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> </span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ta:<span class=\"number\">1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//上面代码会被解析为</span></span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ta:<span class=\"number\">1</span></span><br><span class=\"line\">\t&#125;;</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//正确的书写方式应该是</span></span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\ta:<span class=\"number\">1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>由此可知，我们其实只要避免在<code>/</code>、<code>(</code>、<code>[</code>、<code>+</code>、<code>-</code>这五种符号开头的代码的上一行中注意使用分号即可。而且在真正的实际开发中，几乎不会出现这五种符号开头的代码，需要被你注意的情况可以忽略不计。</p>\n</blockquote>\n<h1 id=\"到底是否应该使用分号\"><a href=\"#到底是否应该使用分号\" class=\"headerlink\" title=\"到底是否应该使用分号\"></a>到底是否应该使用分号</h1><p>我比较支持<a href=\"https://www.zhihu.com/question/20298345\" target=\"_blank\" rel=\"noopener\">玉伯</a>的说法，按照项目来，按照风格来。毕竟分号不是一个强制的规定，如果项目规范中要求了使用，，或者原来的项目中一贯风格都使用了，那么后续也应该保持统一风格。如果没有强制性的规定，那么大可以放松的面对分号。比如vue项目源码中就不使用分号，那么我们也没必要强求。总之就是，看个人习惯，你习惯了C风格的代码，那你就写分号，你觉得麻烦，那就不写。</p>\n","site":{"data":{}},"excerpt":"<h1 id=\"分号的争论\"><a href=\"#分号的争论\" class=\"headerlink\" title=\"分号的争论\"></a>分号的争论</h1><p>关于JavaScript是不是应该使用分号结尾这个话题已经被撕逼很多次了，有着无数的分号严谨论者，也有随喜好自由决定者。我原来本属于前者，一度认为分号可以让我的代码更加的严谨，后来发现我经常会忘记使用分号，但是对代码并没有造成什么后果，反而成为了我心里上的负担，总觉得没有打分号就感觉代码有问题。后来看了<a href=\"https://www.zhihu.com/question/20298345\" target=\"_blank\" rel=\"noopener\">尤雨溪和玉伯等几位大佬的回答</a>，越发的觉得自己不应该被分号所限制，我只要保证好我的编码习惯，也就不会出现因为分号导致的bug。</p>","more":"\n<h1 id=\"JavaScript的分号处理机制\"><a href=\"#JavaScript的分号处理机制\" class=\"headerlink\" title=\"JavaScript的分号处理机制\"></a>JavaScript的分号处理机制</h1><p>JavaScript为自动的在每行代码的结尾处加上分号以表示该行的结束，如果碰见下列5种符号开头的代码，如：<code>/</code>、<code>(</code>、<code>[</code>、<code>+</code>、<code>-</code>，并且上一行代码没有使用分号结尾，则该行代码会被直接合并到上一行代码后面，例：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = b</span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'111111'</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//上面的代码会被JavaScript解析为</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = b(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'111111'</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：在使用<code>return</code>返回值的时候，如果返回值和<code>return</code>不在同一行，则会返回undefined。所以我们要保证返回的值必须和return在同一行，即：</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//错误示范</span></span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> </span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ta:<span class=\"number\">1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//上面代码会被解析为</span></span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> ;</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\ta:<span class=\"number\">1</span></span><br><span class=\"line\">\t&#125;;</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//正确的书写方式应该是</span></span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\ta:<span class=\"number\">1</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>由此可知，我们其实只要避免在<code>/</code>、<code>(</code>、<code>[</code>、<code>+</code>、<code>-</code>这五种符号开头的代码的上一行中注意使用分号即可。而且在真正的实际开发中，几乎不会出现这五种符号开头的代码，需要被你注意的情况可以忽略不计。</p>\n</blockquote>\n<h1 id=\"到底是否应该使用分号\"><a href=\"#到底是否应该使用分号\" class=\"headerlink\" title=\"到底是否应该使用分号\"></a>到底是否应该使用分号</h1><p>我比较支持<a href=\"https://www.zhihu.com/question/20298345\" target=\"_blank\" rel=\"noopener\">玉伯</a>的说法，按照项目来，按照风格来。毕竟分号不是一个强制的规定，如果项目规范中要求了使用，，或者原来的项目中一贯风格都使用了，那么后续也应该保持统一风格。如果没有强制性的规定，那么大可以放松的面对分号。比如vue项目源码中就不使用分号，那么我们也没必要强求。总之就是，看个人习惯，你习惯了C风格的代码，那你就写分号，你觉得麻烦，那就不写。</p>\n"},{"title":"封装VUE组件并发布到npm","date":"2019-09-18T08:44:24.000Z","_content":"\n## 前言\n\n因为项目中遇到了部分需求在网上并没有找到比较好的解决方案，所以决定自己实现。实现过后本着为劳苦大众做贡献的想法决定将其开源，顺便也学习一下开源的流程。\n<!-- more -->\n\n>至于网上这么多教程，我还要单独写一篇。因为我遇到了很多坑，搞了好几天才完整的弄好，为了下次发布npm包方便，所以记录一下。\n\n## 准备npm\n\n1. 首先需要到npm官网去注册，[点这里去哦](https://www.npmjs.com/ \"npm官网\")。    \n2. 然后在电脑上登录\n```bash\nnpm login\n```\n\n## 项目准备\n这里我们使用的是vue项目，而且需要发布的包的功能也不复杂，所以我们选择使用`webpack-simple`搭建一个简易的`vue`项目，使用`vue@cli`搭建的脚手架对我们来说太臃肿了。\n```bash\nvue init webpack-simple 项目名  \n\n#然后会提示填写作者，项目名等信息，不想写就直接‘y’或者‘enter’\n\ncd 项目文件\n\nnpm install\n```\n`npm`下载完毕后就可以直接运行项目了\n```bash\nnpm run dev\n```\n此时项目的目录主要结构应该是如下这样的\n```\n|-src\n|-|-assets\n|-|-|-logo.png\n|-|-App.vue\n|-|-main.js\n|-index.html\n|-package.json\n|-webpack.config.js\n```\n\n## 项目开发\n\n可以先改造一下项目目录结构，下面是我改造后的，也可以根据自己的编码习惯改造，但是增加的两个`index.js`是比较关键的文件，不要漏掉了。\n```\n|-src\n|-|-tape         //自定义文件夹\n|-|-|-tape.vue   //自定义组件名\n|-|-|-index.js   //注意这个文件\n|-|-App.vue\n|-|-main.js\n|-|-index.js     //注意这个文件\n|-index.html\n|-package.json\n|-webpack.config.js\n```\n{% asset_img 目录结构.png %}\n\n***\n注意：\n在编辑需要发布到npm的组件时（这里就是指`tape.vue`组件），务必要记得不能忽略`name`属性，这个涉及到后面组件导出的问题。\n\n## 发布\n\n在实现了功能过后，我们可以利用`App.vue`来测试一下组件的功能\n```html\n<template>\n    <div id=\"app\">\n       <vueVideoTape ></vueVideoTape>\n    </div>\n</template>\n<script>\n\nimport vueVideoTape from './tape/tape'\n\nexport default  {\n    data(){\n        return{}\n    },\n    components:{\n       vueVideoTape\n\t},\n\tmethods:{\n\t\n\t}\n}\n</script>\n```\n\n>经过测试没有问题后，就可以开始着手发布前的准备了，这里也是最麻烦的地方，很多的小细节要注意。\n\n首先要对组件的导出做处理，要实现其他人通过`npm install`下载后，可以全局引入，也可以组件内按需引入。也就是要实现下列这两个引用方式。\n```javascript\n\n//全局引入\nimport tape from 'vue-video-tape';\nVue.use(tape);\n\n//组件内按需引入\nimport {VueVideoTape} from 'vue-video-tape';\n```\n\n与`tape.vue`同级`index.js`对组件导出做如下处理\n```javascript\nimport VueVideoTape from './tape.vue';\n\n//这里VueVideoTape.name就是组件中的name属性，所以正如前文提到到，name属性不可以忽略，必须要有\nVueVideoTape.install = Vue => Vue.component(VueVideoTape.name, VueVideoTape);\n\nexport default VueVideoTape;\n```\n\n与`main.js`同级的`index.js`对组件导出做如下处理\n```javascript\n//如果有多个导出的组件，在这里要引入\nimport VueVideoTape from './tape/index.js';\n\n\n//如果引入多个组件，在这里都要注册\nconst components = [\n\tVueVideoTape,\n]\n\nconst install = function(Vue, opts = {}) {\n  components.map(component => {\n    Vue.component(component.name, component);\n  })\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  install(window.Vue);\n}\n\n\n//多个组件时，在这里要全部导出，install不可以忽略，全局引入时，vue会自动调用install\nexport default {\n  install,\n  VueVideoTape,\n}\n\n//多个组件导出，这里依次导出，组件内按需引入时就是引入这里的组件\nexport {\n\tVueVideoTape\n}\n```\n\n***\n\n>文件的导出处理完后，还需要对webpack的配置进行修改。    \n\n首先是对开发环境和生产环境的区分，生产环境就直接打包到`dist`文件夹。\n```javascript\nentry: NODE_ENV == 'development' ? './src/main.js' : './src/index.js',\n  output: {\n    path: path.resolve(__dirname, './dist'),//打包输出地址\n    publicPath: '/dist/',\n    filename: 'vue-video-tape.js',//打包后文件名\n    library:'VueVideoTape',\n\tlibraryTarget:'umd',\n\tumdNamedDefine: true\n  },\n```\n\n>开发功能时候也会需要引入其他的`npm`包，但是我们打包发布的时候，要将这些引入的包排除，否则就会导致打包的文件会非常大，而且引入过后造成依赖重复，冗余非常严重。所以在生产环境的时候，我们要对打包的文件进行单独处理。\n```javascript\n//在webpck.config.js最后加上下面的代码\nif (process.env.NODE_ENV === 'production') {\n  module.exports.devtool = '#source-map'\n  module.exports.plugins = (module.exports.plugins || []).concat([\n    new webpack.DefinePlugin({\n      'process.env': {\n        NODE_ENV: '\"production\"'\n      }\n    }),\n    new webpack.optimize.UglifyJsPlugin({\n      sourceMap: false,//这里改为false\n      compress: {\n        warnings: false\n      }\n    }),\n    new webpack.LoaderOptionsPlugin({\n      minimize: true\n\t}),\n\tnew webpack.optimize.UglifyJsPlugin({\n\t\tcompress: {\n\t\t  warnings: false\n\t\t}\n\t  })\n  ])\n\n//这里是对组件内依赖的排除\n  module.exports.externals = {\n\trecordrtc: {\n        commonjs: 'recordrtc',\n        commonjs2: 'recordrtc',\n        amd: 'recordrtc',\n        root: '_'\n\t},\n\t'vue-video-player': {\n        commonjs: 'vue-video-player',\n        commonjs2: 'vue-video-player',\n        amd: 'vue-video-player',\n        root: '_'\n\t},\n  }\n}\n```\n\nwebpack配置修改完后，还需要对package.json进行部分修改，主要涉及到几个发布npm包需要用到的关键属性。\n\n`name`属性决定了`npm install`时候的名字\n```json\n\"name\": \"vue-video-tape\",\n```\n```bash\nnpm install vue-video-tape\n```\n\n`version`属性是发布的版本，`每次发布`都必须要对其进行修改，否则发布失败\n\n```json\n\"version\": \"1.1.0\",\n```\n\n`private`属性是决定是否开源，如果为`true`则发布不了\n\n```json\n\"private\": false,\n```\n\n`main`属性决定了当`import xxx from 'xxxxx'`时，引入哪个文件\n\n```json\n\"main\": \"dist/vue-video-tape.js\",\n```\n\n每次发布时我们都需要对项目进行打包，但是经常会忘记打包直接发布，导致发布的新版本是上一个版本，所以我们可以引入一个事件，在每次发布的前自动进行打包操作。\n```json\n\"scripts\": {\n    \"dev\": \"cross-env NODE_ENV=development webpack-dev-server --open --hot\",\n    \"build\": \"cross-env NODE_ENV=production webpack --progress --hide-modules\",\n    \"prepublishOnly\": \"npm run build\"\n  },\n```\n\n`files`属性指定当`npm install`时下载的文件，如下配置后，`npm install vue-video-tape`下载的包就只有dist文件夹和package.json文件，可以减少包的体积。\n```json\n\"files\": [\n    \"dist\",\n    \"package.json\"\n  ],\n```\n\n***\n\n>最后的最后，当一切准备就绪了，就可以执行发布命令了\n```bash\nnpm publish\n```\n注意：可能会报错你的项目名字已经有了，这时候你需要去修改`package.json`文件中的`name`属性。     \n\n发布成功后，可以直接到npm官网上搜索你的包。\n\n\n## 下载使用\n\n```bash\nnpm install 包名\n```\n\n全局引入\n```javascript\nimport xxx from 'vue-video-tape';\nVue.use(xxx);\n```\n\n组件内引入\n```javascript\nimport VueVideoTape from 'vue-video-tape';\n\ncomponents:{VueVideoTape},\n```","source":"_posts/封装VUE组件并发布到npm.md","raw":"---\ntitle: 封装VUE组件并发布到npm\ndate: 2019-09-18 16:44:24\ncategories: 开发小工具\n---\n\n## 前言\n\n因为项目中遇到了部分需求在网上并没有找到比较好的解决方案，所以决定自己实现。实现过后本着为劳苦大众做贡献的想法决定将其开源，顺便也学习一下开源的流程。\n<!-- more -->\n\n>至于网上这么多教程，我还要单独写一篇。因为我遇到了很多坑，搞了好几天才完整的弄好，为了下次发布npm包方便，所以记录一下。\n\n## 准备npm\n\n1. 首先需要到npm官网去注册，[点这里去哦](https://www.npmjs.com/ \"npm官网\")。    \n2. 然后在电脑上登录\n```bash\nnpm login\n```\n\n## 项目准备\n这里我们使用的是vue项目，而且需要发布的包的功能也不复杂，所以我们选择使用`webpack-simple`搭建一个简易的`vue`项目，使用`vue@cli`搭建的脚手架对我们来说太臃肿了。\n```bash\nvue init webpack-simple 项目名  \n\n#然后会提示填写作者，项目名等信息，不想写就直接‘y’或者‘enter’\n\ncd 项目文件\n\nnpm install\n```\n`npm`下载完毕后就可以直接运行项目了\n```bash\nnpm run dev\n```\n此时项目的目录主要结构应该是如下这样的\n```\n|-src\n|-|-assets\n|-|-|-logo.png\n|-|-App.vue\n|-|-main.js\n|-index.html\n|-package.json\n|-webpack.config.js\n```\n\n## 项目开发\n\n可以先改造一下项目目录结构，下面是我改造后的，也可以根据自己的编码习惯改造，但是增加的两个`index.js`是比较关键的文件，不要漏掉了。\n```\n|-src\n|-|-tape         //自定义文件夹\n|-|-|-tape.vue   //自定义组件名\n|-|-|-index.js   //注意这个文件\n|-|-App.vue\n|-|-main.js\n|-|-index.js     //注意这个文件\n|-index.html\n|-package.json\n|-webpack.config.js\n```\n{% asset_img 目录结构.png %}\n\n***\n注意：\n在编辑需要发布到npm的组件时（这里就是指`tape.vue`组件），务必要记得不能忽略`name`属性，这个涉及到后面组件导出的问题。\n\n## 发布\n\n在实现了功能过后，我们可以利用`App.vue`来测试一下组件的功能\n```html\n<template>\n    <div id=\"app\">\n       <vueVideoTape ></vueVideoTape>\n    </div>\n</template>\n<script>\n\nimport vueVideoTape from './tape/tape'\n\nexport default  {\n    data(){\n        return{}\n    },\n    components:{\n       vueVideoTape\n\t},\n\tmethods:{\n\t\n\t}\n}\n</script>\n```\n\n>经过测试没有问题后，就可以开始着手发布前的准备了，这里也是最麻烦的地方，很多的小细节要注意。\n\n首先要对组件的导出做处理，要实现其他人通过`npm install`下载后，可以全局引入，也可以组件内按需引入。也就是要实现下列这两个引用方式。\n```javascript\n\n//全局引入\nimport tape from 'vue-video-tape';\nVue.use(tape);\n\n//组件内按需引入\nimport {VueVideoTape} from 'vue-video-tape';\n```\n\n与`tape.vue`同级`index.js`对组件导出做如下处理\n```javascript\nimport VueVideoTape from './tape.vue';\n\n//这里VueVideoTape.name就是组件中的name属性，所以正如前文提到到，name属性不可以忽略，必须要有\nVueVideoTape.install = Vue => Vue.component(VueVideoTape.name, VueVideoTape);\n\nexport default VueVideoTape;\n```\n\n与`main.js`同级的`index.js`对组件导出做如下处理\n```javascript\n//如果有多个导出的组件，在这里要引入\nimport VueVideoTape from './tape/index.js';\n\n\n//如果引入多个组件，在这里都要注册\nconst components = [\n\tVueVideoTape,\n]\n\nconst install = function(Vue, opts = {}) {\n  components.map(component => {\n    Vue.component(component.name, component);\n  })\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  install(window.Vue);\n}\n\n\n//多个组件时，在这里要全部导出，install不可以忽略，全局引入时，vue会自动调用install\nexport default {\n  install,\n  VueVideoTape,\n}\n\n//多个组件导出，这里依次导出，组件内按需引入时就是引入这里的组件\nexport {\n\tVueVideoTape\n}\n```\n\n***\n\n>文件的导出处理完后，还需要对webpack的配置进行修改。    \n\n首先是对开发环境和生产环境的区分，生产环境就直接打包到`dist`文件夹。\n```javascript\nentry: NODE_ENV == 'development' ? './src/main.js' : './src/index.js',\n  output: {\n    path: path.resolve(__dirname, './dist'),//打包输出地址\n    publicPath: '/dist/',\n    filename: 'vue-video-tape.js',//打包后文件名\n    library:'VueVideoTape',\n\tlibraryTarget:'umd',\n\tumdNamedDefine: true\n  },\n```\n\n>开发功能时候也会需要引入其他的`npm`包，但是我们打包发布的时候，要将这些引入的包排除，否则就会导致打包的文件会非常大，而且引入过后造成依赖重复，冗余非常严重。所以在生产环境的时候，我们要对打包的文件进行单独处理。\n```javascript\n//在webpck.config.js最后加上下面的代码\nif (process.env.NODE_ENV === 'production') {\n  module.exports.devtool = '#source-map'\n  module.exports.plugins = (module.exports.plugins || []).concat([\n    new webpack.DefinePlugin({\n      'process.env': {\n        NODE_ENV: '\"production\"'\n      }\n    }),\n    new webpack.optimize.UglifyJsPlugin({\n      sourceMap: false,//这里改为false\n      compress: {\n        warnings: false\n      }\n    }),\n    new webpack.LoaderOptionsPlugin({\n      minimize: true\n\t}),\n\tnew webpack.optimize.UglifyJsPlugin({\n\t\tcompress: {\n\t\t  warnings: false\n\t\t}\n\t  })\n  ])\n\n//这里是对组件内依赖的排除\n  module.exports.externals = {\n\trecordrtc: {\n        commonjs: 'recordrtc',\n        commonjs2: 'recordrtc',\n        amd: 'recordrtc',\n        root: '_'\n\t},\n\t'vue-video-player': {\n        commonjs: 'vue-video-player',\n        commonjs2: 'vue-video-player',\n        amd: 'vue-video-player',\n        root: '_'\n\t},\n  }\n}\n```\n\nwebpack配置修改完后，还需要对package.json进行部分修改，主要涉及到几个发布npm包需要用到的关键属性。\n\n`name`属性决定了`npm install`时候的名字\n```json\n\"name\": \"vue-video-tape\",\n```\n```bash\nnpm install vue-video-tape\n```\n\n`version`属性是发布的版本，`每次发布`都必须要对其进行修改，否则发布失败\n\n```json\n\"version\": \"1.1.0\",\n```\n\n`private`属性是决定是否开源，如果为`true`则发布不了\n\n```json\n\"private\": false,\n```\n\n`main`属性决定了当`import xxx from 'xxxxx'`时，引入哪个文件\n\n```json\n\"main\": \"dist/vue-video-tape.js\",\n```\n\n每次发布时我们都需要对项目进行打包，但是经常会忘记打包直接发布，导致发布的新版本是上一个版本，所以我们可以引入一个事件，在每次发布的前自动进行打包操作。\n```json\n\"scripts\": {\n    \"dev\": \"cross-env NODE_ENV=development webpack-dev-server --open --hot\",\n    \"build\": \"cross-env NODE_ENV=production webpack --progress --hide-modules\",\n    \"prepublishOnly\": \"npm run build\"\n  },\n```\n\n`files`属性指定当`npm install`时下载的文件，如下配置后，`npm install vue-video-tape`下载的包就只有dist文件夹和package.json文件，可以减少包的体积。\n```json\n\"files\": [\n    \"dist\",\n    \"package.json\"\n  ],\n```\n\n***\n\n>最后的最后，当一切准备就绪了，就可以执行发布命令了\n```bash\nnpm publish\n```\n注意：可能会报错你的项目名字已经有了，这时候你需要去修改`package.json`文件中的`name`属性。     \n\n发布成功后，可以直接到npm官网上搜索你的包。\n\n\n## 下载使用\n\n```bash\nnpm install 包名\n```\n\n全局引入\n```javascript\nimport xxx from 'vue-video-tape';\nVue.use(xxx);\n```\n\n组件内引入\n```javascript\nimport VueVideoTape from 'vue-video-tape';\n\ncomponents:{VueVideoTape},\n```","slug":"封装VUE组件并发布到npm","published":1,"updated":"2019-09-19T07:05:07.641Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28al000cfiyh5oqdrbn4","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>因为项目中遇到了部分需求在网上并没有找到比较好的解决方案，所以决定自己实现。实现过后本着为劳苦大众做贡献的想法决定将其开源，顺便也学习一下开源的流程。</p>\n<a id=\"more\"></a>\n\n<blockquote>\n<p>至于网上这么多教程，我还要单独写一篇。因为我遇到了很多坑，搞了好几天才完整的弄好，为了下次发布npm包方便，所以记录一下。</p>\n</blockquote>\n<h2 id=\"准备npm\"><a href=\"#准备npm\" class=\"headerlink\" title=\"准备npm\"></a>准备npm</h2><ol>\n<li>首先需要到npm官网去注册，<a href=\"https://www.npmjs.com/\" title=\"npm官网\" target=\"_blank\" rel=\"noopener\">点这里去哦</a>。    </li>\n<li>然后在电脑上登录<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm login</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h2 id=\"项目准备\"><a href=\"#项目准备\" class=\"headerlink\" title=\"项目准备\"></a>项目准备</h2><p>这里我们使用的是vue项目，而且需要发布的包的功能也不复杂，所以我们选择使用<code>webpack-simple</code>搭建一个简易的<code>vue</code>项目，使用<code>vue@cli</code>搭建的脚手架对我们来说太臃肿了。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue init webpack-simple 项目名  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#然后会提示填写作者，项目名等信息，不想写就直接‘y’或者‘enter’</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> 项目文件</span><br><span class=\"line\"></span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<p><code>npm</code>下载完毕后就可以直接运行项目了</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n\n<p>此时项目的目录主要结构应该是如下这样的</p>\n<figure class=\"highlight gherkin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|<span class=\"string\">-src</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-assets</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-</span>|<span class=\"string\">-logo.png</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-App.vue</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-main.js</span></span><br><span class=\"line\">|<span class=\"string\">-index.html</span></span><br><span class=\"line\">|<span class=\"string\">-package.json</span></span><br><span class=\"line\">|<span class=\"string\">-webpack.config.js</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"项目开发\"><a href=\"#项目开发\" class=\"headerlink\" title=\"项目开发\"></a>项目开发</h2><p>可以先改造一下项目目录结构，下面是我改造后的，也可以根据自己的编码习惯改造，但是增加的两个<code>index.js</code>是比较关键的文件，不要漏掉了。</p>\n<figure class=\"highlight gherkin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|<span class=\"string\">-src</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-tape         //自定义文件夹</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-</span>|<span class=\"string\">-tape.vue   //自定义组件名</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-</span>|<span class=\"string\">-index.js   //注意这个文件</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-App.vue</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-main.js</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-index.js     //注意这个文件</span></span><br><span class=\"line\">|<span class=\"string\">-index.html</span></span><br><span class=\"line\">|<span class=\"string\">-package.json</span></span><br><span class=\"line\">|<span class=\"string\">-webpack.config.js</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/09/18/封装VUE组件并发布到npm/目录结构.png\">\n\n<hr>\n<p>注意：<br>在编辑需要发布到npm的组件时（这里就是指<code>tape.vue</code>组件），务必要记得不能忽略<code>name</code>属性，这个涉及到后面组件导出的问题。</p>\n<h2 id=\"发布\"><a href=\"#发布\" class=\"headerlink\" title=\"发布\"></a>发布</h2><p>在实现了功能过后，我们可以利用<code>App.vue</code>来测试一下组件的功能</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">vueVideoTape</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">vueVideoTape</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> vueVideoTape <span class=\"keyword\">from</span> <span class=\"string\">'./tape/tape'</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span>  &#123;</span></span><br><span class=\"line\">    data()&#123;</span><br><span class=\"line\"><span class=\"actionscript\">        <span class=\"keyword\">return</span>&#123;&#125;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    components:&#123;</span><br><span class=\"line\">       vueVideoTape</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tmethods:&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>经过测试没有问题后，就可以开始着手发布前的准备了，这里也是最麻烦的地方，很多的小细节要注意。</p>\n</blockquote>\n<p>首先要对组件的导出做处理，要实现其他人通过<code>npm install</code>下载后，可以全局引入，也可以组件内按需引入。也就是要实现下列这两个引用方式。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//全局引入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> tape <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-tape'</span>;</span><br><span class=\"line\">Vue.use(tape);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//组件内按需引入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;VueVideoTape&#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-tape'</span>;</span><br></pre></td></tr></table></figure>\n\n<p>与<code>tape.vue</code>同级<code>index.js</code>对组件导出做如下处理</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> VueVideoTape <span class=\"keyword\">from</span> <span class=\"string\">'./tape.vue'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//这里VueVideoTape.name就是组件中的name属性，所以正如前文提到到，name属性不可以忽略，必须要有</span></span><br><span class=\"line\">VueVideoTape.install = <span class=\"function\"><span class=\"params\">Vue</span> =&gt;</span> Vue.component(VueVideoTape.name, VueVideoTape);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> VueVideoTape;</span><br></pre></td></tr></table></figure>\n\n<p>与<code>main.js</code>同级的<code>index.js</code>对组件导出做如下处理</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//如果有多个导出的组件，在这里要引入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> VueVideoTape <span class=\"keyword\">from</span> <span class=\"string\">'./tape/index.js'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//如果引入多个组件，在这里都要注册</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> components = [</span><br><span class=\"line\">\tVueVideoTape,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> install = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">Vue, opts = &#123;&#125;</span>) </span>&#123;</span><br><span class=\"line\">  components.map(<span class=\"function\"><span class=\"params\">component</span> =&gt;</span> &#123;</span><br><span class=\"line\">    Vue.component(component.name, component);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">'undefined'</span> &amp;&amp; <span class=\"built_in\">window</span>.Vue) &#123;</span><br><span class=\"line\">  install(<span class=\"built_in\">window</span>.Vue);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//多个组件时，在这里要全部导出，install不可以忽略，全局引入时，vue会自动调用install</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  install,</span><br><span class=\"line\">  VueVideoTape,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//多个组件导出，这里依次导出，组件内按需引入时就是引入这里的组件</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123;</span><br><span class=\"line\">\tVueVideoTape</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<blockquote>\n<p>文件的导出处理完后，还需要对webpack的配置进行修改。    </p>\n</blockquote>\n<p>首先是对开发环境和生产环境的区分，生产环境就直接打包到<code>dist</code>文件夹。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">entry: NODE_ENV == <span class=\"string\">'development'</span> ? <span class=\"string\">'./src/main.js'</span> : <span class=\"string\">'./src/index.js'</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'./dist'</span>),<span class=\"comment\">//打包输出地址</span></span><br><span class=\"line\">    publicPath: <span class=\"string\">'/dist/'</span>,</span><br><span class=\"line\">    filename: <span class=\"string\">'vue-video-tape.js'</span>,<span class=\"comment\">//打包后文件名</span></span><br><span class=\"line\">    library:<span class=\"string\">'VueVideoTape'</span>,</span><br><span class=\"line\">\tlibraryTarget:<span class=\"string\">'umd'</span>,</span><br><span class=\"line\">\tumdNamedDefine: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>开发功能时候也会需要引入其他的<code>npm</code>包，但是我们打包发布的时候，要将这些引入的包排除，否则就会导致打包的文件会非常大，而且引入过后造成依赖重复，冗余非常严重。所以在生产环境的时候，我们要对打包的文件进行单独处理。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//在webpck.config.js最后加上下面的代码</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>.exports.devtool = <span class=\"string\">'#source-map'</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>.exports.plugins = (<span class=\"built_in\">module</span>.exports.plugins || []).concat([</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">      <span class=\"string\">'process.env'</span>: &#123;</span><br><span class=\"line\">        NODE_ENV: <span class=\"string\">'\"production\"'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class=\"line\">      sourceMap: <span class=\"literal\">false</span>,<span class=\"comment\">//这里改为false</span></span><br><span class=\"line\">      compress: &#123;</span><br><span class=\"line\">        warnings: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.LoaderOptionsPlugin(&#123;</span><br><span class=\"line\">      minimize: <span class=\"literal\">true</span></span><br><span class=\"line\">\t&#125;),</span><br><span class=\"line\">\t<span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class=\"line\">\t\tcompress: &#123;</span><br><span class=\"line\">\t\t  warnings: <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t  &#125;)</span><br><span class=\"line\">  ])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//这里是对组件内依赖的排除</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>.exports.externals = &#123;</span><br><span class=\"line\">\trecordrtc: &#123;</span><br><span class=\"line\">        commonjs: <span class=\"string\">'recordrtc'</span>,</span><br><span class=\"line\">        commonjs2: <span class=\"string\">'recordrtc'</span>,</span><br><span class=\"line\">        amd: <span class=\"string\">'recordrtc'</span>,</span><br><span class=\"line\">        root: <span class=\"string\">'_'</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"string\">'vue-video-player'</span>: &#123;</span><br><span class=\"line\">        commonjs: <span class=\"string\">'vue-video-player'</span>,</span><br><span class=\"line\">        commonjs2: <span class=\"string\">'vue-video-player'</span>,</span><br><span class=\"line\">        amd: <span class=\"string\">'vue-video-player'</span>,</span><br><span class=\"line\">        root: <span class=\"string\">'_'</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>webpack配置修改完后，还需要对package.json进行部分修改，主要涉及到几个发布npm包需要用到的关键属性。</p>\n<p><code>name</code>属性决定了<code>npm install</code>时候的名字</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"name\": \"vue-video-tape\",</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vue-video-tape</span><br></pre></td></tr></table></figure>\n\n<p><code>version</code>属性是发布的版本，<code>每次发布</code>都必须要对其进行修改，否则发布失败</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"version\": \"1.1.0\",</span><br></pre></td></tr></table></figure>\n\n<p><code>private</code>属性是决定是否开源，如果为<code>true</code>则发布不了</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"private\": false,</span><br></pre></td></tr></table></figure>\n\n<p><code>main</code>属性决定了当<code>import xxx from &#39;xxxxx&#39;</code>时，引入哪个文件</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"main\": \"dist/vue-video-tape.js\",</span><br></pre></td></tr></table></figure>\n\n<p>每次发布时我们都需要对项目进行打包，但是经常会忘记打包直接发布，导致发布的新版本是上一个版本，所以我们可以引入一个事件，在每次发布的前自动进行打包操作。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"scripts\": &#123;</span><br><span class=\"line\">    \"dev\": \"cross-env NODE_ENV=development webpack-dev-server --open --hot\",</span><br><span class=\"line\">    \"build\": \"cross-env NODE_ENV=production webpack --progress --hide-modules\",</span><br><span class=\"line\">    \"prepublishOnly\": \"npm run build\"</span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure>\n\n<p><code>files</code>属性指定当<code>npm install</code>时下载的文件，如下配置后，<code>npm install vue-video-tape</code>下载的包就只有dist文件夹和package.json文件，可以减少包的体积。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"files\": [</span><br><span class=\"line\">    \"dist\",</span><br><span class=\"line\">    <span class=\"string\">\"package.json\"</span></span><br><span class=\"line\">  ],</span><br></pre></td></tr></table></figure>\n\n<hr>\n<blockquote>\n<p>最后的最后，当一切准备就绪了，就可以执行发布命令了</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm publish</span><br></pre></td></tr></table></figure>\n\n<p>注意：可能会报错你的项目名字已经有了，这时候你需要去修改<code>package.json</code>文件中的<code>name</code>属性。     </p>\n<p>发布成功后，可以直接到npm官网上搜索你的包。</p>\n<h2 id=\"下载使用\"><a href=\"#下载使用\" class=\"headerlink\" title=\"下载使用\"></a>下载使用</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install 包名</span><br></pre></td></tr></table></figure>\n\n<p>全局引入</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> xxx <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-tape'</span>;</span><br><span class=\"line\">Vue.use(xxx);</span><br></pre></td></tr></table></figure>\n\n<p>组件内引入</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> VueVideoTape <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-tape'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">components:&#123;VueVideoTape&#125;,</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>因为项目中遇到了部分需求在网上并没有找到比较好的解决方案，所以决定自己实现。实现过后本着为劳苦大众做贡献的想法决定将其开源，顺便也学习一下开源的流程。</p>","more":"<blockquote>\n<p>至于网上这么多教程，我还要单独写一篇。因为我遇到了很多坑，搞了好几天才完整的弄好，为了下次发布npm包方便，所以记录一下。</p>\n</blockquote>\n<h2 id=\"准备npm\"><a href=\"#准备npm\" class=\"headerlink\" title=\"准备npm\"></a>准备npm</h2><ol>\n<li>首先需要到npm官网去注册，<a href=\"https://www.npmjs.com/\" title=\"npm官网\" target=\"_blank\" rel=\"noopener\">点这里去哦</a>。    </li>\n<li>然后在电脑上登录<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm login</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h2 id=\"项目准备\"><a href=\"#项目准备\" class=\"headerlink\" title=\"项目准备\"></a>项目准备</h2><p>这里我们使用的是vue项目，而且需要发布的包的功能也不复杂，所以我们选择使用<code>webpack-simple</code>搭建一个简易的<code>vue</code>项目，使用<code>vue@cli</code>搭建的脚手架对我们来说太臃肿了。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue init webpack-simple 项目名  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#然后会提示填写作者，项目名等信息，不想写就直接‘y’或者‘enter’</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> 项目文件</span><br><span class=\"line\"></span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<p><code>npm</code>下载完毕后就可以直接运行项目了</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n\n<p>此时项目的目录主要结构应该是如下这样的</p>\n<figure class=\"highlight gherkin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|<span class=\"string\">-src</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-assets</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-</span>|<span class=\"string\">-logo.png</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-App.vue</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-main.js</span></span><br><span class=\"line\">|<span class=\"string\">-index.html</span></span><br><span class=\"line\">|<span class=\"string\">-package.json</span></span><br><span class=\"line\">|<span class=\"string\">-webpack.config.js</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"项目开发\"><a href=\"#项目开发\" class=\"headerlink\" title=\"项目开发\"></a>项目开发</h2><p>可以先改造一下项目目录结构，下面是我改造后的，也可以根据自己的编码习惯改造，但是增加的两个<code>index.js</code>是比较关键的文件，不要漏掉了。</p>\n<figure class=\"highlight gherkin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|<span class=\"string\">-src</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-tape         //自定义文件夹</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-</span>|<span class=\"string\">-tape.vue   //自定义组件名</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-</span>|<span class=\"string\">-index.js   //注意这个文件</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-App.vue</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-main.js</span></span><br><span class=\"line\">|<span class=\"string\">-</span>|<span class=\"string\">-index.js     //注意这个文件</span></span><br><span class=\"line\">|<span class=\"string\">-index.html</span></span><br><span class=\"line\">|<span class=\"string\">-package.json</span></span><br><span class=\"line\">|<span class=\"string\">-webpack.config.js</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/09/18/封装VUE组件并发布到npm/目录结构.png\">\n\n<hr>\n<p>注意：<br>在编辑需要发布到npm的组件时（这里就是指<code>tape.vue</code>组件），务必要记得不能忽略<code>name</code>属性，这个涉及到后面组件导出的问题。</p>\n<h2 id=\"发布\"><a href=\"#发布\" class=\"headerlink\" title=\"发布\"></a>发布</h2><p>在实现了功能过后，我们可以利用<code>App.vue</code>来测试一下组件的功能</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">vueVideoTape</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">vueVideoTape</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> vueVideoTape <span class=\"keyword\">from</span> <span class=\"string\">'./tape/tape'</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span>  &#123;</span></span><br><span class=\"line\">    data()&#123;</span><br><span class=\"line\"><span class=\"actionscript\">        <span class=\"keyword\">return</span>&#123;&#125;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    components:&#123;</span><br><span class=\"line\">       vueVideoTape</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\tmethods:&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>经过测试没有问题后，就可以开始着手发布前的准备了，这里也是最麻烦的地方，很多的小细节要注意。</p>\n</blockquote>\n<p>首先要对组件的导出做处理，要实现其他人通过<code>npm install</code>下载后，可以全局引入，也可以组件内按需引入。也就是要实现下列这两个引用方式。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//全局引入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> tape <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-tape'</span>;</span><br><span class=\"line\">Vue.use(tape);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//组件内按需引入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;VueVideoTape&#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-tape'</span>;</span><br></pre></td></tr></table></figure>\n\n<p>与<code>tape.vue</code>同级<code>index.js</code>对组件导出做如下处理</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> VueVideoTape <span class=\"keyword\">from</span> <span class=\"string\">'./tape.vue'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//这里VueVideoTape.name就是组件中的name属性，所以正如前文提到到，name属性不可以忽略，必须要有</span></span><br><span class=\"line\">VueVideoTape.install = <span class=\"function\"><span class=\"params\">Vue</span> =&gt;</span> Vue.component(VueVideoTape.name, VueVideoTape);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> VueVideoTape;</span><br></pre></td></tr></table></figure>\n\n<p>与<code>main.js</code>同级的<code>index.js</code>对组件导出做如下处理</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//如果有多个导出的组件，在这里要引入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> VueVideoTape <span class=\"keyword\">from</span> <span class=\"string\">'./tape/index.js'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//如果引入多个组件，在这里都要注册</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> components = [</span><br><span class=\"line\">\tVueVideoTape,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> install = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">Vue, opts = &#123;&#125;</span>) </span>&#123;</span><br><span class=\"line\">  components.map(<span class=\"function\"><span class=\"params\">component</span> =&gt;</span> &#123;</span><br><span class=\"line\">    Vue.component(component.name, component);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">'undefined'</span> &amp;&amp; <span class=\"built_in\">window</span>.Vue) &#123;</span><br><span class=\"line\">  install(<span class=\"built_in\">window</span>.Vue);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//多个组件时，在这里要全部导出，install不可以忽略，全局引入时，vue会自动调用install</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  install,</span><br><span class=\"line\">  VueVideoTape,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//多个组件导出，这里依次导出，组件内按需引入时就是引入这里的组件</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123;</span><br><span class=\"line\">\tVueVideoTape</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<blockquote>\n<p>文件的导出处理完后，还需要对webpack的配置进行修改。    </p>\n</blockquote>\n<p>首先是对开发环境和生产环境的区分，生产环境就直接打包到<code>dist</code>文件夹。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">entry: NODE_ENV == <span class=\"string\">'development'</span> ? <span class=\"string\">'./src/main.js'</span> : <span class=\"string\">'./src/index.js'</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'./dist'</span>),<span class=\"comment\">//打包输出地址</span></span><br><span class=\"line\">    publicPath: <span class=\"string\">'/dist/'</span>,</span><br><span class=\"line\">    filename: <span class=\"string\">'vue-video-tape.js'</span>,<span class=\"comment\">//打包后文件名</span></span><br><span class=\"line\">    library:<span class=\"string\">'VueVideoTape'</span>,</span><br><span class=\"line\">\tlibraryTarget:<span class=\"string\">'umd'</span>,</span><br><span class=\"line\">\tumdNamedDefine: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>开发功能时候也会需要引入其他的<code>npm</code>包，但是我们打包发布的时候，要将这些引入的包排除，否则就会导致打包的文件会非常大，而且引入过后造成依赖重复，冗余非常严重。所以在生产环境的时候，我们要对打包的文件进行单独处理。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//在webpck.config.js最后加上下面的代码</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>.exports.devtool = <span class=\"string\">'#source-map'</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>.exports.plugins = (<span class=\"built_in\">module</span>.exports.plugins || []).concat([</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">      <span class=\"string\">'process.env'</span>: &#123;</span><br><span class=\"line\">        NODE_ENV: <span class=\"string\">'\"production\"'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class=\"line\">      sourceMap: <span class=\"literal\">false</span>,<span class=\"comment\">//这里改为false</span></span><br><span class=\"line\">      compress: &#123;</span><br><span class=\"line\">        warnings: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.LoaderOptionsPlugin(&#123;</span><br><span class=\"line\">      minimize: <span class=\"literal\">true</span></span><br><span class=\"line\">\t&#125;),</span><br><span class=\"line\">\t<span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class=\"line\">\t\tcompress: &#123;</span><br><span class=\"line\">\t\t  warnings: <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t  &#125;)</span><br><span class=\"line\">  ])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//这里是对组件内依赖的排除</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>.exports.externals = &#123;</span><br><span class=\"line\">\trecordrtc: &#123;</span><br><span class=\"line\">        commonjs: <span class=\"string\">'recordrtc'</span>,</span><br><span class=\"line\">        commonjs2: <span class=\"string\">'recordrtc'</span>,</span><br><span class=\"line\">        amd: <span class=\"string\">'recordrtc'</span>,</span><br><span class=\"line\">        root: <span class=\"string\">'_'</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"string\">'vue-video-player'</span>: &#123;</span><br><span class=\"line\">        commonjs: <span class=\"string\">'vue-video-player'</span>,</span><br><span class=\"line\">        commonjs2: <span class=\"string\">'vue-video-player'</span>,</span><br><span class=\"line\">        amd: <span class=\"string\">'vue-video-player'</span>,</span><br><span class=\"line\">        root: <span class=\"string\">'_'</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>webpack配置修改完后，还需要对package.json进行部分修改，主要涉及到几个发布npm包需要用到的关键属性。</p>\n<p><code>name</code>属性决定了<code>npm install</code>时候的名字</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"name\": \"vue-video-tape\",</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vue-video-tape</span><br></pre></td></tr></table></figure>\n\n<p><code>version</code>属性是发布的版本，<code>每次发布</code>都必须要对其进行修改，否则发布失败</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"version\": \"1.1.0\",</span><br></pre></td></tr></table></figure>\n\n<p><code>private</code>属性是决定是否开源，如果为<code>true</code>则发布不了</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"private\": false,</span><br></pre></td></tr></table></figure>\n\n<p><code>main</code>属性决定了当<code>import xxx from &#39;xxxxx&#39;</code>时，引入哪个文件</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"main\": \"dist/vue-video-tape.js\",</span><br></pre></td></tr></table></figure>\n\n<p>每次发布时我们都需要对项目进行打包，但是经常会忘记打包直接发布，导致发布的新版本是上一个版本，所以我们可以引入一个事件，在每次发布的前自动进行打包操作。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"scripts\": &#123;</span><br><span class=\"line\">    \"dev\": \"cross-env NODE_ENV=development webpack-dev-server --open --hot\",</span><br><span class=\"line\">    \"build\": \"cross-env NODE_ENV=production webpack --progress --hide-modules\",</span><br><span class=\"line\">    \"prepublishOnly\": \"npm run build\"</span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure>\n\n<p><code>files</code>属性指定当<code>npm install</code>时下载的文件，如下配置后，<code>npm install vue-video-tape</code>下载的包就只有dist文件夹和package.json文件，可以减少包的体积。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"files\": [</span><br><span class=\"line\">    \"dist\",</span><br><span class=\"line\">    <span class=\"string\">\"package.json\"</span></span><br><span class=\"line\">  ],</span><br></pre></td></tr></table></figure>\n\n<hr>\n<blockquote>\n<p>最后的最后，当一切准备就绪了，就可以执行发布命令了</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm publish</span><br></pre></td></tr></table></figure>\n\n<p>注意：可能会报错你的项目名字已经有了，这时候你需要去修改<code>package.json</code>文件中的<code>name</code>属性。     </p>\n<p>发布成功后，可以直接到npm官网上搜索你的包。</p>\n<h2 id=\"下载使用\"><a href=\"#下载使用\" class=\"headerlink\" title=\"下载使用\"></a>下载使用</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install 包名</span><br></pre></td></tr></table></figure>\n\n<p>全局引入</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> xxx <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-tape'</span>;</span><br><span class=\"line\">Vue.use(xxx);</span><br></pre></td></tr></table></figure>\n\n<p>组件内引入</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> VueVideoTape <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-tape'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">components:&#123;VueVideoTape&#125;,</span><br></pre></td></tr></table></figure>"},{"title":"服务器环境安装node","date":"2019-11-04T09:05:59.000Z","_content":"\n# 下载node\n\n前往[官网](https://nodejs.org/zh-cn/download/)下载Linux版的[二进制文件](https://nodejs.org/dist/v12.13.0/node-v12.13.0-linux-x64.tar.xz)。注意区别有两种后缀名不同的文件，一个是`.tar.xz`，另一个是`.tar.gz`。这里我使用的是`.tar.xz`。      \n\n复制好下载连接后到服务器存放下载文件的文件夹中下载：\n```bash\nwget https://nodejs.org/dist/v12.13.0/node-v12.13.0-linux-x64.tar.xz\n```\n\n# 安装\n\n先解压文件\n```bash\ntar xvf node-v12.13.0-linux-x64.tar.xz\n```\n\ncd到可执行node命令的目录中\n```bash\ncd node-v12.13.0-linux-x64/bin\n```\n\n测试是否安装好node\n```bash\n./node -v\n```\n如果看到了版本信息，则说明node已经安装好了。\n\n# 全局使用\n\nnode虽然安装好了，但是发现只能在刚才指定的文件夹中使用，实际开发中肯定需要在其他地方也可以使用node命令，这时候我们就需要把node命令用软链接的方式放到全局，保证在其他地方也可以使用node命令。\n```bash\nln 安装node包的局对地址/node-v12.13.0-linux-x64/bin/node /usr/bin/\n```\n\n目前我们只对node进行了软链接，接下来还需要对npm进行软链接\n```bash\nln 安装node包的局对地址/node-v12.13.0-linux-x64/bin/npm /usr/bin/\n```\n\n软链接成功后，可以在任意目录中使用`node -v`或者`npm -v`，如果看到了相应的版本信息，则表明node全局配置成功。\n","source":"_posts/服务器环境安装node.md","raw":"---\ntitle: 服务器环境安装node\ndate: 2019-11-04 17:05:59\ncategories: 服务器配置问题\n---\n\n# 下载node\n\n前往[官网](https://nodejs.org/zh-cn/download/)下载Linux版的[二进制文件](https://nodejs.org/dist/v12.13.0/node-v12.13.0-linux-x64.tar.xz)。注意区别有两种后缀名不同的文件，一个是`.tar.xz`，另一个是`.tar.gz`。这里我使用的是`.tar.xz`。      \n\n复制好下载连接后到服务器存放下载文件的文件夹中下载：\n```bash\nwget https://nodejs.org/dist/v12.13.0/node-v12.13.0-linux-x64.tar.xz\n```\n\n# 安装\n\n先解压文件\n```bash\ntar xvf node-v12.13.0-linux-x64.tar.xz\n```\n\ncd到可执行node命令的目录中\n```bash\ncd node-v12.13.0-linux-x64/bin\n```\n\n测试是否安装好node\n```bash\n./node -v\n```\n如果看到了版本信息，则说明node已经安装好了。\n\n# 全局使用\n\nnode虽然安装好了，但是发现只能在刚才指定的文件夹中使用，实际开发中肯定需要在其他地方也可以使用node命令，这时候我们就需要把node命令用软链接的方式放到全局，保证在其他地方也可以使用node命令。\n```bash\nln 安装node包的局对地址/node-v12.13.0-linux-x64/bin/node /usr/bin/\n```\n\n目前我们只对node进行了软链接，接下来还需要对npm进行软链接\n```bash\nln 安装node包的局对地址/node-v12.13.0-linux-x64/bin/npm /usr/bin/\n```\n\n软链接成功后，可以在任意目录中使用`node -v`或者`npm -v`，如果看到了相应的版本信息，则表明node全局配置成功。\n","slug":"服务器环境安装node","published":1,"updated":"2019-11-04T09:31:36.419Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28am000dfiyhwk1i77hg","content":"<h1 id=\"下载node\"><a href=\"#下载node\" class=\"headerlink\" title=\"下载node\"></a>下载node</h1><p>前往<a href=\"https://nodejs.org/zh-cn/download/\" target=\"_blank\" rel=\"noopener\">官网</a>下载Linux版的<a href=\"https://nodejs.org/dist/v12.13.0/node-v12.13.0-linux-x64.tar.xz\" target=\"_blank\" rel=\"noopener\">二进制文件</a>。注意区别有两种后缀名不同的文件，一个是<code>.tar.xz</code>，另一个是<code>.tar.gz</code>。这里我使用的是<code>.tar.xz</code>。      </p><a id=\"more\"></a>\n<p>复制好下载连接后到服务器存放下载文件的文件夹中下载：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://nodejs.org/dist/v12.13.0/node-v12.13.0-linux-x64.tar.xz</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>先解压文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xvf node-v12.13.0-linux-x64.tar.xz</span><br></pre></td></tr></table></figure>\n\n<p>cd到可执行node命令的目录中</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> node-v12.13.0-linux-x64/bin</span><br></pre></td></tr></table></figure>\n\n<p>测试是否安装好node</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./node -v</span><br></pre></td></tr></table></figure>\n\n<p>如果看到了版本信息，则说明node已经安装好了。</p>\n<h1 id=\"全局使用\"><a href=\"#全局使用\" class=\"headerlink\" title=\"全局使用\"></a>全局使用</h1><p>node虽然安装好了，但是发现只能在刚才指定的文件夹中使用，实际开发中肯定需要在其他地方也可以使用node命令，这时候我们就需要把node命令用软链接的方式放到全局，保证在其他地方也可以使用node命令。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln 安装node包的局对地址/node-v12.13.0-linux-x64/bin/node /usr/bin/</span><br></pre></td></tr></table></figure>\n\n<p>目前我们只对node进行了软链接，接下来还需要对npm进行软链接</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln 安装node包的局对地址/node-v12.13.0-linux-x64/bin/npm /usr/bin/</span><br></pre></td></tr></table></figure>\n\n<p>软链接成功后，可以在任意目录中使用<code>node -v</code>或者<code>npm -v</code>，如果看到了相应的版本信息，则表明node全局配置成功。</p>\n","site":{"data":{}},"excerpt":"<h1 id=\"下载node\"><a href=\"#下载node\" class=\"headerlink\" title=\"下载node\"></a>下载node</h1><p>前往<a href=\"https://nodejs.org/zh-cn/download/\" target=\"_blank\" rel=\"noopener\">官网</a>下载Linux版的<a href=\"https://nodejs.org/dist/v12.13.0/node-v12.13.0-linux-x64.tar.xz\" target=\"_blank\" rel=\"noopener\">二进制文件</a>。注意区别有两种后缀名不同的文件，一个是<code>.tar.xz</code>，另一个是<code>.tar.gz</code>。这里我使用的是<code>.tar.xz</code>。      </p>","more":"\n<p>复制好下载连接后到服务器存放下载文件的文件夹中下载：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://nodejs.org/dist/v12.13.0/node-v12.13.0-linux-x64.tar.xz</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>先解压文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xvf node-v12.13.0-linux-x64.tar.xz</span><br></pre></td></tr></table></figure>\n\n<p>cd到可执行node命令的目录中</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> node-v12.13.0-linux-x64/bin</span><br></pre></td></tr></table></figure>\n\n<p>测试是否安装好node</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./node -v</span><br></pre></td></tr></table></figure>\n\n<p>如果看到了版本信息，则说明node已经安装好了。</p>\n<h1 id=\"全局使用\"><a href=\"#全局使用\" class=\"headerlink\" title=\"全局使用\"></a>全局使用</h1><p>node虽然安装好了，但是发现只能在刚才指定的文件夹中使用，实际开发中肯定需要在其他地方也可以使用node命令，这时候我们就需要把node命令用软链接的方式放到全局，保证在其他地方也可以使用node命令。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln 安装node包的局对地址/node-v12.13.0-linux-x64/bin/node /usr/bin/</span><br></pre></td></tr></table></figure>\n\n<p>目前我们只对node进行了软链接，接下来还需要对npm进行软链接</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln 安装node包的局对地址/node-v12.13.0-linux-x64/bin/npm /usr/bin/</span><br></pre></td></tr></table></figure>\n\n<p>软链接成功后，可以在任意目录中使用<code>node -v</code>或者<code>npm -v</code>，如果看到了相应的版本信息，则表明node全局配置成功。</p>\n"},{"title":"流媒体协议的认识","date":"2019-11-28T02:22:22.000Z","_content":"\n>此文所有内容都是针对前端对流媒体协议的认识，服务端部分有待深入了解。\n\n# 为什么使用流媒体\n\n\n1. 如果用户想要观看网站（服务器）上的一个视频，如果采用下载视频文件才能观看视频的方法，一旦视频文件过大就是导致下载时间过长，用户体验极差。所以现在在网络上观看视频一般都会采用视频流的方式。通过网络不停的向用户传输视频数据，用户也可以直接开始播放视频。\n\n2. 另外一方面，现在的直播行业，安全监控行业都需要实时的看到当前设备录制的视频，这种情况基本也只能使用流媒体的方式。\n\n>推流：把采集内容传输到服务器的过程\n\n>拉流：从客户端获取服务器资源的过程\n\n# 流媒体协议\n\n当前使用的比较多的主要是RTMP、HTTP-FLV、HLS这三种协议，还有其他几种协议主要分别是：RTSP、DASH、webRTC、websocket。下面对各个协议在前端使用方面做一个了解：\n\n## RTMP\n\nRTMP协议是Adobe公司依赖flash提供的一个实时消息通信协议，该协议是通过tcp链接的，其主要优势就是低延迟，而且就目前了解到大部分的设备推流都是使用的RTMP的协议。但是因为使用RTMP拉流在前端浏览器播放的话必须使用flash插件，而当前浏览器厂商都在推动禁用flash，所以使用RTMP拉流在前端播放不是很优雅，而且由于移动端几乎没有flash，所以此协议在移动端浏览器几乎不能使用。\n\n## HTTP-FLV\n\nHTTP-FLV协议也是Adobe公司推出的，是基于上面RTMP协议的HTTP版本，这个协议是通过http链接的。该协议也具有RTPM的优点，延时很低，但是也有同样的问题就是依赖flash插件进行播放。现在经过前端的处理已经可以使用video标签进行播放了。据了解很多直播网站都是使用的此协议。\n\n## HLS\n\nHLS协议是Apple公司推出的视频流协议，与RTMP协议不同的是该协议采用视频切片然后发送给客户端的方式。也就是说客户端其实是接收到一个一个的视频小片段。这种方式目前在移动端有很好的兼容性，但是在pc端，目前只有Safari浏览器可以直接使用，其他的浏览器都需要经过转码处理。其优点就是可以自动码率，而且移动端的兼容性比较好，但是缺点很明显就是延迟比较高。\n\n## RTSP\n\nRTSP协议比较大的优势就是低延迟，所以很多市面上的监控摄像头等对实时性要求较高的场景都会使用RTSP，但是对于前端来说我们无法在浏览器直接使用RTSP协议的流，目前了解到的解决方案都是通过服务器端处理，要么转码，要么转为websocket来发送。\n\n## DASH\n\ndash协议是由谷歌推出的流媒体协议，该协议工作方式与HLS协议类似，都是通过视频切片的方式传输，延时比较高。因为有谷歌等几个大公司的推动，所以该协议在国外网站上使用比较多。由于该协议传输的视频切片是MP4、webm等格式，所以该协议在兼容性上非常好，理论上只要支持MP4格式的浏览器都可以使用。具体情况待测试。\n\n>其他协议因暂时没有使用到，还没有进行深入了解，后续学习后更新\n\n# 视频格式\n\n这里视频格式主要是指上面这些流媒体协议传输的视频格式，不是指所有的视频格式。\n\n## flv\n\n这种视频格式也是Adobe公司推出的，所以在前端来说基本上也就只有flash可以直接播放，如果想用video标签播放，需要经过转码处理。\n\nRTMP和HTTP-FLV协议传输的都是这种格式的视频，前端可以使用（flv.js）对HTTP-FLV的流做处理然后在video上播放，但是RTMP的流暂时没有解决方案只能使用flash。\n\n我们公司前端要求FLV的流指的是通过HTTP-FLV协议传输的流，不是指flv格式。\n\n## ts\n\nHLS协议传输的就是ts格式的视频切片，经过测试基本上在ps端浏览器只有Safari可以直接使用，在移动端基本上所有浏览器都可以使用。而pc端可以通过（video.js）等库来处理，基本上pc端的兼容性也不错。\n\n## MP4\n\n这个格式就不用多说了，video标签原生支持的，所以兼容性非常好。DASH协议也是传输的这种流。很多库处理ts格式或者flv格式的视频流都是通过转码成MP4格式然后再给video标签播放。\n\n# 总结\n\n|协议|传输格式|优势|劣势|\n|:-:|:-:|:-|:-|\n|RTMP|flv|延时低（3秒左右）|依赖flash\n|HTTP-FLV|flv|延时低（3秒左右）|需要转码\n|HLS|ts|兼容性比较好，自适应码率|延时高（8秒左右）\n|RTSP|ts,mp4|延时低|依赖flash|\n|DASH|mp4,3gp,webm|兼容非常好，自适应码率|延时高\n\n因为前端在播放流的时候往往不是单纯的播放，还有截图，暂停等需要JavaScript控制的交互，所以我们更愿意使用video播放，也就导致了目前延时最低、可以转码后使用video标签播放的HTTP-FLV协议是前端播放视频流比较好的解决方案。\n\n各个协议url格式：\n\nRTMP：rtmp://live.hkstv.hk.lxdns.com/live/hks\n\nHTTP-FLV: http://www.xxxxxx.com:18080/11/22.flv\n\nHLS: http://live.hkstv.hk.lxdns.com/live/hks/playlist.m3u8\n\n\n","source":"_posts/流媒体协议的认识.md","raw":"---\ntitle: 流媒体协议的认识\ndate: 2019-11-28 10:22:22\ncategories: 其他\n---\n\n>此文所有内容都是针对前端对流媒体协议的认识，服务端部分有待深入了解。\n\n# 为什么使用流媒体\n\n\n1. 如果用户想要观看网站（服务器）上的一个视频，如果采用下载视频文件才能观看视频的方法，一旦视频文件过大就是导致下载时间过长，用户体验极差。所以现在在网络上观看视频一般都会采用视频流的方式。通过网络不停的向用户传输视频数据，用户也可以直接开始播放视频。\n\n2. 另外一方面，现在的直播行业，安全监控行业都需要实时的看到当前设备录制的视频，这种情况基本也只能使用流媒体的方式。\n\n>推流：把采集内容传输到服务器的过程\n\n>拉流：从客户端获取服务器资源的过程\n\n# 流媒体协议\n\n当前使用的比较多的主要是RTMP、HTTP-FLV、HLS这三种协议，还有其他几种协议主要分别是：RTSP、DASH、webRTC、websocket。下面对各个协议在前端使用方面做一个了解：\n\n## RTMP\n\nRTMP协议是Adobe公司依赖flash提供的一个实时消息通信协议，该协议是通过tcp链接的，其主要优势就是低延迟，而且就目前了解到大部分的设备推流都是使用的RTMP的协议。但是因为使用RTMP拉流在前端浏览器播放的话必须使用flash插件，而当前浏览器厂商都在推动禁用flash，所以使用RTMP拉流在前端播放不是很优雅，而且由于移动端几乎没有flash，所以此协议在移动端浏览器几乎不能使用。\n\n## HTTP-FLV\n\nHTTP-FLV协议也是Adobe公司推出的，是基于上面RTMP协议的HTTP版本，这个协议是通过http链接的。该协议也具有RTPM的优点，延时很低，但是也有同样的问题就是依赖flash插件进行播放。现在经过前端的处理已经可以使用video标签进行播放了。据了解很多直播网站都是使用的此协议。\n\n## HLS\n\nHLS协议是Apple公司推出的视频流协议，与RTMP协议不同的是该协议采用视频切片然后发送给客户端的方式。也就是说客户端其实是接收到一个一个的视频小片段。这种方式目前在移动端有很好的兼容性，但是在pc端，目前只有Safari浏览器可以直接使用，其他的浏览器都需要经过转码处理。其优点就是可以自动码率，而且移动端的兼容性比较好，但是缺点很明显就是延迟比较高。\n\n## RTSP\n\nRTSP协议比较大的优势就是低延迟，所以很多市面上的监控摄像头等对实时性要求较高的场景都会使用RTSP，但是对于前端来说我们无法在浏览器直接使用RTSP协议的流，目前了解到的解决方案都是通过服务器端处理，要么转码，要么转为websocket来发送。\n\n## DASH\n\ndash协议是由谷歌推出的流媒体协议，该协议工作方式与HLS协议类似，都是通过视频切片的方式传输，延时比较高。因为有谷歌等几个大公司的推动，所以该协议在国外网站上使用比较多。由于该协议传输的视频切片是MP4、webm等格式，所以该协议在兼容性上非常好，理论上只要支持MP4格式的浏览器都可以使用。具体情况待测试。\n\n>其他协议因暂时没有使用到，还没有进行深入了解，后续学习后更新\n\n# 视频格式\n\n这里视频格式主要是指上面这些流媒体协议传输的视频格式，不是指所有的视频格式。\n\n## flv\n\n这种视频格式也是Adobe公司推出的，所以在前端来说基本上也就只有flash可以直接播放，如果想用video标签播放，需要经过转码处理。\n\nRTMP和HTTP-FLV协议传输的都是这种格式的视频，前端可以使用（flv.js）对HTTP-FLV的流做处理然后在video上播放，但是RTMP的流暂时没有解决方案只能使用flash。\n\n我们公司前端要求FLV的流指的是通过HTTP-FLV协议传输的流，不是指flv格式。\n\n## ts\n\nHLS协议传输的就是ts格式的视频切片，经过测试基本上在ps端浏览器只有Safari可以直接使用，在移动端基本上所有浏览器都可以使用。而pc端可以通过（video.js）等库来处理，基本上pc端的兼容性也不错。\n\n## MP4\n\n这个格式就不用多说了，video标签原生支持的，所以兼容性非常好。DASH协议也是传输的这种流。很多库处理ts格式或者flv格式的视频流都是通过转码成MP4格式然后再给video标签播放。\n\n# 总结\n\n|协议|传输格式|优势|劣势|\n|:-:|:-:|:-|:-|\n|RTMP|flv|延时低（3秒左右）|依赖flash\n|HTTP-FLV|flv|延时低（3秒左右）|需要转码\n|HLS|ts|兼容性比较好，自适应码率|延时高（8秒左右）\n|RTSP|ts,mp4|延时低|依赖flash|\n|DASH|mp4,3gp,webm|兼容非常好，自适应码率|延时高\n\n因为前端在播放流的时候往往不是单纯的播放，还有截图，暂停等需要JavaScript控制的交互，所以我们更愿意使用video播放，也就导致了目前延时最低、可以转码后使用video标签播放的HTTP-FLV协议是前端播放视频流比较好的解决方案。\n\n各个协议url格式：\n\nRTMP：rtmp://live.hkstv.hk.lxdns.com/live/hks\n\nHTTP-FLV: http://www.xxxxxx.com:18080/11/22.flv\n\nHLS: http://live.hkstv.hk.lxdns.com/live/hks/playlist.m3u8\n\n\n","slug":"流媒体协议的认识","published":1,"updated":"2019-11-28T07:08:56.976Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28ao000gfiyhi6rtke44","content":"<blockquote>\n<p>此文所有内容都是针对前端对流媒体协议的认识，服务端部分有待深入了解。</p>\n</blockquote><h1 id=\"为什么使用流媒体\"><a href=\"#为什么使用流媒体\" class=\"headerlink\" title=\"为什么使用流媒体\"></a>为什么使用流媒体</h1><ol>\n<li><p>如果用户想要观看网站（服务器）上的一个视频，如果采用下载视频文件才能观看视频的方法，一旦视频文件过大就是导致下载时间过长，用户体验极差。所以现在在网络上观看视频一般都会采用视频流的方式。通过网络不停的向用户传输视频数据，用户也可以直接开始播放视频。</p>\n</li>\n<li><p>另外一方面，现在的直播行业，安全监控行业都需要实时的看到当前设备录制的视频，这种情况基本也只能使用流媒体的方式。</p>\n</li>\n</ol><a id=\"more\"></a>\n\n<blockquote>\n<p>推流：把采集内容传输到服务器的过程</p>\n</blockquote>\n<blockquote>\n<p>拉流：从客户端获取服务器资源的过程</p>\n</blockquote>\n<h1 id=\"流媒体协议\"><a href=\"#流媒体协议\" class=\"headerlink\" title=\"流媒体协议\"></a>流媒体协议</h1><p>当前使用的比较多的主要是RTMP、HTTP-FLV、HLS这三种协议，还有其他几种协议主要分别是：RTSP、DASH、webRTC、websocket。下面对各个协议在前端使用方面做一个了解：</p>\n<h2 id=\"RTMP\"><a href=\"#RTMP\" class=\"headerlink\" title=\"RTMP\"></a>RTMP</h2><p>RTMP协议是Adobe公司依赖flash提供的一个实时消息通信协议，该协议是通过tcp链接的，其主要优势就是低延迟，而且就目前了解到大部分的设备推流都是使用的RTMP的协议。但是因为使用RTMP拉流在前端浏览器播放的话必须使用flash插件，而当前浏览器厂商都在推动禁用flash，所以使用RTMP拉流在前端播放不是很优雅，而且由于移动端几乎没有flash，所以此协议在移动端浏览器几乎不能使用。</p>\n<h2 id=\"HTTP-FLV\"><a href=\"#HTTP-FLV\" class=\"headerlink\" title=\"HTTP-FLV\"></a>HTTP-FLV</h2><p>HTTP-FLV协议也是Adobe公司推出的，是基于上面RTMP协议的HTTP版本，这个协议是通过http链接的。该协议也具有RTPM的优点，延时很低，但是也有同样的问题就是依赖flash插件进行播放。现在经过前端的处理已经可以使用video标签进行播放了。据了解很多直播网站都是使用的此协议。</p>\n<h2 id=\"HLS\"><a href=\"#HLS\" class=\"headerlink\" title=\"HLS\"></a>HLS</h2><p>HLS协议是Apple公司推出的视频流协议，与RTMP协议不同的是该协议采用视频切片然后发送给客户端的方式。也就是说客户端其实是接收到一个一个的视频小片段。这种方式目前在移动端有很好的兼容性，但是在pc端，目前只有Safari浏览器可以直接使用，其他的浏览器都需要经过转码处理。其优点就是可以自动码率，而且移动端的兼容性比较好，但是缺点很明显就是延迟比较高。</p>\n<h2 id=\"RTSP\"><a href=\"#RTSP\" class=\"headerlink\" title=\"RTSP\"></a>RTSP</h2><p>RTSP协议比较大的优势就是低延迟，所以很多市面上的监控摄像头等对实时性要求较高的场景都会使用RTSP，但是对于前端来说我们无法在浏览器直接使用RTSP协议的流，目前了解到的解决方案都是通过服务器端处理，要么转码，要么转为websocket来发送。</p>\n<h2 id=\"DASH\"><a href=\"#DASH\" class=\"headerlink\" title=\"DASH\"></a>DASH</h2><p>dash协议是由谷歌推出的流媒体协议，该协议工作方式与HLS协议类似，都是通过视频切片的方式传输，延时比较高。因为有谷歌等几个大公司的推动，所以该协议在国外网站上使用比较多。由于该协议传输的视频切片是MP4、webm等格式，所以该协议在兼容性上非常好，理论上只要支持MP4格式的浏览器都可以使用。具体情况待测试。</p>\n<blockquote>\n<p>其他协议因暂时没有使用到，还没有进行深入了解，后续学习后更新</p>\n</blockquote>\n<h1 id=\"视频格式\"><a href=\"#视频格式\" class=\"headerlink\" title=\"视频格式\"></a>视频格式</h1><p>这里视频格式主要是指上面这些流媒体协议传输的视频格式，不是指所有的视频格式。</p>\n<h2 id=\"flv\"><a href=\"#flv\" class=\"headerlink\" title=\"flv\"></a>flv</h2><p>这种视频格式也是Adobe公司推出的，所以在前端来说基本上也就只有flash可以直接播放，如果想用video标签播放，需要经过转码处理。</p>\n<p>RTMP和HTTP-FLV协议传输的都是这种格式的视频，前端可以使用（flv.js）对HTTP-FLV的流做处理然后在video上播放，但是RTMP的流暂时没有解决方案只能使用flash。</p>\n<p>我们公司前端要求FLV的流指的是通过HTTP-FLV协议传输的流，不是指flv格式。</p>\n<h2 id=\"ts\"><a href=\"#ts\" class=\"headerlink\" title=\"ts\"></a>ts</h2><p>HLS协议传输的就是ts格式的视频切片，经过测试基本上在ps端浏览器只有Safari可以直接使用，在移动端基本上所有浏览器都可以使用。而pc端可以通过（video.js）等库来处理，基本上pc端的兼容性也不错。</p>\n<h2 id=\"MP4\"><a href=\"#MP4\" class=\"headerlink\" title=\"MP4\"></a>MP4</h2><p>这个格式就不用多说了，video标签原生支持的，所以兼容性非常好。DASH协议也是传输的这种流。很多库处理ts格式或者flv格式的视频流都是通过转码成MP4格式然后再给video标签播放。</p>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><table>\n<thead>\n<tr>\n<th align=\"center\">协议</th>\n<th align=\"center\">传输格式</th>\n<th align=\"left\">优势</th>\n<th align=\"left\">劣势</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">RTMP</td>\n<td align=\"center\">flv</td>\n<td align=\"left\">延时低（3秒左右）</td>\n<td align=\"left\">依赖flash</td>\n</tr>\n<tr>\n<td align=\"center\">HTTP-FLV</td>\n<td align=\"center\">flv</td>\n<td align=\"left\">延时低（3秒左右）</td>\n<td align=\"left\">需要转码</td>\n</tr>\n<tr>\n<td align=\"center\">HLS</td>\n<td align=\"center\">ts</td>\n<td align=\"left\">兼容性比较好，自适应码率</td>\n<td align=\"left\">延时高（8秒左右）</td>\n</tr>\n<tr>\n<td align=\"center\">RTSP</td>\n<td align=\"center\">ts,mp4</td>\n<td align=\"left\">延时低</td>\n<td align=\"left\">依赖flash</td>\n</tr>\n<tr>\n<td align=\"center\">DASH</td>\n<td align=\"center\">mp4,3gp,webm</td>\n<td align=\"left\">兼容非常好，自适应码率</td>\n<td align=\"left\">延时高</td>\n</tr>\n</tbody></table>\n<p>因为前端在播放流的时候往往不是单纯的播放，还有截图，暂停等需要JavaScript控制的交互，所以我们更愿意使用video播放，也就导致了目前延时最低、可以转码后使用video标签播放的HTTP-FLV协议是前端播放视频流比较好的解决方案。</p>\n<p>各个协议url格式：</p>\n<p>RTMP：rtmp://live.hkstv.hk.lxdns.com/live/hks</p>\n<p>HTTP-FLV: <a href=\"http://www.xxxxxx.com:18080/11/22.flv\" target=\"_blank\" rel=\"noopener\">http://www.xxxxxx.com:18080/11/22.flv</a></p>\n<p>HLS: <a href=\"http://live.hkstv.hk.lxdns.com/live/hks/playlist.m3u8\" target=\"_blank\" rel=\"noopener\">http://live.hkstv.hk.lxdns.com/live/hks/playlist.m3u8</a></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>此文所有内容都是针对前端对流媒体协议的认识，服务端部分有待深入了解。</p>\n</blockquote><h1 id=\"为什么使用流媒体\"><a href=\"#为什么使用流媒体\" class=\"headerlink\" title=\"为什么使用流媒体\"></a>为什么使用流媒体</h1><ol>\n<li><p>如果用户想要观看网站（服务器）上的一个视频，如果采用下载视频文件才能观看视频的方法，一旦视频文件过大就是导致下载时间过长，用户体验极差。所以现在在网络上观看视频一般都会采用视频流的方式。通过网络不停的向用户传输视频数据，用户也可以直接开始播放视频。</p>\n</li>\n<li><p>另外一方面，现在的直播行业，安全监控行业都需要实时的看到当前设备录制的视频，这种情况基本也只能使用流媒体的方式。</p>\n</li>\n</ol>","more":"\n\n<blockquote>\n<p>推流：把采集内容传输到服务器的过程</p>\n</blockquote>\n<blockquote>\n<p>拉流：从客户端获取服务器资源的过程</p>\n</blockquote>\n<h1 id=\"流媒体协议\"><a href=\"#流媒体协议\" class=\"headerlink\" title=\"流媒体协议\"></a>流媒体协议</h1><p>当前使用的比较多的主要是RTMP、HTTP-FLV、HLS这三种协议，还有其他几种协议主要分别是：RTSP、DASH、webRTC、websocket。下面对各个协议在前端使用方面做一个了解：</p>\n<h2 id=\"RTMP\"><a href=\"#RTMP\" class=\"headerlink\" title=\"RTMP\"></a>RTMP</h2><p>RTMP协议是Adobe公司依赖flash提供的一个实时消息通信协议，该协议是通过tcp链接的，其主要优势就是低延迟，而且就目前了解到大部分的设备推流都是使用的RTMP的协议。但是因为使用RTMP拉流在前端浏览器播放的话必须使用flash插件，而当前浏览器厂商都在推动禁用flash，所以使用RTMP拉流在前端播放不是很优雅，而且由于移动端几乎没有flash，所以此协议在移动端浏览器几乎不能使用。</p>\n<h2 id=\"HTTP-FLV\"><a href=\"#HTTP-FLV\" class=\"headerlink\" title=\"HTTP-FLV\"></a>HTTP-FLV</h2><p>HTTP-FLV协议也是Adobe公司推出的，是基于上面RTMP协议的HTTP版本，这个协议是通过http链接的。该协议也具有RTPM的优点，延时很低，但是也有同样的问题就是依赖flash插件进行播放。现在经过前端的处理已经可以使用video标签进行播放了。据了解很多直播网站都是使用的此协议。</p>\n<h2 id=\"HLS\"><a href=\"#HLS\" class=\"headerlink\" title=\"HLS\"></a>HLS</h2><p>HLS协议是Apple公司推出的视频流协议，与RTMP协议不同的是该协议采用视频切片然后发送给客户端的方式。也就是说客户端其实是接收到一个一个的视频小片段。这种方式目前在移动端有很好的兼容性，但是在pc端，目前只有Safari浏览器可以直接使用，其他的浏览器都需要经过转码处理。其优点就是可以自动码率，而且移动端的兼容性比较好，但是缺点很明显就是延迟比较高。</p>\n<h2 id=\"RTSP\"><a href=\"#RTSP\" class=\"headerlink\" title=\"RTSP\"></a>RTSP</h2><p>RTSP协议比较大的优势就是低延迟，所以很多市面上的监控摄像头等对实时性要求较高的场景都会使用RTSP，但是对于前端来说我们无法在浏览器直接使用RTSP协议的流，目前了解到的解决方案都是通过服务器端处理，要么转码，要么转为websocket来发送。</p>\n<h2 id=\"DASH\"><a href=\"#DASH\" class=\"headerlink\" title=\"DASH\"></a>DASH</h2><p>dash协议是由谷歌推出的流媒体协议，该协议工作方式与HLS协议类似，都是通过视频切片的方式传输，延时比较高。因为有谷歌等几个大公司的推动，所以该协议在国外网站上使用比较多。由于该协议传输的视频切片是MP4、webm等格式，所以该协议在兼容性上非常好，理论上只要支持MP4格式的浏览器都可以使用。具体情况待测试。</p>\n<blockquote>\n<p>其他协议因暂时没有使用到，还没有进行深入了解，后续学习后更新</p>\n</blockquote>\n<h1 id=\"视频格式\"><a href=\"#视频格式\" class=\"headerlink\" title=\"视频格式\"></a>视频格式</h1><p>这里视频格式主要是指上面这些流媒体协议传输的视频格式，不是指所有的视频格式。</p>\n<h2 id=\"flv\"><a href=\"#flv\" class=\"headerlink\" title=\"flv\"></a>flv</h2><p>这种视频格式也是Adobe公司推出的，所以在前端来说基本上也就只有flash可以直接播放，如果想用video标签播放，需要经过转码处理。</p>\n<p>RTMP和HTTP-FLV协议传输的都是这种格式的视频，前端可以使用（flv.js）对HTTP-FLV的流做处理然后在video上播放，但是RTMP的流暂时没有解决方案只能使用flash。</p>\n<p>我们公司前端要求FLV的流指的是通过HTTP-FLV协议传输的流，不是指flv格式。</p>\n<h2 id=\"ts\"><a href=\"#ts\" class=\"headerlink\" title=\"ts\"></a>ts</h2><p>HLS协议传输的就是ts格式的视频切片，经过测试基本上在ps端浏览器只有Safari可以直接使用，在移动端基本上所有浏览器都可以使用。而pc端可以通过（video.js）等库来处理，基本上pc端的兼容性也不错。</p>\n<h2 id=\"MP4\"><a href=\"#MP4\" class=\"headerlink\" title=\"MP4\"></a>MP4</h2><p>这个格式就不用多说了，video标签原生支持的，所以兼容性非常好。DASH协议也是传输的这种流。很多库处理ts格式或者flv格式的视频流都是通过转码成MP4格式然后再给video标签播放。</p>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><table>\n<thead>\n<tr>\n<th align=\"center\">协议</th>\n<th align=\"center\">传输格式</th>\n<th align=\"left\">优势</th>\n<th align=\"left\">劣势</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">RTMP</td>\n<td align=\"center\">flv</td>\n<td align=\"left\">延时低（3秒左右）</td>\n<td align=\"left\">依赖flash</td>\n</tr>\n<tr>\n<td align=\"center\">HTTP-FLV</td>\n<td align=\"center\">flv</td>\n<td align=\"left\">延时低（3秒左右）</td>\n<td align=\"left\">需要转码</td>\n</tr>\n<tr>\n<td align=\"center\">HLS</td>\n<td align=\"center\">ts</td>\n<td align=\"left\">兼容性比较好，自适应码率</td>\n<td align=\"left\">延时高（8秒左右）</td>\n</tr>\n<tr>\n<td align=\"center\">RTSP</td>\n<td align=\"center\">ts,mp4</td>\n<td align=\"left\">延时低</td>\n<td align=\"left\">依赖flash</td>\n</tr>\n<tr>\n<td align=\"center\">DASH</td>\n<td align=\"center\">mp4,3gp,webm</td>\n<td align=\"left\">兼容非常好，自适应码率</td>\n<td align=\"left\">延时高</td>\n</tr>\n</tbody></table>\n<p>因为前端在播放流的时候往往不是单纯的播放，还有截图，暂停等需要JavaScript控制的交互，所以我们更愿意使用video播放，也就导致了目前延时最低、可以转码后使用video标签播放的HTTP-FLV协议是前端播放视频流比较好的解决方案。</p>\n<p>各个协议url格式：</p>\n<p>RTMP：rtmp://live.hkstv.hk.lxdns.com/live/hks</p>\n<p>HTTP-FLV: <a href=\"http://www.xxxxxx.com:18080/11/22.flv\" target=\"_blank\" rel=\"noopener\">http://www.xxxxxx.com:18080/11/22.flv</a></p>\n<p>HLS: <a href=\"http://live.hkstv.hk.lxdns.com/live/hks/playlist.m3u8\" target=\"_blank\" rel=\"noopener\">http://live.hkstv.hk.lxdns.com/live/hks/playlist.m3u8</a></p>\n"},{"title":"理解同源策略","date":"2019-10-18T01:53:35.000Z","_content":"\n# 何为同源\n\n两个页面的协议、域名、端口都相同的情况下，这两个页面就属于同源。    \n\n1. 协议一般是`http`或者`http`;\n\n2. 域名一般表现为`www.baidu.com`；\n\n2. 端口在域名后面加上`:4000`，表示4000端口，如果没有注明端口，则表示默认端口。`http`默认端口为`80`，`https`默认端口为`443`;\n\n>举例：现有一个页面连接为：`https://www.baidu.com`，以下几种情况来区分是否同源。    \n1. `http://www.baidu.com`，不同源，协议不同，一个是`https`另一个是`http`；\n\n2. `https://www.alibaba.com`，不同源，域名不同，一个是`www.baidu.com`另一个是\n`www.alibaba.com`；\n3. `https://www.baidu.com:9527`，不同源，端口不同，一个是`443`另一个是`9527`;\n\n4. `https://www.baidu.com/s`，同源，端口、域名、协议都相同，不同的是路径；\n\n# 何为同源策略\n\n以下为个人总结，如有出入望指出。\n\n1. 禁止不同源之间进行DOM操作；\n\n2. 禁止不同源之间进行AJAX请求；\n\n3. 禁止不同源之间进行读写localStorage和IndexedDB；\n\n>注意：禁止AJAX实际上是浏览器禁止读取响应内容，而不是禁止请求，注意区分。\n\n# 为什么使用同源策略\n\n从大的方面来说肯定是为了用户的信息安全，但是具体如果不使用同源策略会导致什么安全问题呢？分别针对3条规则举例说明：\n\n1. 如果允许跨源操作DOM，假设我有个网站是`https://www.xiaotaotao.vip`，我在我的网站里面使用`iframe`嵌入了一个银行的网站，如果你没注意到url的不同直接输入了你的银行密码，那么我就可以操作银行网站的输入框（操作DOM）就可以获取到你的密码了。\n\n2. 如果允许跨源进行AJAX请求，假设我在自己的网站`https://www.xiaotaotao.vip`写一个音乐播放页面，然后所有的歌曲都可以去调用QQ音乐的接口，导致别人的服务直接被我接入。（该策略应该是针对用户信息安全的，但是我个人目前没有发现或者想到因为AJAX跨源访问导致用户信息泄漏的情况，以后了解了再补充）。\n\n3. 如果允许跨源对localStorage或者IndexDB进行读写，那么就会导致恶意网站在任何时候都可以去读取你存在loalStorage里面的个人数据。\n\n# 为什么要跨域\n\n在前端领域`跨域`这个词语可谓老生常谈，前面我们知道了同源策略是一个非常好的协议，几乎所有的浏览器都遵守这份协议（IE很调皮，它有点不一样），而且这份同源协议对用户的信息安全也是非常的重要，那我们为什么要经常讨论要去跨域呢？\n\n1. 当前开发处于前后段分离的大环境下，这样开发的优势这里不讨论，但是其中有一个问题几乎每个项目都会遇到的。后端的小伙伴开发好接口部署到服务器，前端的小伙伴开发好页面去调用接口进行测试。前后端的代码都部署在生产环境一般也没问题，问题就在于前端在本地进行开发测试的时候需要调用服务器上的后端接口，`本地运行的前端代码`和`服务器上运行的后端接口`必然属于两个不同个的源，所以导致本地处于开发模式的前端代码无法调用服务器上后端的接口。\n\n2. 在很多图片的服务中，经常会出现图片等静态资源会单独存放在一个服务器，然后其他的源去这个静态资源服务器请求图片。图片资源跨域访问后再使用`canvas`处理，最后使用`getImageData()或者toDataUrl()`方法操作图片，这是就会出现跨域问题。`img`标签本身是可以跨域的，但是后续对图片处理的方法会导致跨域，此时就需要设置允许图片服务的跨域。\n\n>跨域应用场景很多，后面补充\n\n# 如何跨域\n\n跨域的方式有很多，主要分为几个方面，分别是利用可以跨域的html标签、针对跨域的Api、nginx反向代理。\n\n1. 一般大家说到的`JSONP`跨域就是利用`<script>`标签可以跨域的特性进行跨域访问。具体的操作就是前端用js创建一个script标签，然后`src`属性中写上需要访问的接口路径和参数就可以了，然后后端返回一段js代码，这段代码会自动执行，从而完成整个跨域的过程。（表示没有用过，听着就很麻烦！）\n\n2. 还有部分可以越过同源策略的Api，例如document.domin、window.name、window.postMessage();\n\t* document.domin只能用在同一协议，同一端口，不同域名的父子域之间,将两个页面的`document.domin`设置为同一个值后，子域就可以访问父域文档信息。具体操作见[文档](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/domain);\n\n\t* window.name比较简单，在同一个窗口下，无论该窗口访问了哪些源，只要该窗口没有被关闭，则每个页面的`window.name`都是相通的。可以利用此特性在不同源之间进行简单的传值；\n\n\t* window.postMessage()方法需要在页面中指定你需要发送`什么信息`到`哪个源`,然后去目的源就可以就可以获取数据了。具体的使用方法见[文档](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage)\n\n3. 前面说的这些跨域方法用起来都不太爽，JSONP只能用于GET请求，使用Api跨域要么只能传递字符串，要么只能传递简单的结构，而且还要受到数据大小的限制，所以在开发中最爽的跨域方法还是使用nginx反响代理。主要的实现原理就是利用服务器去目的源获取数据，然后把数据返回给前端，前端和目的源之间就没有直接联系了，也就不存在跨域问题了。\n\n>参考资料   \n[https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html](https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html)  \n[https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy](https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy)    \n[https://juejin.im/post/5ba1d4fe6fb9a05ce873d4ad#heading-18](https://juejin.im/post/5ba1d4fe6fb9a05ce873d4ad#heading-18)\n","source":"_posts/理解同源策略.md","raw":"---\ntitle: 理解同源策略\ndate: 2019-10-18 09:53:35\ncategories: http\n---\n\n# 何为同源\n\n两个页面的协议、域名、端口都相同的情况下，这两个页面就属于同源。    \n\n1. 协议一般是`http`或者`http`;\n\n2. 域名一般表现为`www.baidu.com`；\n\n2. 端口在域名后面加上`:4000`，表示4000端口，如果没有注明端口，则表示默认端口。`http`默认端口为`80`，`https`默认端口为`443`;\n\n>举例：现有一个页面连接为：`https://www.baidu.com`，以下几种情况来区分是否同源。    \n1. `http://www.baidu.com`，不同源，协议不同，一个是`https`另一个是`http`；\n\n2. `https://www.alibaba.com`，不同源，域名不同，一个是`www.baidu.com`另一个是\n`www.alibaba.com`；\n3. `https://www.baidu.com:9527`，不同源，端口不同，一个是`443`另一个是`9527`;\n\n4. `https://www.baidu.com/s`，同源，端口、域名、协议都相同，不同的是路径；\n\n# 何为同源策略\n\n以下为个人总结，如有出入望指出。\n\n1. 禁止不同源之间进行DOM操作；\n\n2. 禁止不同源之间进行AJAX请求；\n\n3. 禁止不同源之间进行读写localStorage和IndexedDB；\n\n>注意：禁止AJAX实际上是浏览器禁止读取响应内容，而不是禁止请求，注意区分。\n\n# 为什么使用同源策略\n\n从大的方面来说肯定是为了用户的信息安全，但是具体如果不使用同源策略会导致什么安全问题呢？分别针对3条规则举例说明：\n\n1. 如果允许跨源操作DOM，假设我有个网站是`https://www.xiaotaotao.vip`，我在我的网站里面使用`iframe`嵌入了一个银行的网站，如果你没注意到url的不同直接输入了你的银行密码，那么我就可以操作银行网站的输入框（操作DOM）就可以获取到你的密码了。\n\n2. 如果允许跨源进行AJAX请求，假设我在自己的网站`https://www.xiaotaotao.vip`写一个音乐播放页面，然后所有的歌曲都可以去调用QQ音乐的接口，导致别人的服务直接被我接入。（该策略应该是针对用户信息安全的，但是我个人目前没有发现或者想到因为AJAX跨源访问导致用户信息泄漏的情况，以后了解了再补充）。\n\n3. 如果允许跨源对localStorage或者IndexDB进行读写，那么就会导致恶意网站在任何时候都可以去读取你存在loalStorage里面的个人数据。\n\n# 为什么要跨域\n\n在前端领域`跨域`这个词语可谓老生常谈，前面我们知道了同源策略是一个非常好的协议，几乎所有的浏览器都遵守这份协议（IE很调皮，它有点不一样），而且这份同源协议对用户的信息安全也是非常的重要，那我们为什么要经常讨论要去跨域呢？\n\n1. 当前开发处于前后段分离的大环境下，这样开发的优势这里不讨论，但是其中有一个问题几乎每个项目都会遇到的。后端的小伙伴开发好接口部署到服务器，前端的小伙伴开发好页面去调用接口进行测试。前后端的代码都部署在生产环境一般也没问题，问题就在于前端在本地进行开发测试的时候需要调用服务器上的后端接口，`本地运行的前端代码`和`服务器上运行的后端接口`必然属于两个不同个的源，所以导致本地处于开发模式的前端代码无法调用服务器上后端的接口。\n\n2. 在很多图片的服务中，经常会出现图片等静态资源会单独存放在一个服务器，然后其他的源去这个静态资源服务器请求图片。图片资源跨域访问后再使用`canvas`处理，最后使用`getImageData()或者toDataUrl()`方法操作图片，这是就会出现跨域问题。`img`标签本身是可以跨域的，但是后续对图片处理的方法会导致跨域，此时就需要设置允许图片服务的跨域。\n\n>跨域应用场景很多，后面补充\n\n# 如何跨域\n\n跨域的方式有很多，主要分为几个方面，分别是利用可以跨域的html标签、针对跨域的Api、nginx反向代理。\n\n1. 一般大家说到的`JSONP`跨域就是利用`<script>`标签可以跨域的特性进行跨域访问。具体的操作就是前端用js创建一个script标签，然后`src`属性中写上需要访问的接口路径和参数就可以了，然后后端返回一段js代码，这段代码会自动执行，从而完成整个跨域的过程。（表示没有用过，听着就很麻烦！）\n\n2. 还有部分可以越过同源策略的Api，例如document.domin、window.name、window.postMessage();\n\t* document.domin只能用在同一协议，同一端口，不同域名的父子域之间,将两个页面的`document.domin`设置为同一个值后，子域就可以访问父域文档信息。具体操作见[文档](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/domain);\n\n\t* window.name比较简单，在同一个窗口下，无论该窗口访问了哪些源，只要该窗口没有被关闭，则每个页面的`window.name`都是相通的。可以利用此特性在不同源之间进行简单的传值；\n\n\t* window.postMessage()方法需要在页面中指定你需要发送`什么信息`到`哪个源`,然后去目的源就可以就可以获取数据了。具体的使用方法见[文档](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage)\n\n3. 前面说的这些跨域方法用起来都不太爽，JSONP只能用于GET请求，使用Api跨域要么只能传递字符串，要么只能传递简单的结构，而且还要受到数据大小的限制，所以在开发中最爽的跨域方法还是使用nginx反响代理。主要的实现原理就是利用服务器去目的源获取数据，然后把数据返回给前端，前端和目的源之间就没有直接联系了，也就不存在跨域问题了。\n\n>参考资料   \n[https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html](https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html)  \n[https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy](https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy)    \n[https://juejin.im/post/5ba1d4fe6fb9a05ce873d4ad#heading-18](https://juejin.im/post/5ba1d4fe6fb9a05ce873d4ad#heading-18)\n","slug":"理解同源策略","published":1,"updated":"2019-10-18T07:38:21.293Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28ap000ifiyhnst1hktj","content":"<h1 id=\"何为同源\"><a href=\"#何为同源\" class=\"headerlink\" title=\"何为同源\"></a>何为同源</h1><p>两个页面的协议、域名、端口都相同的情况下，这两个页面就属于同源。    </p><ol>\n<li><p>协议一般是<code>http</code>或者<code>http</code>;</p>\n</li>\n<li><p>域名一般表现为<code>www.baidu.com</code>；</p>\n</li>\n<li><p>端口在域名后面加上<code>:4000</code>，表示4000端口，如果没有注明端口，则表示默认端口。<code>http</code>默认端口为<code>80</code>，<code>https</code>默认端口为<code>443</code>;</p>\n</li>\n</ol><a id=\"more\"></a>\n\n<blockquote>\n<p>举例：现有一个页面连接为：<code>https://www.baidu.com</code>，以下几种情况来区分是否同源。    </p>\n<ol>\n<li><code>http://www.baidu.com</code>，不同源，协议不同，一个是<code>https</code>另一个是<code>http</code>；</li>\n</ol>\n</blockquote>\n<ol start=\"2\">\n<li><p><code>https://www.alibaba.com</code>，不同源，域名不同，一个是<code>www.baidu.com</code>另一个是<br><code>www.alibaba.com</code>；</p>\n</li>\n<li><p><code>https://www.baidu.com:9527</code>，不同源，端口不同，一个是<code>443</code>另一个是<code>9527</code>;</p>\n</li>\n<li><p><code>https://www.baidu.com/s</code>，同源，端口、域名、协议都相同，不同的是路径；</p>\n</li>\n</ol>\n<h1 id=\"何为同源策略\"><a href=\"#何为同源策略\" class=\"headerlink\" title=\"何为同源策略\"></a>何为同源策略</h1><p>以下为个人总结，如有出入望指出。</p>\n<ol>\n<li><p>禁止不同源之间进行DOM操作；</p>\n</li>\n<li><p>禁止不同源之间进行AJAX请求；</p>\n</li>\n<li><p>禁止不同源之间进行读写localStorage和IndexedDB；</p>\n</li>\n</ol>\n<blockquote>\n<p>注意：禁止AJAX实际上是浏览器禁止读取响应内容，而不是禁止请求，注意区分。</p>\n</blockquote>\n<h1 id=\"为什么使用同源策略\"><a href=\"#为什么使用同源策略\" class=\"headerlink\" title=\"为什么使用同源策略\"></a>为什么使用同源策略</h1><p>从大的方面来说肯定是为了用户的信息安全，但是具体如果不使用同源策略会导致什么安全问题呢？分别针对3条规则举例说明：</p>\n<ol>\n<li><p>如果允许跨源操作DOM，假设我有个网站是<code>https://www.xiaotaotao.vip</code>，我在我的网站里面使用<code>iframe</code>嵌入了一个银行的网站，如果你没注意到url的不同直接输入了你的银行密码，那么我就可以操作银行网站的输入框（操作DOM）就可以获取到你的密码了。</p>\n</li>\n<li><p>如果允许跨源进行AJAX请求，假设我在自己的网站<code>https://www.xiaotaotao.vip</code>写一个音乐播放页面，然后所有的歌曲都可以去调用QQ音乐的接口，导致别人的服务直接被我接入。（该策略应该是针对用户信息安全的，但是我个人目前没有发现或者想到因为AJAX跨源访问导致用户信息泄漏的情况，以后了解了再补充）。</p>\n</li>\n<li><p>如果允许跨源对localStorage或者IndexDB进行读写，那么就会导致恶意网站在任何时候都可以去读取你存在loalStorage里面的个人数据。</p>\n</li>\n</ol>\n<h1 id=\"为什么要跨域\"><a href=\"#为什么要跨域\" class=\"headerlink\" title=\"为什么要跨域\"></a>为什么要跨域</h1><p>在前端领域<code>跨域</code>这个词语可谓老生常谈，前面我们知道了同源策略是一个非常好的协议，几乎所有的浏览器都遵守这份协议（IE很调皮，它有点不一样），而且这份同源协议对用户的信息安全也是非常的重要，那我们为什么要经常讨论要去跨域呢？</p>\n<ol>\n<li><p>当前开发处于前后段分离的大环境下，这样开发的优势这里不讨论，但是其中有一个问题几乎每个项目都会遇到的。后端的小伙伴开发好接口部署到服务器，前端的小伙伴开发好页面去调用接口进行测试。前后端的代码都部署在生产环境一般也没问题，问题就在于前端在本地进行开发测试的时候需要调用服务器上的后端接口，<code>本地运行的前端代码</code>和<code>服务器上运行的后端接口</code>必然属于两个不同个的源，所以导致本地处于开发模式的前端代码无法调用服务器上后端的接口。</p>\n</li>\n<li><p>在很多图片的服务中，经常会出现图片等静态资源会单独存放在一个服务器，然后其他的源去这个静态资源服务器请求图片。图片资源跨域访问后再使用<code>canvas</code>处理，最后使用<code>getImageData()或者toDataUrl()</code>方法操作图片，这是就会出现跨域问题。<code>img</code>标签本身是可以跨域的，但是后续对图片处理的方法会导致跨域，此时就需要设置允许图片服务的跨域。</p>\n</li>\n</ol>\n<blockquote>\n<p>跨域应用场景很多，后面补充</p>\n</blockquote>\n<h1 id=\"如何跨域\"><a href=\"#如何跨域\" class=\"headerlink\" title=\"如何跨域\"></a>如何跨域</h1><p>跨域的方式有很多，主要分为几个方面，分别是利用可以跨域的html标签、针对跨域的Api、nginx反向代理。</p>\n<ol>\n<li><p>一般大家说到的<code>JSONP</code>跨域就是利用<code>&lt;script&gt;</code>标签可以跨域的特性进行跨域访问。具体的操作就是前端用js创建一个script标签，然后<code>src</code>属性中写上需要访问的接口路径和参数就可以了，然后后端返回一段js代码，这段代码会自动执行，从而完成整个跨域的过程。（表示没有用过，听着就很麻烦！）</p>\n</li>\n<li><p>还有部分可以越过同源策略的Api，例如document.domin、window.name、window.postMessage();</p>\n<ul>\n<li><p>document.domin只能用在同一协议，同一端口，不同域名的父子域之间,将两个页面的<code>document.domin</code>设置为同一个值后，子域就可以访问父域文档信息。具体操作见<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/domain\" target=\"_blank\" rel=\"noopener\">文档</a>;</p>\n</li>\n<li><p>window.name比较简单，在同一个窗口下，无论该窗口访问了哪些源，只要该窗口没有被关闭，则每个页面的<code>window.name</code>都是相通的。可以利用此特性在不同源之间进行简单的传值；</p>\n</li>\n<li><p>window.postMessage()方法需要在页面中指定你需要发送<code>什么信息</code>到<code>哪个源</code>,然后去目的源就可以就可以获取数据了。具体的使用方法见<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage\" target=\"_blank\" rel=\"noopener\">文档</a></p>\n</li>\n</ul>\n</li>\n<li><p>前面说的这些跨域方法用起来都不太爽，JSONP只能用于GET请求，使用Api跨域要么只能传递字符串，要么只能传递简单的结构，而且还要受到数据大小的限制，所以在开发中最爽的跨域方法还是使用nginx反响代理。主要的实现原理就是利用服务器去目的源获取数据，然后把数据返回给前端，前端和目的源之间就没有直接联系了，也就不存在跨域问题了。</p>\n</li>\n</ol>\n<blockquote>\n<p>参考资料<br><a href=\"https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html\" target=\"_blank\" rel=\"noopener\">https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html</a><br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy</a><br><a href=\"https://juejin.im/post/5ba1d4fe6fb9a05ce873d4ad#heading-18\" target=\"_blank\" rel=\"noopener\">https://juejin.im/post/5ba1d4fe6fb9a05ce873d4ad#heading-18</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<h1 id=\"何为同源\"><a href=\"#何为同源\" class=\"headerlink\" title=\"何为同源\"></a>何为同源</h1><p>两个页面的协议、域名、端口都相同的情况下，这两个页面就属于同源。    </p><ol>\n<li><p>协议一般是<code>http</code>或者<code>http</code>;</p>\n</li>\n<li><p>域名一般表现为<code>www.baidu.com</code>；</p>\n</li>\n<li><p>端口在域名后面加上<code>:4000</code>，表示4000端口，如果没有注明端口，则表示默认端口。<code>http</code>默认端口为<code>80</code>，<code>https</code>默认端口为<code>443</code>;</p>\n</li>\n</ol>","more":"\n\n<blockquote>\n<p>举例：现有一个页面连接为：<code>https://www.baidu.com</code>，以下几种情况来区分是否同源。    </p>\n<ol>\n<li><code>http://www.baidu.com</code>，不同源，协议不同，一个是<code>https</code>另一个是<code>http</code>；</li>\n</ol>\n</blockquote>\n<ol start=\"2\">\n<li><p><code>https://www.alibaba.com</code>，不同源，域名不同，一个是<code>www.baidu.com</code>另一个是<br><code>www.alibaba.com</code>；</p>\n</li>\n<li><p><code>https://www.baidu.com:9527</code>，不同源，端口不同，一个是<code>443</code>另一个是<code>9527</code>;</p>\n</li>\n<li><p><code>https://www.baidu.com/s</code>，同源，端口、域名、协议都相同，不同的是路径；</p>\n</li>\n</ol>\n<h1 id=\"何为同源策略\"><a href=\"#何为同源策略\" class=\"headerlink\" title=\"何为同源策略\"></a>何为同源策略</h1><p>以下为个人总结，如有出入望指出。</p>\n<ol>\n<li><p>禁止不同源之间进行DOM操作；</p>\n</li>\n<li><p>禁止不同源之间进行AJAX请求；</p>\n</li>\n<li><p>禁止不同源之间进行读写localStorage和IndexedDB；</p>\n</li>\n</ol>\n<blockquote>\n<p>注意：禁止AJAX实际上是浏览器禁止读取响应内容，而不是禁止请求，注意区分。</p>\n</blockquote>\n<h1 id=\"为什么使用同源策略\"><a href=\"#为什么使用同源策略\" class=\"headerlink\" title=\"为什么使用同源策略\"></a>为什么使用同源策略</h1><p>从大的方面来说肯定是为了用户的信息安全，但是具体如果不使用同源策略会导致什么安全问题呢？分别针对3条规则举例说明：</p>\n<ol>\n<li><p>如果允许跨源操作DOM，假设我有个网站是<code>https://www.xiaotaotao.vip</code>，我在我的网站里面使用<code>iframe</code>嵌入了一个银行的网站，如果你没注意到url的不同直接输入了你的银行密码，那么我就可以操作银行网站的输入框（操作DOM）就可以获取到你的密码了。</p>\n</li>\n<li><p>如果允许跨源进行AJAX请求，假设我在自己的网站<code>https://www.xiaotaotao.vip</code>写一个音乐播放页面，然后所有的歌曲都可以去调用QQ音乐的接口，导致别人的服务直接被我接入。（该策略应该是针对用户信息安全的，但是我个人目前没有发现或者想到因为AJAX跨源访问导致用户信息泄漏的情况，以后了解了再补充）。</p>\n</li>\n<li><p>如果允许跨源对localStorage或者IndexDB进行读写，那么就会导致恶意网站在任何时候都可以去读取你存在loalStorage里面的个人数据。</p>\n</li>\n</ol>\n<h1 id=\"为什么要跨域\"><a href=\"#为什么要跨域\" class=\"headerlink\" title=\"为什么要跨域\"></a>为什么要跨域</h1><p>在前端领域<code>跨域</code>这个词语可谓老生常谈，前面我们知道了同源策略是一个非常好的协议，几乎所有的浏览器都遵守这份协议（IE很调皮，它有点不一样），而且这份同源协议对用户的信息安全也是非常的重要，那我们为什么要经常讨论要去跨域呢？</p>\n<ol>\n<li><p>当前开发处于前后段分离的大环境下，这样开发的优势这里不讨论，但是其中有一个问题几乎每个项目都会遇到的。后端的小伙伴开发好接口部署到服务器，前端的小伙伴开发好页面去调用接口进行测试。前后端的代码都部署在生产环境一般也没问题，问题就在于前端在本地进行开发测试的时候需要调用服务器上的后端接口，<code>本地运行的前端代码</code>和<code>服务器上运行的后端接口</code>必然属于两个不同个的源，所以导致本地处于开发模式的前端代码无法调用服务器上后端的接口。</p>\n</li>\n<li><p>在很多图片的服务中，经常会出现图片等静态资源会单独存放在一个服务器，然后其他的源去这个静态资源服务器请求图片。图片资源跨域访问后再使用<code>canvas</code>处理，最后使用<code>getImageData()或者toDataUrl()</code>方法操作图片，这是就会出现跨域问题。<code>img</code>标签本身是可以跨域的，但是后续对图片处理的方法会导致跨域，此时就需要设置允许图片服务的跨域。</p>\n</li>\n</ol>\n<blockquote>\n<p>跨域应用场景很多，后面补充</p>\n</blockquote>\n<h1 id=\"如何跨域\"><a href=\"#如何跨域\" class=\"headerlink\" title=\"如何跨域\"></a>如何跨域</h1><p>跨域的方式有很多，主要分为几个方面，分别是利用可以跨域的html标签、针对跨域的Api、nginx反向代理。</p>\n<ol>\n<li><p>一般大家说到的<code>JSONP</code>跨域就是利用<code>&lt;script&gt;</code>标签可以跨域的特性进行跨域访问。具体的操作就是前端用js创建一个script标签，然后<code>src</code>属性中写上需要访问的接口路径和参数就可以了，然后后端返回一段js代码，这段代码会自动执行，从而完成整个跨域的过程。（表示没有用过，听着就很麻烦！）</p>\n</li>\n<li><p>还有部分可以越过同源策略的Api，例如document.domin、window.name、window.postMessage();</p>\n<ul>\n<li><p>document.domin只能用在同一协议，同一端口，不同域名的父子域之间,将两个页面的<code>document.domin</code>设置为同一个值后，子域就可以访问父域文档信息。具体操作见<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/domain\" target=\"_blank\" rel=\"noopener\">文档</a>;</p>\n</li>\n<li><p>window.name比较简单，在同一个窗口下，无论该窗口访问了哪些源，只要该窗口没有被关闭，则每个页面的<code>window.name</code>都是相通的。可以利用此特性在不同源之间进行简单的传值；</p>\n</li>\n<li><p>window.postMessage()方法需要在页面中指定你需要发送<code>什么信息</code>到<code>哪个源</code>,然后去目的源就可以就可以获取数据了。具体的使用方法见<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage\" target=\"_blank\" rel=\"noopener\">文档</a></p>\n</li>\n</ul>\n</li>\n<li><p>前面说的这些跨域方法用起来都不太爽，JSONP只能用于GET请求，使用Api跨域要么只能传递字符串，要么只能传递简单的结构，而且还要受到数据大小的限制，所以在开发中最爽的跨域方法还是使用nginx反响代理。主要的实现原理就是利用服务器去目的源获取数据，然后把数据返回给前端，前端和目的源之间就没有直接联系了，也就不存在跨域问题了。</p>\n</li>\n</ol>\n<blockquote>\n<p>参考资料<br><a href=\"https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html\" target=\"_blank\" rel=\"noopener\">https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html</a><br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy</a><br><a href=\"https://juejin.im/post/5ba1d4fe6fb9a05ce873d4ad#heading-18\" target=\"_blank\" rel=\"noopener\">https://juejin.im/post/5ba1d4fe6fb9a05ce873d4ad#heading-18</a></p>\n</blockquote>\n"},{"title":"浏览器并发限制","date":"2019-10-25T03:28:17.000Z","_content":"\n# 什么是浏览器并发\n\n浏览器并发主要是指在同一个域名下，浏览器可以同时发起多少次http请求。并发数具体到不同的浏览器是不同的，现目前的浏览器厂商们规定的最大并发数一般都是6左右。最高的并发可以达到10，最低的是2。部分浏览器也可以通过自定义设置并发数，但是都有上限，不同的浏览器上限不同。\n\n# 为什么需要限制浏览器并发\n\n这里要从浏览器本身和服务器两个角度进行说明：\n\n1. 发出http请求是需要开启新线程的，而且每个系统可以发出请求的端口数量是有限的。如果浏览器的请求占用了大量的开销，会导致客户端运行速度变慢。\n\n2. 一般的服务端会限制同一个ip在一段时间内的请求数量，如果并发数量太大会造成服务器压力过大，同时也会导致该ip被服务器拉黑。\n\n# 浏览器并发限制造成了什么影响\n\n1. 因为同一域名下一般只能同时发起6个左右的请求，所以会导致如果一个页面包含了大量静态资源而加载缓慢的情况。可以想象以下如果自己写了一个简易的淘宝页面，里面用到了大量的css文件和商品图片，在浏览器打开这个页面浏览器就会发出几百条请求去获取这些静态资源，而这几百条请求按6个一组排队以此请求，这样就导致了这个页面长时间的白屏，用户体验极差。\n\n2. 如果还在请求中添加了cookie，那么所有的静态资源请求也都会带上cookie，数百个无用的cookie也对页面响应的时间造成了影响。\n\n# 如何降低浏览器并发限制的影响\n\n这里也是从两个方向入手，一个是浏览器并发限制本身，另一个是优化用户体验。\n\n1. 因为浏览器并发限制的是同一个域名，所以现在大部分企业都会选择将静态资源放在不同的域名下，这样可以大幅度的提高并发数量。另外就是在使用图标等小图片时使用精灵图的方式，即将多个图标放在一张图上，通过css属性进行定位获取，这种方法可以将多个请求降低为一条请求。\n\n2. 浏览器并发的限制主要是导致了白屏时间过长，用户体验不好。现在也有很多的企业选用骨架屏的方式，可以先给用户展示一个骨架页面，等资源加载完毕再展示完整页面。\n\n\n# 参考资料\n[https://segmentfault.com/a/1190000016369295](https://segmentfault.com/a/1190000016369295)\n\n[https://www.cnblogs.com/sunsky303/p/8862128.html](https://www.cnblogs.com/sunsky303/p/8862128.html)\n","source":"_posts/浏览器并发限制.md","raw":"---\ntitle: 浏览器并发限制\ndate: 2019-10-25 11:28:17\ncategories: 浏览器\n---\n\n# 什么是浏览器并发\n\n浏览器并发主要是指在同一个域名下，浏览器可以同时发起多少次http请求。并发数具体到不同的浏览器是不同的，现目前的浏览器厂商们规定的最大并发数一般都是6左右。最高的并发可以达到10，最低的是2。部分浏览器也可以通过自定义设置并发数，但是都有上限，不同的浏览器上限不同。\n\n# 为什么需要限制浏览器并发\n\n这里要从浏览器本身和服务器两个角度进行说明：\n\n1. 发出http请求是需要开启新线程的，而且每个系统可以发出请求的端口数量是有限的。如果浏览器的请求占用了大量的开销，会导致客户端运行速度变慢。\n\n2. 一般的服务端会限制同一个ip在一段时间内的请求数量，如果并发数量太大会造成服务器压力过大，同时也会导致该ip被服务器拉黑。\n\n# 浏览器并发限制造成了什么影响\n\n1. 因为同一域名下一般只能同时发起6个左右的请求，所以会导致如果一个页面包含了大量静态资源而加载缓慢的情况。可以想象以下如果自己写了一个简易的淘宝页面，里面用到了大量的css文件和商品图片，在浏览器打开这个页面浏览器就会发出几百条请求去获取这些静态资源，而这几百条请求按6个一组排队以此请求，这样就导致了这个页面长时间的白屏，用户体验极差。\n\n2. 如果还在请求中添加了cookie，那么所有的静态资源请求也都会带上cookie，数百个无用的cookie也对页面响应的时间造成了影响。\n\n# 如何降低浏览器并发限制的影响\n\n这里也是从两个方向入手，一个是浏览器并发限制本身，另一个是优化用户体验。\n\n1. 因为浏览器并发限制的是同一个域名，所以现在大部分企业都会选择将静态资源放在不同的域名下，这样可以大幅度的提高并发数量。另外就是在使用图标等小图片时使用精灵图的方式，即将多个图标放在一张图上，通过css属性进行定位获取，这种方法可以将多个请求降低为一条请求。\n\n2. 浏览器并发的限制主要是导致了白屏时间过长，用户体验不好。现在也有很多的企业选用骨架屏的方式，可以先给用户展示一个骨架页面，等资源加载完毕再展示完整页面。\n\n\n# 参考资料\n[https://segmentfault.com/a/1190000016369295](https://segmentfault.com/a/1190000016369295)\n\n[https://www.cnblogs.com/sunsky303/p/8862128.html](https://www.cnblogs.com/sunsky303/p/8862128.html)\n","slug":"浏览器并发限制","published":1,"updated":"2019-10-25T04:45:26.592Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28aq000lfiyh3nv52ree","content":"<h1 id=\"什么是浏览器并发\"><a href=\"#什么是浏览器并发\" class=\"headerlink\" title=\"什么是浏览器并发\"></a>什么是浏览器并发</h1><p>浏览器并发主要是指在同一个域名下，浏览器可以同时发起多少次http请求。并发数具体到不同的浏览器是不同的，现目前的浏览器厂商们规定的最大并发数一般都是6左右。最高的并发可以达到10，最低的是2。部分浏览器也可以通过自定义设置并发数，但是都有上限，不同的浏览器上限不同。</p><a id=\"more\"></a>\n<h1 id=\"为什么需要限制浏览器并发\"><a href=\"#为什么需要限制浏览器并发\" class=\"headerlink\" title=\"为什么需要限制浏览器并发\"></a>为什么需要限制浏览器并发</h1><p>这里要从浏览器本身和服务器两个角度进行说明：</p>\n<ol>\n<li><p>发出http请求是需要开启新线程的，而且每个系统可以发出请求的端口数量是有限的。如果浏览器的请求占用了大量的开销，会导致客户端运行速度变慢。</p>\n</li>\n<li><p>一般的服务端会限制同一个ip在一段时间内的请求数量，如果并发数量太大会造成服务器压力过大，同时也会导致该ip被服务器拉黑。</p>\n</li>\n</ol>\n<h1 id=\"浏览器并发限制造成了什么影响\"><a href=\"#浏览器并发限制造成了什么影响\" class=\"headerlink\" title=\"浏览器并发限制造成了什么影响\"></a>浏览器并发限制造成了什么影响</h1><ol>\n<li><p>因为同一域名下一般只能同时发起6个左右的请求，所以会导致如果一个页面包含了大量静态资源而加载缓慢的情况。可以想象以下如果自己写了一个简易的淘宝页面，里面用到了大量的css文件和商品图片，在浏览器打开这个页面浏览器就会发出几百条请求去获取这些静态资源，而这几百条请求按6个一组排队以此请求，这样就导致了这个页面长时间的白屏，用户体验极差。</p>\n</li>\n<li><p>如果还在请求中添加了cookie，那么所有的静态资源请求也都会带上cookie，数百个无用的cookie也对页面响应的时间造成了影响。</p>\n</li>\n</ol>\n<h1 id=\"如何降低浏览器并发限制的影响\"><a href=\"#如何降低浏览器并发限制的影响\" class=\"headerlink\" title=\"如何降低浏览器并发限制的影响\"></a>如何降低浏览器并发限制的影响</h1><p>这里也是从两个方向入手，一个是浏览器并发限制本身，另一个是优化用户体验。</p>\n<ol>\n<li><p>因为浏览器并发限制的是同一个域名，所以现在大部分企业都会选择将静态资源放在不同的域名下，这样可以大幅度的提高并发数量。另外就是在使用图标等小图片时使用精灵图的方式，即将多个图标放在一张图上，通过css属性进行定位获取，这种方法可以将多个请求降低为一条请求。</p>\n</li>\n<li><p>浏览器并发的限制主要是导致了白屏时间过长，用户体验不好。现在也有很多的企业选用骨架屏的方式，可以先给用户展示一个骨架页面，等资源加载完毕再展示完整页面。</p>\n</li>\n</ol>\n<h1 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h1><p><a href=\"https://segmentfault.com/a/1190000016369295\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/a/1190000016369295</a></p>\n<p><a href=\"https://www.cnblogs.com/sunsky303/p/8862128.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/sunsky303/p/8862128.html</a></p>\n","site":{"data":{}},"excerpt":"<h1 id=\"什么是浏览器并发\"><a href=\"#什么是浏览器并发\" class=\"headerlink\" title=\"什么是浏览器并发\"></a>什么是浏览器并发</h1><p>浏览器并发主要是指在同一个域名下，浏览器可以同时发起多少次http请求。并发数具体到不同的浏览器是不同的，现目前的浏览器厂商们规定的最大并发数一般都是6左右。最高的并发可以达到10，最低的是2。部分浏览器也可以通过自定义设置并发数，但是都有上限，不同的浏览器上限不同。</p>","more":"\n<h1 id=\"为什么需要限制浏览器并发\"><a href=\"#为什么需要限制浏览器并发\" class=\"headerlink\" title=\"为什么需要限制浏览器并发\"></a>为什么需要限制浏览器并发</h1><p>这里要从浏览器本身和服务器两个角度进行说明：</p>\n<ol>\n<li><p>发出http请求是需要开启新线程的，而且每个系统可以发出请求的端口数量是有限的。如果浏览器的请求占用了大量的开销，会导致客户端运行速度变慢。</p>\n</li>\n<li><p>一般的服务端会限制同一个ip在一段时间内的请求数量，如果并发数量太大会造成服务器压力过大，同时也会导致该ip被服务器拉黑。</p>\n</li>\n</ol>\n<h1 id=\"浏览器并发限制造成了什么影响\"><a href=\"#浏览器并发限制造成了什么影响\" class=\"headerlink\" title=\"浏览器并发限制造成了什么影响\"></a>浏览器并发限制造成了什么影响</h1><ol>\n<li><p>因为同一域名下一般只能同时发起6个左右的请求，所以会导致如果一个页面包含了大量静态资源而加载缓慢的情况。可以想象以下如果自己写了一个简易的淘宝页面，里面用到了大量的css文件和商品图片，在浏览器打开这个页面浏览器就会发出几百条请求去获取这些静态资源，而这几百条请求按6个一组排队以此请求，这样就导致了这个页面长时间的白屏，用户体验极差。</p>\n</li>\n<li><p>如果还在请求中添加了cookie，那么所有的静态资源请求也都会带上cookie，数百个无用的cookie也对页面响应的时间造成了影响。</p>\n</li>\n</ol>\n<h1 id=\"如何降低浏览器并发限制的影响\"><a href=\"#如何降低浏览器并发限制的影响\" class=\"headerlink\" title=\"如何降低浏览器并发限制的影响\"></a>如何降低浏览器并发限制的影响</h1><p>这里也是从两个方向入手，一个是浏览器并发限制本身，另一个是优化用户体验。</p>\n<ol>\n<li><p>因为浏览器并发限制的是同一个域名，所以现在大部分企业都会选择将静态资源放在不同的域名下，这样可以大幅度的提高并发数量。另外就是在使用图标等小图片时使用精灵图的方式，即将多个图标放在一张图上，通过css属性进行定位获取，这种方法可以将多个请求降低为一条请求。</p>\n</li>\n<li><p>浏览器并发的限制主要是导致了白屏时间过长，用户体验不好。现在也有很多的企业选用骨架屏的方式，可以先给用户展示一个骨架页面，等资源加载完毕再展示完整页面。</p>\n</li>\n</ol>\n<h1 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h1><p><a href=\"https://segmentfault.com/a/1190000016369295\" target=\"_blank\" rel=\"noopener\">https://segmentfault.com/a/1190000016369295</a></p>\n<p><a href=\"https://www.cnblogs.com/sunsky303/p/8862128.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/sunsky303/p/8862128.html</a></p>\n"},{"layout":"post","title":"VUE生成二维码并下载","data":"2019-07-17T07:15:18.000Z","_content":"# 开始前了解\n>在很多项目中二维码是由后端生成，但其实也可以在前端生成二维码并且直接下载。在这里我们就要使用一个vue的插件“qrcodejs2”，这个插件可以比较方便快捷的生成二维码。具体信息可以去官网了解。  \n<!-- more --> \n\n# 引入插件\n>在命令行执行 npm install qrcodejs2     \n\n>在vue文件中 import QRcode from 'qrcodejs2'     \n\n# 插件的使用\n\n## 挂载点，我们需要把要生成的二维码挂载都哪里\n>首先要在模版中添加一个id=qrcode的div标签    \n\n ```html\n<template>\n    <div id=\"qrcode\">\n\n    </div>\n</template>\n```\n\n## 生成函数\n>二维码是通过canvas标签绘制出来的，所以我们需要一个函数去生成。函数放在了methods里面。\n```javascript  \nqrcode(){\n    document.getElementById(\"qrcode\").innerHTML = \"\"; //清除上次二维码的数据\n    let qrcode = new QRcode('qrcode',{\n        width:100,\n        height:100,\n        text:\"你是不是在做梦哦\",\n\n    })\n},\n```\n\n## 执行函数\n>这里需要值得注意的是，因为二维码是通过canvas画出来然后挂载到div上的，所以我们在什么时候画就比较关键了。根据vue的生命周期，我们要将qrcode函数放到mounted函数中执行，如果在放在这个函数之前的生命周期函数中执行，就导致错误，因为id=“qrcode”的div还没有生成。\n\n# 下载\n>我这里的下载思路是根据广大的互联网学习来的，因为要下载所以我们得这个canvas转换为图片，但是仅仅转换为图片用户也只能通过右键进行下载，用户体验不好。这时候我们往往希望有个下载按钮可以点击下载。     \n\n>主要的思路就是：  \n1. 获取到canvas标签；\n2. 生成一个a标签；\n3. 把canvas转化为图片然后放到文件夹中，再把图片信息挂载到a标签的属性上；\n4. 给图片一个下载名，然后触发a标签的click事件；      \n\n```javascript\ndownload(){\n    let myCanvas = document.getElementById('qrcode').getElementsByTagName('canvas');\n    let a = document.createElement(\"a\")\n    a.href = myCanvas[0].toDataURL('image/png').replace('image/png', 'image/octet-stream')\n    a.download = \"文件名\";\n    a.click();\n},\n```  ","source":"_posts/VUE生成二维码并下载.md","raw":"---\nlayout: post\ntitle: VUE生成二维码并下载\ndata: 2019-07-17 15:15:18\ncategories: VUE\n---\n# 开始前了解\n>在很多项目中二维码是由后端生成，但其实也可以在前端生成二维码并且直接下载。在这里我们就要使用一个vue的插件“qrcodejs2”，这个插件可以比较方便快捷的生成二维码。具体信息可以去官网了解。  \n<!-- more --> \n\n# 引入插件\n>在命令行执行 npm install qrcodejs2     \n\n>在vue文件中 import QRcode from 'qrcodejs2'     \n\n# 插件的使用\n\n## 挂载点，我们需要把要生成的二维码挂载都哪里\n>首先要在模版中添加一个id=qrcode的div标签    \n\n ```html\n<template>\n    <div id=\"qrcode\">\n\n    </div>\n</template>\n```\n\n## 生成函数\n>二维码是通过canvas标签绘制出来的，所以我们需要一个函数去生成。函数放在了methods里面。\n```javascript  \nqrcode(){\n    document.getElementById(\"qrcode\").innerHTML = \"\"; //清除上次二维码的数据\n    let qrcode = new QRcode('qrcode',{\n        width:100,\n        height:100,\n        text:\"你是不是在做梦哦\",\n\n    })\n},\n```\n\n## 执行函数\n>这里需要值得注意的是，因为二维码是通过canvas画出来然后挂载到div上的，所以我们在什么时候画就比较关键了。根据vue的生命周期，我们要将qrcode函数放到mounted函数中执行，如果在放在这个函数之前的生命周期函数中执行，就导致错误，因为id=“qrcode”的div还没有生成。\n\n# 下载\n>我这里的下载思路是根据广大的互联网学习来的，因为要下载所以我们得这个canvas转换为图片，但是仅仅转换为图片用户也只能通过右键进行下载，用户体验不好。这时候我们往往希望有个下载按钮可以点击下载。     \n\n>主要的思路就是：  \n1. 获取到canvas标签；\n2. 生成一个a标签；\n3. 把canvas转化为图片然后放到文件夹中，再把图片信息挂载到a标签的属性上；\n4. 给图片一个下载名，然后触发a标签的click事件；      \n\n```javascript\ndownload(){\n    let myCanvas = document.getElementById('qrcode').getElementsByTagName('canvas');\n    let a = document.createElement(\"a\")\n    a.href = myCanvas[0].toDataURL('image/png').replace('image/png', 'image/octet-stream')\n    a.download = \"文件名\";\n    a.click();\n},\n```  ","slug":"VUE生成二维码并下载","published":1,"date":"2019-09-19T07:05:07.633Z","updated":"2019-09-19T07:05:07.633Z","comments":1,"photos":[],"link":"","_id":"ck49n28ar000nfiyh0tho0cqh","content":"<h1 id=\"开始前了解\"><a href=\"#开始前了解\" class=\"headerlink\" title=\"开始前了解\"></a>开始前了解</h1><blockquote>\n<p>在很多项目中二维码是由后端生成，但其实也可以在前端生成二维码并且直接下载。在这里我们就要使用一个vue的插件“qrcodejs2”，这个插件可以比较方便快捷的生成二维码。具体信息可以去官网了解。  </p>\n</blockquote>\n<a id=\"more\"></a> \n\n<h1 id=\"引入插件\"><a href=\"#引入插件\" class=\"headerlink\" title=\"引入插件\"></a>引入插件</h1><blockquote>\n<p>在命令行执行 npm install qrcodejs2     </p>\n</blockquote>\n<blockquote>\n<p>在vue文件中 import QRcode from ‘qrcodejs2’     </p>\n</blockquote>\n<h1 id=\"插件的使用\"><a href=\"#插件的使用\" class=\"headerlink\" title=\"插件的使用\"></a>插件的使用</h1><h2 id=\"挂载点，我们需要把要生成的二维码挂载都哪里\"><a href=\"#挂载点，我们需要把要生成的二维码挂载都哪里\" class=\"headerlink\" title=\"挂载点，我们需要把要生成的二维码挂载都哪里\"></a>挂载点，我们需要把要生成的二维码挂载都哪里</h2><blockquote>\n<p>首先要在模版中添加一个id=qrcode的div标签    </p>\n</blockquote>\n <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"qrcode\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"生成函数\"><a href=\"#生成函数\" class=\"headerlink\" title=\"生成函数\"></a>生成函数</h2><blockquote>\n<p>二维码是通过canvas标签绘制出来的，所以我们需要一个函数去生成。函数放在了methods里面。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">qrcode()&#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"qrcode\"</span>).innerHTML = <span class=\"string\">\"\"</span>; <span class=\"comment\">//清除上次二维码的数据</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> qrcode = <span class=\"keyword\">new</span> QRcode(<span class=\"string\">'qrcode'</span>,&#123;</span><br><span class=\"line\">        width:<span class=\"number\">100</span>,</span><br><span class=\"line\">        height:<span class=\"number\">100</span>,</span><br><span class=\"line\">        text:<span class=\"string\">\"你是不是在做梦哦\"</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"执行函数\"><a href=\"#执行函数\" class=\"headerlink\" title=\"执行函数\"></a>执行函数</h2><blockquote>\n<p>这里需要值得注意的是，因为二维码是通过canvas画出来然后挂载到div上的，所以我们在什么时候画就比较关键了。根据vue的生命周期，我们要将qrcode函数放到mounted函数中执行，如果在放在这个函数之前的生命周期函数中执行，就导致错误，因为id=“qrcode”的div还没有生成。</p>\n</blockquote>\n<h1 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h1><blockquote>\n<p>我这里的下载思路是根据广大的互联网学习来的，因为要下载所以我们得这个canvas转换为图片，但是仅仅转换为图片用户也只能通过右键进行下载，用户体验不好。这时候我们往往希望有个下载按钮可以点击下载。     </p>\n</blockquote>\n<blockquote>\n<p>主要的思路就是：  </p>\n<ol>\n<li>获取到canvas标签；</li>\n<li>生成一个a标签；</li>\n<li>把canvas转化为图片然后放到文件夹中，再把图片信息挂载到a标签的属性上；</li>\n<li>给图片一个下载名，然后触发a标签的click事件；      </li>\n</ol>\n</blockquote>\n<pre><code class=\"javascript\">download(){\n    <span class=\"keyword\">let</span> myCanvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'qrcode'</span>).getElementsByTagName(<span class=\"string\">'canvas'</span>);\n    <span class=\"keyword\">let</span> a = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"a\"</span>)\n    a.href = myCanvas[<span class=\"number\">0</span>].toDataURL(<span class=\"string\">'image/png'</span>).replace(<span class=\"string\">'image/png'</span>, <span class=\"string\">'image/octet-stream'</span>)\n    a.download = <span class=\"string\">\"文件名\"</span>;\n    a.click();\n},</code></pre>\n","site":{"data":{}},"excerpt":"<h1 id=\"开始前了解\"><a href=\"#开始前了解\" class=\"headerlink\" title=\"开始前了解\"></a>开始前了解</h1><blockquote>\n<p>在很多项目中二维码是由后端生成，但其实也可以在前端生成二维码并且直接下载。在这里我们就要使用一个vue的插件“qrcodejs2”，这个插件可以比较方便快捷的生成二维码。具体信息可以去官网了解。  </p>\n</blockquote>","more":"<h1 id=\"引入插件\"><a href=\"#引入插件\" class=\"headerlink\" title=\"引入插件\"></a>引入插件</h1><blockquote>\n<p>在命令行执行 npm install qrcodejs2     </p>\n</blockquote>\n<blockquote>\n<p>在vue文件中 import QRcode from ‘qrcodejs2’     </p>\n</blockquote>\n<h1 id=\"插件的使用\"><a href=\"#插件的使用\" class=\"headerlink\" title=\"插件的使用\"></a>插件的使用</h1><h2 id=\"挂载点，我们需要把要生成的二维码挂载都哪里\"><a href=\"#挂载点，我们需要把要生成的二维码挂载都哪里\" class=\"headerlink\" title=\"挂载点，我们需要把要生成的二维码挂载都哪里\"></a>挂载点，我们需要把要生成的二维码挂载都哪里</h2><blockquote>\n<p>首先要在模版中添加一个id=qrcode的div标签    </p>\n</blockquote>\n <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"qrcode\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"生成函数\"><a href=\"#生成函数\" class=\"headerlink\" title=\"生成函数\"></a>生成函数</h2><blockquote>\n<p>二维码是通过canvas标签绘制出来的，所以我们需要一个函数去生成。函数放在了methods里面。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">qrcode()&#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"qrcode\"</span>).innerHTML = <span class=\"string\">\"\"</span>; <span class=\"comment\">//清除上次二维码的数据</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> qrcode = <span class=\"keyword\">new</span> QRcode(<span class=\"string\">'qrcode'</span>,&#123;</span><br><span class=\"line\">        width:<span class=\"number\">100</span>,</span><br><span class=\"line\">        height:<span class=\"number\">100</span>,</span><br><span class=\"line\">        text:<span class=\"string\">\"你是不是在做梦哦\"</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"执行函数\"><a href=\"#执行函数\" class=\"headerlink\" title=\"执行函数\"></a>执行函数</h2><blockquote>\n<p>这里需要值得注意的是，因为二维码是通过canvas画出来然后挂载到div上的，所以我们在什么时候画就比较关键了。根据vue的生命周期，我们要将qrcode函数放到mounted函数中执行，如果在放在这个函数之前的生命周期函数中执行，就导致错误，因为id=“qrcode”的div还没有生成。</p>\n</blockquote>\n<h1 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h1><blockquote>\n<p>我这里的下载思路是根据广大的互联网学习来的，因为要下载所以我们得这个canvas转换为图片，但是仅仅转换为图片用户也只能通过右键进行下载，用户体验不好。这时候我们往往希望有个下载按钮可以点击下载。     </p>\n</blockquote>\n<blockquote>\n<p>主要的思路就是：  </p>\n<ol>\n<li>获取到canvas标签；</li>\n<li>生成一个a标签；</li>\n<li>把canvas转化为图片然后放到文件夹中，再把图片信息挂载到a标签的属性上；</li>\n<li>给图片一个下载名，然后触发a标签的click事件；      </li>\n</ol>\n</blockquote>\n<pre><code class=\"javascript\">download(){\n    <span class=\"keyword\">let</span> myCanvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'qrcode'</span>).getElementsByTagName(<span class=\"string\">'canvas'</span>);\n    <span class=\"keyword\">let</span> a = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"a\"</span>)\n    a.href = myCanvas[<span class=\"number\">0</span>].toDataURL(<span class=\"string\">'image/png'</span>).replace(<span class=\"string\">'image/png'</span>, <span class=\"string\">'image/octet-stream'</span>)\n    a.download = <span class=\"string\">\"文件名\"</span>;\n    a.click();\n},</code></pre>"},{"title":"nvm的使用","date":"2019-09-18T07:08:31.000Z","_content":"\n## 前言\n\n>在使用`windows`和`macOS`的时候没有感觉到`node`版本的有什么难处理的，但是当使用`linux`系统的时候，发现安装`node`是个比较麻烦的事情。比如：如果`ubuntu`自带的`apt-get`来安装，只能安装比较低版本的，如果想要升级版本也是个挺麻烦的事情。这个时候`node`版本管理神器`nvm`的作用就体现出来了，可以随意的下载各个版本的`node`，并且可以随时进行版本的切换。\n<!-- more -->\n\n## 安装nvm\n\nmac可以使用`brew`安装\n\n```bash\nbrew install nvm\n```\n\nubuntu可以使用`curl`安装\n\n```bash\n# 使用curl安装的nvm，需要在安装完成后重新打开命令行\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash\n```\n\n## nvm操作\n\n下载最新版`node`\n\n```bash\nnvm install stable\n```\n\n下载指定版本\n\n```bash\nnvm install 版本号\n```\n\n查看已经下载的`node`版本列表\n\n```bash\nnvm ls\n```\n\n切换`node`版本\n\n```bash\nnvm use 版本号\n```\n\n修改默认版本（如果不修改默认版本，可能会导致关闭当前命令行后`node`版本又恢复为低版本）\n\n```bash\nnvm alias default 版本号\n```\n\n***\n>具体`nvm`操作方法，请参考[官方文档](https://github.com/nvm-sh/nvm#usage \"nvm官方文档\")\n","source":"_posts/nvm的使用.md","raw":"---\ntitle: nvm的使用\ndate: 2019-09-18 15:08:31\ncategories: 开发小工具\n---\n\n## 前言\n\n>在使用`windows`和`macOS`的时候没有感觉到`node`版本的有什么难处理的，但是当使用`linux`系统的时候，发现安装`node`是个比较麻烦的事情。比如：如果`ubuntu`自带的`apt-get`来安装，只能安装比较低版本的，如果想要升级版本也是个挺麻烦的事情。这个时候`node`版本管理神器`nvm`的作用就体现出来了，可以随意的下载各个版本的`node`，并且可以随时进行版本的切换。\n<!-- more -->\n\n## 安装nvm\n\nmac可以使用`brew`安装\n\n```bash\nbrew install nvm\n```\n\nubuntu可以使用`curl`安装\n\n```bash\n# 使用curl安装的nvm，需要在安装完成后重新打开命令行\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash\n```\n\n## nvm操作\n\n下载最新版`node`\n\n```bash\nnvm install stable\n```\n\n下载指定版本\n\n```bash\nnvm install 版本号\n```\n\n查看已经下载的`node`版本列表\n\n```bash\nnvm ls\n```\n\n切换`node`版本\n\n```bash\nnvm use 版本号\n```\n\n修改默认版本（如果不修改默认版本，可能会导致关闭当前命令行后`node`版本又恢复为低版本）\n\n```bash\nnvm alias default 版本号\n```\n\n***\n>具体`nvm`操作方法，请参考[官方文档](https://github.com/nvm-sh/nvm#usage \"nvm官方文档\")\n","slug":"nvm的使用","published":1,"updated":"2019-09-19T07:05:07.633Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28ar000qfiyh1j0w611n","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><blockquote>\n<p>在使用<code>windows</code>和<code>macOS</code>的时候没有感觉到<code>node</code>版本的有什么难处理的，但是当使用<code>linux</code>系统的时候，发现安装<code>node</code>是个比较麻烦的事情。比如：如果<code>ubuntu</code>自带的<code>apt-get</code>来安装，只能安装比较低版本的，如果想要升级版本也是个挺麻烦的事情。这个时候<code>node</code>版本管理神器<code>nvm</code>的作用就体现出来了，可以随意的下载各个版本的<code>node</code>，并且可以随时进行版本的切换。</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h2 id=\"安装nvm\"><a href=\"#安装nvm\" class=\"headerlink\" title=\"安装nvm\"></a>安装nvm</h2><p>mac可以使用<code>brew</code>安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install nvm</span><br></pre></td></tr></table></figure>\n\n<p>ubuntu可以使用<code>curl</code>安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 使用curl安装的nvm，需要在安装完成后重新打开命令行</span></span><br><span class=\"line\">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"nvm操作\"><a href=\"#nvm操作\" class=\"headerlink\" title=\"nvm操作\"></a>nvm操作</h2><p>下载最新版<code>node</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm install stable</span><br></pre></td></tr></table></figure>\n\n<p>下载指定版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm install 版本号</span><br></pre></td></tr></table></figure>\n\n<p>查看已经下载的<code>node</code>版本列表</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm ls</span><br></pre></td></tr></table></figure>\n\n<p>切换<code>node</code>版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm use 版本号</span><br></pre></td></tr></table></figure>\n\n<p>修改默认版本（如果不修改默认版本，可能会导致关闭当前命令行后<code>node</code>版本又恢复为低版本）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm <span class=\"built_in\">alias</span> default 版本号</span><br></pre></td></tr></table></figure>\n\n<hr>\n<blockquote>\n<p>具体<code>nvm</code>操作方法，请参考<a href=\"https://github.com/nvm-sh/nvm#usage\" title=\"nvm官方文档\" target=\"_blank\" rel=\"noopener\">官方文档</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><blockquote>\n<p>在使用<code>windows</code>和<code>macOS</code>的时候没有感觉到<code>node</code>版本的有什么难处理的，但是当使用<code>linux</code>系统的时候，发现安装<code>node</code>是个比较麻烦的事情。比如：如果<code>ubuntu</code>自带的<code>apt-get</code>来安装，只能安装比较低版本的，如果想要升级版本也是个挺麻烦的事情。这个时候<code>node</code>版本管理神器<code>nvm</code>的作用就体现出来了，可以随意的下载各个版本的<code>node</code>，并且可以随时进行版本的切换。</p>\n</blockquote>","more":"<h2 id=\"安装nvm\"><a href=\"#安装nvm\" class=\"headerlink\" title=\"安装nvm\"></a>安装nvm</h2><p>mac可以使用<code>brew</code>安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install nvm</span><br></pre></td></tr></table></figure>\n\n<p>ubuntu可以使用<code>curl</code>安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 使用curl安装的nvm，需要在安装完成后重新打开命令行</span></span><br><span class=\"line\">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"nvm操作\"><a href=\"#nvm操作\" class=\"headerlink\" title=\"nvm操作\"></a>nvm操作</h2><p>下载最新版<code>node</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm install stable</span><br></pre></td></tr></table></figure>\n\n<p>下载指定版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm install 版本号</span><br></pre></td></tr></table></figure>\n\n<p>查看已经下载的<code>node</code>版本列表</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm ls</span><br></pre></td></tr></table></figure>\n\n<p>切换<code>node</code>版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm use 版本号</span><br></pre></td></tr></table></figure>\n\n<p>修改默认版本（如果不修改默认版本，可能会导致关闭当前命令行后<code>node</code>版本又恢复为低版本）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm <span class=\"built_in\">alias</span> default 版本号</span><br></pre></td></tr></table></figure>\n\n<hr>\n<blockquote>\n<p>具体<code>nvm</code>操作方法，请参考<a href=\"https://github.com/nvm-sh/nvm#usage\" title=\"nvm官方文档\" target=\"_blank\" rel=\"noopener\">官方文档</a></p>\n</blockquote>"},{"title":"php上传大文件配置","date":"2019-08-16T01:37:34.000Z","_content":"\n# PHP配置问题\n\n## PHP上传文件大小限制\n>PHP配置文件默认的post上传数据`post_max_size`大小为2M，默认上传文件`upload_max_filesize`的大小为8M。所以如果文件大小超过了默认的最大值就会出现上传失败的问题。\n<!-- more -->\n\n## PHP最长执行时间限制\n>大文件上传失败的另一个原因就是PHP执行时间的限制问题。因为大文件的上传比较慢，而PHP默认的最长执行时间`max_execut_time`为30秒，如果超过了30秒脚本就会停止执行。\n\n## PHP配置文件的修改\n>PHP的配置文件一般位于`/usr/local/php7/lib/php.ini`，用vim编辑器打开，进入文件后找到`post_max_size`这个变量，然后将数值修改为合适的大小。同样的将`upload_max_filesize`变量也改为合适的大小。执行时间的变量`max_execut_time`的值改为`0`表示没有时间限制。\n\n## 重启PHP\n>修改了PHP的配置文件`php.ini`后需要对PHP进行重启，具体如何重启自行谷歌。我这里用的是最简陋的方法，先关闭`killall php-fpm`，然后在`/usr/local/php7/sbin`文件夹下启动`/usr/local/php7/sbin/php-fpm –c ../lib/php.ini –y ../etc/php-fpm.conf `。\n\n>如果在页面报错`502 BadGateway`或者`Gateway Timeout`则表示`php-fpm`没有启动。\n\n# nginx配置问题\n\n## nginx设置上传文件最大值\n>如果上述两总情况都发现没有问题则可以去nginx的配置文件看一下`client_max_body_size`变量，这个变量是用来设置上传文件大小的，自行设置好合适的值即可。我设置的是`client_max_body_size 500m;`。\n\n## 重启nginx\n>根据nginx安装的不同，自行谷歌重启nginx即可。我在项目中使用的是`/usr/local/openresty/nginx/nginx/sbin/nginx -s reload`。","source":"_posts/php上传大文件配置.md","raw":"---\ntitle: php上传大文件配置\ndate: 2019-08-16 09:37:34\ncategories: 服务器配置问题\n---\n\n# PHP配置问题\n\n## PHP上传文件大小限制\n>PHP配置文件默认的post上传数据`post_max_size`大小为2M，默认上传文件`upload_max_filesize`的大小为8M。所以如果文件大小超过了默认的最大值就会出现上传失败的问题。\n<!-- more -->\n\n## PHP最长执行时间限制\n>大文件上传失败的另一个原因就是PHP执行时间的限制问题。因为大文件的上传比较慢，而PHP默认的最长执行时间`max_execut_time`为30秒，如果超过了30秒脚本就会停止执行。\n\n## PHP配置文件的修改\n>PHP的配置文件一般位于`/usr/local/php7/lib/php.ini`，用vim编辑器打开，进入文件后找到`post_max_size`这个变量，然后将数值修改为合适的大小。同样的将`upload_max_filesize`变量也改为合适的大小。执行时间的变量`max_execut_time`的值改为`0`表示没有时间限制。\n\n## 重启PHP\n>修改了PHP的配置文件`php.ini`后需要对PHP进行重启，具体如何重启自行谷歌。我这里用的是最简陋的方法，先关闭`killall php-fpm`，然后在`/usr/local/php7/sbin`文件夹下启动`/usr/local/php7/sbin/php-fpm –c ../lib/php.ini –y ../etc/php-fpm.conf `。\n\n>如果在页面报错`502 BadGateway`或者`Gateway Timeout`则表示`php-fpm`没有启动。\n\n# nginx配置问题\n\n## nginx设置上传文件最大值\n>如果上述两总情况都发现没有问题则可以去nginx的配置文件看一下`client_max_body_size`变量，这个变量是用来设置上传文件大小的，自行设置好合适的值即可。我设置的是`client_max_body_size 500m;`。\n\n## 重启nginx\n>根据nginx安装的不同，自行谷歌重启nginx即可。我在项目中使用的是`/usr/local/openresty/nginx/nginx/sbin/nginx -s reload`。","slug":"php上传大文件配置","published":1,"updated":"2019-09-19T07:05:07.633Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28as000rfiyhq45anf9o","content":"<h1 id=\"PHP配置问题\"><a href=\"#PHP配置问题\" class=\"headerlink\" title=\"PHP配置问题\"></a>PHP配置问题</h1><h2 id=\"PHP上传文件大小限制\"><a href=\"#PHP上传文件大小限制\" class=\"headerlink\" title=\"PHP上传文件大小限制\"></a>PHP上传文件大小限制</h2><blockquote>\n<p>PHP配置文件默认的post上传数据<code>post_max_size</code>大小为2M，默认上传文件<code>upload_max_filesize</code>的大小为8M。所以如果文件大小超过了默认的最大值就会出现上传失败的问题。</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h2 id=\"PHP最长执行时间限制\"><a href=\"#PHP最长执行时间限制\" class=\"headerlink\" title=\"PHP最长执行时间限制\"></a>PHP最长执行时间限制</h2><blockquote>\n<p>大文件上传失败的另一个原因就是PHP执行时间的限制问题。因为大文件的上传比较慢，而PHP默认的最长执行时间<code>max_execut_time</code>为30秒，如果超过了30秒脚本就会停止执行。</p>\n</blockquote>\n<h2 id=\"PHP配置文件的修改\"><a href=\"#PHP配置文件的修改\" class=\"headerlink\" title=\"PHP配置文件的修改\"></a>PHP配置文件的修改</h2><blockquote>\n<p>PHP的配置文件一般位于<code>/usr/local/php7/lib/php.ini</code>，用vim编辑器打开，进入文件后找到<code>post_max_size</code>这个变量，然后将数值修改为合适的大小。同样的将<code>upload_max_filesize</code>变量也改为合适的大小。执行时间的变量<code>max_execut_time</code>的值改为<code>0</code>表示没有时间限制。</p>\n</blockquote>\n<h2 id=\"重启PHP\"><a href=\"#重启PHP\" class=\"headerlink\" title=\"重启PHP\"></a>重启PHP</h2><blockquote>\n<p>修改了PHP的配置文件<code>php.ini</code>后需要对PHP进行重启，具体如何重启自行谷歌。我这里用的是最简陋的方法，先关闭<code>killall php-fpm</code>，然后在<code>/usr/local/php7/sbin</code>文件夹下启动<code>/usr/local/php7/sbin/php-fpm –c ../lib/php.ini –y ../etc/php-fpm.conf</code>。</p>\n</blockquote>\n<blockquote>\n<p>如果在页面报错<code>502 BadGateway</code>或者<code>Gateway Timeout</code>则表示<code>php-fpm</code>没有启动。</p>\n</blockquote>\n<h1 id=\"nginx配置问题\"><a href=\"#nginx配置问题\" class=\"headerlink\" title=\"nginx配置问题\"></a>nginx配置问题</h1><h2 id=\"nginx设置上传文件最大值\"><a href=\"#nginx设置上传文件最大值\" class=\"headerlink\" title=\"nginx设置上传文件最大值\"></a>nginx设置上传文件最大值</h2><blockquote>\n<p>如果上述两总情况都发现没有问题则可以去nginx的配置文件看一下<code>client_max_body_size</code>变量，这个变量是用来设置上传文件大小的，自行设置好合适的值即可。我设置的是<code>client_max_body_size 500m;</code>。</p>\n</blockquote>\n<h2 id=\"重启nginx\"><a href=\"#重启nginx\" class=\"headerlink\" title=\"重启nginx\"></a>重启nginx</h2><blockquote>\n<p>根据nginx安装的不同，自行谷歌重启nginx即可。我在项目中使用的是<code>/usr/local/openresty/nginx/nginx/sbin/nginx -s reload</code>。</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<h1 id=\"PHP配置问题\"><a href=\"#PHP配置问题\" class=\"headerlink\" title=\"PHP配置问题\"></a>PHP配置问题</h1><h2 id=\"PHP上传文件大小限制\"><a href=\"#PHP上传文件大小限制\" class=\"headerlink\" title=\"PHP上传文件大小限制\"></a>PHP上传文件大小限制</h2><blockquote>\n<p>PHP配置文件默认的post上传数据<code>post_max_size</code>大小为2M，默认上传文件<code>upload_max_filesize</code>的大小为8M。所以如果文件大小超过了默认的最大值就会出现上传失败的问题。</p>\n</blockquote>","more":"<h2 id=\"PHP最长执行时间限制\"><a href=\"#PHP最长执行时间限制\" class=\"headerlink\" title=\"PHP最长执行时间限制\"></a>PHP最长执行时间限制</h2><blockquote>\n<p>大文件上传失败的另一个原因就是PHP执行时间的限制问题。因为大文件的上传比较慢，而PHP默认的最长执行时间<code>max_execut_time</code>为30秒，如果超过了30秒脚本就会停止执行。</p>\n</blockquote>\n<h2 id=\"PHP配置文件的修改\"><a href=\"#PHP配置文件的修改\" class=\"headerlink\" title=\"PHP配置文件的修改\"></a>PHP配置文件的修改</h2><blockquote>\n<p>PHP的配置文件一般位于<code>/usr/local/php7/lib/php.ini</code>，用vim编辑器打开，进入文件后找到<code>post_max_size</code>这个变量，然后将数值修改为合适的大小。同样的将<code>upload_max_filesize</code>变量也改为合适的大小。执行时间的变量<code>max_execut_time</code>的值改为<code>0</code>表示没有时间限制。</p>\n</blockquote>\n<h2 id=\"重启PHP\"><a href=\"#重启PHP\" class=\"headerlink\" title=\"重启PHP\"></a>重启PHP</h2><blockquote>\n<p>修改了PHP的配置文件<code>php.ini</code>后需要对PHP进行重启，具体如何重启自行谷歌。我这里用的是最简陋的方法，先关闭<code>killall php-fpm</code>，然后在<code>/usr/local/php7/sbin</code>文件夹下启动<code>/usr/local/php7/sbin/php-fpm –c ../lib/php.ini –y ../etc/php-fpm.conf</code>。</p>\n</blockquote>\n<blockquote>\n<p>如果在页面报错<code>502 BadGateway</code>或者<code>Gateway Timeout</code>则表示<code>php-fpm</code>没有启动。</p>\n</blockquote>\n<h1 id=\"nginx配置问题\"><a href=\"#nginx配置问题\" class=\"headerlink\" title=\"nginx配置问题\"></a>nginx配置问题</h1><h2 id=\"nginx设置上传文件最大值\"><a href=\"#nginx设置上传文件最大值\" class=\"headerlink\" title=\"nginx设置上传文件最大值\"></a>nginx设置上传文件最大值</h2><blockquote>\n<p>如果上述两总情况都发现没有问题则可以去nginx的配置文件看一下<code>client_max_body_size</code>变量，这个变量是用来设置上传文件大小的，自行设置好合适的值即可。我设置的是<code>client_max_body_size 500m;</code>。</p>\n</blockquote>\n<h2 id=\"重启nginx\"><a href=\"#重启nginx\" class=\"headerlink\" title=\"重启nginx\"></a>重启nginx</h2><blockquote>\n<p>根据nginx安装的不同，自行谷歌重启nginx即可。我在项目中使用的是<code>/usr/local/openresty/nginx/nginx/sbin/nginx -s reload</code>。</p>\n</blockquote>"},{"layout":"post","title":"swagger在laravel中的使用","date":"2019-07-19T03:34:01.000Z","_content":"\n# 开始前了解\n\n>推荐一个比较完成的文档[https://learnku.com/laravel/t/7430/how-to-write-api-documents-based-on-swagger-php#b5a896](https://learnku.com/laravel/t/7430/how-to-write-api-documents-based-on-swagger-php#b5a896)  \n<!-- more -->   \n>swagger主要是用于给api接口写文档的，接口主要有几个关键点需要文档对其进行解释     \n\n1. 请求方法\n2. 请求的路径\n3. 请求的参数\n4. 返沪状态\n5. 返回参数  \n\n>另外强调一点，所有的swagger语句都要写在注释里面！\n\n# 请求方法\n\n>主要是指GET、POST等请求方法在swagger中应该如何表示。    \n>如果一个模块或者说一个功能点需要多个接口，可以使用tags属性给接口打个标签。    \n\n```php\n/*\n    //请求的方法写在开头，例如：GET、POST、DELETE等\n    @SWG\\GET(\n        tags={\"巡检\"},                   //相当于给这个请求归类，一般按照模块划分，这里指这个请求属于巡检模块\n        path=\"/checktaskitem\",          //请求的路径\n        summary=\"根据巡检员获取其巡检列表\"  //对改请求的描述，主要说明其功能\n    )\n*/\n```\n\n{% asset_img swagger1.png %}  \n\n# 请求参数\n\n>参数主要有几种形式：\n\n1. query string：\tapi/checktask?item_id=1\n2. path: \tapi/checktask/1\n3. body:\tpost打包传值的形式    \n\n## 简单一点的请求方式\n\n>简单的请求方式就是指通过query或者path这两种形式进行传值的方式，因为不涉及到参数数组、对象的嵌套，因此有多少个参数就写多少个Parameter方法就可以。Parameter方法的参数配置参考：\n\n```php\n/*\n    //请求的方法写在开头，例如：GET、POST、DELETE等\n    @SWG\\GET(\n        tags={\"巡检\"},                   //相当于给这个请求归类，一般按照模块划分，这里指这个请求属于巡检模块\n        path=\"/checktaskitem/failed\",   //请求的路径\n        summary=\"根据巡检id获取巡检违规项\" //对改请求的描述，主要说明其功能\n        \n        //请求参数\n        @SWG\\Parameter(\n            name=\"item_id\",      //参数key\n            description=\"巡检id\",//参数注释\n            required=true,      //参数是否必填，注意：这里填写boolean值，不能填写字符串\n            type=\"integer\",     //参数值类型，注意：数值为integer，字符串为string\n            in=\"query\",         //参数传递的形式，注意：这里主要有query、path、body（比较麻烦，单独讨论）\n        )\n    )\n*/\n```\n\n{% asset_img swagger2.png %}   \n\n## 复杂一点的请求方式\n\n>使用post或者put等方法的时候往往涉及到了对象、数组的多层嵌套进行传值。在swagger中书写起来比较麻烦一点。对Parameter传递的参数中需要添加一个Schema方法，该方法作用就是可以在文档中生成一个model，展示请求参数的注释和数据结构。\n\n>如果Schema传递的是个object，那么在Schema方法中的Property就是它的每个属性，如果Schema传递的是个数组，并且数组中每一项都是一个object，那么需要在Property方法中添加Items方法，然后在Items中继续使用Property。\n\n```php\n/*\n     *  @SWG\\PUT(\n     *   path=\"/checktaskitem/{item_id}\",       //注意：当有参数是以path的方式传递，要在这里加上{}\n     *   tags={\"巡检\"},\n     *   summary=\"提交巡检结果\",\n     *\n             @SWG\\Parameter(                    //这里就是使用path方式传递的参数\n                name=\"item_id\",\n                required=true,\n                type=\"integer\",\n                description=\"巡检id\",\n                in=\"path\"\n             ),\n             @SWG\\Parameter(                  //当有body方式传递时，单独用一个parameter，其类型定义为body\n               name=\"person\",\n               in=\"body\",\n               required=true,\n               \n               @SWG\\Schema(                   //Schema的作用时可以有一个model对参数进行解释，具体作用用截图展示\n                   type=\"object\"              //给传递的参数定义类型，目前是对象，也可以定义为array\n                   \n                   @SWG\\Property(                      //注意：当使用了Schema后，每个字段需要用Property来定义\n                        property=\"item_serialno\",      //字段名\n                        type=\"string\",                 //字段类型\n                        description=\"和对讲平台给的巡检单号\", //字段的注释\n                   ),\n          \n                   @SWG\\Property(\n                        property=\"item_resultdata\",\n                        type=\"array\",                 //注意：这里把这个字段定义为了数组（也可以定义为object）\n                        description=\"巡检结果具体项\",\n                        \n                        @SWG\\Items(                  //注意：如果父级是[]子级是{}，需要加入Items，如果父级{}则不用添加Items\n                            @SWG\\Property(\n                               property=\"item_id\",\n                               type=\"integer\",\n                               description=\"巡检项id\"\n                            ),\n                            @SWG\\Property(\n                                property=\"children\",\n                                type=\"array\",         //同上，这里又有一个数组，并且使用了Items说明数组中嵌套了对象\n                                description=\"具体巡检内容\",\n                                \n                                @SWG\\Items(\n                                    @SWG\\Property(\n                                        property=\"item_id\",\n                                        type=\"integer\",\n                                        description=\"巡检项id\"\n                                    ),\n                                )\n                            ),\n                        )\n                   ),\n               )\n           ),\n      )\n     \n*/\n```\n{% asset_img swagger3.png %}\n{% asset_img swagger4.png %}\n\n# 返回参数\n\n>返回的参数中必定存在各种数组、对象的嵌套，我们在写swagger的时候其实可以参考复杂类型的参数传递方式，同样都是数组包裹对象，或者对象包裹数组，本质上是一样的。只是原本写在Parameter方法中的Schema现在要写在Response中。\n\n```php\n/*\n *  @SWG\\Get(\n *   path=\"/checktaskitem/failed\",\n *   tags={\"巡检\"},\n *   summary=\"根据巡检id获取该巡检违规项具体信息\",\n *\n *  @SWG\\Parameter(\n *      name=\"item_id\",\n *      description=\"巡检id\",\n *      required=true,\n *      type=\"integer\",\n *      in=\"query\"\n *  ),\n *\n *  @SWG\\Response(                                             //定义响应参数的时候，首先使用Response\n *         response=200,                                       //响应\n *         description=\"基本信息\",\n *         @SWG\\Schema(                                        //同样的这里使用Schema表示可以在model中查看注释\n *            type=\"array\",\n *                  @SWG\\Items(                                //如果父级为[]子级为{}则要是用Items，其中包含了子级{}中的属性的类型和注释\n *                      @SWG\\Property(\n *                         property=\"item_id\",\n *                         type=\"integer\",\n *                         description=\"巡检项ID\"\n *                     ),\n *                     @SWG\\Property(\n *                         property=\"inspection_id\",\n *                         type=\"string\",\n *                         description=\"巡检单id\"\n *                     ),\n *                      @SWG\\Property(\n *                         property=\"item_name\",\n *                         type=\"integer\",\n *                         description=\"巡检项名称\"\n *                     ),\n *\n *                     @SWG\\Property(\n *                         property=\"enterprise_name\",\n *                         type=\"string\",\n *                         description=\"企业名称\"\n *                     ),\n *                  ),\n *\n *                ),\n *     ),\n *   @SWG\\Response(response=401, description=\"用户验证失败\"),\n *   @SWG\\Response(response=500, description=\"服务器错误\"),\n * )\n *\n */\n```\n{% asset_img swagger5.png %}\n{% asset_img swagger6.png %}\n\n# 了解内容\n\n>很多时候我们的接口是需要带上一个token才能进行使用的，如果没有token就会锁住该接口，不允许访问。这时我们可以在最后加上security，如果没有写则表示这个接口不需要使用token，比如登录接口就不需要。\n\n```php\n/**\n *  @SWG\\Get(\n *   path=\"/checktaskitem/failed\",\n *   tags={\"巡检\"},\n *   summary=\"根据巡检id获取该巡检违规项具体信息\",\n *  @SWG\\Parameter(),\n *  @SWG\\Response(),\n*     security={\n*          {\n*              \"Bearer\":{}\n*          }\n*      },\n* )\n*/\n```\n\n{% asset_img swagger7.png %}\n","source":"_posts/swagger在laravel中的使用.md","raw":"---\nlayout: post\ntitle: swagger在laravel中的使用\ndate: 2019-07-19 11:34:01\ncategories: 开发小工具\n---\n\n# 开始前了解\n\n>推荐一个比较完成的文档[https://learnku.com/laravel/t/7430/how-to-write-api-documents-based-on-swagger-php#b5a896](https://learnku.com/laravel/t/7430/how-to-write-api-documents-based-on-swagger-php#b5a896)  \n<!-- more -->   \n>swagger主要是用于给api接口写文档的，接口主要有几个关键点需要文档对其进行解释     \n\n1. 请求方法\n2. 请求的路径\n3. 请求的参数\n4. 返沪状态\n5. 返回参数  \n\n>另外强调一点，所有的swagger语句都要写在注释里面！\n\n# 请求方法\n\n>主要是指GET、POST等请求方法在swagger中应该如何表示。    \n>如果一个模块或者说一个功能点需要多个接口，可以使用tags属性给接口打个标签。    \n\n```php\n/*\n    //请求的方法写在开头，例如：GET、POST、DELETE等\n    @SWG\\GET(\n        tags={\"巡检\"},                   //相当于给这个请求归类，一般按照模块划分，这里指这个请求属于巡检模块\n        path=\"/checktaskitem\",          //请求的路径\n        summary=\"根据巡检员获取其巡检列表\"  //对改请求的描述，主要说明其功能\n    )\n*/\n```\n\n{% asset_img swagger1.png %}  \n\n# 请求参数\n\n>参数主要有几种形式：\n\n1. query string：\tapi/checktask?item_id=1\n2. path: \tapi/checktask/1\n3. body:\tpost打包传值的形式    \n\n## 简单一点的请求方式\n\n>简单的请求方式就是指通过query或者path这两种形式进行传值的方式，因为不涉及到参数数组、对象的嵌套，因此有多少个参数就写多少个Parameter方法就可以。Parameter方法的参数配置参考：\n\n```php\n/*\n    //请求的方法写在开头，例如：GET、POST、DELETE等\n    @SWG\\GET(\n        tags={\"巡检\"},                   //相当于给这个请求归类，一般按照模块划分，这里指这个请求属于巡检模块\n        path=\"/checktaskitem/failed\",   //请求的路径\n        summary=\"根据巡检id获取巡检违规项\" //对改请求的描述，主要说明其功能\n        \n        //请求参数\n        @SWG\\Parameter(\n            name=\"item_id\",      //参数key\n            description=\"巡检id\",//参数注释\n            required=true,      //参数是否必填，注意：这里填写boolean值，不能填写字符串\n            type=\"integer\",     //参数值类型，注意：数值为integer，字符串为string\n            in=\"query\",         //参数传递的形式，注意：这里主要有query、path、body（比较麻烦，单独讨论）\n        )\n    )\n*/\n```\n\n{% asset_img swagger2.png %}   \n\n## 复杂一点的请求方式\n\n>使用post或者put等方法的时候往往涉及到了对象、数组的多层嵌套进行传值。在swagger中书写起来比较麻烦一点。对Parameter传递的参数中需要添加一个Schema方法，该方法作用就是可以在文档中生成一个model，展示请求参数的注释和数据结构。\n\n>如果Schema传递的是个object，那么在Schema方法中的Property就是它的每个属性，如果Schema传递的是个数组，并且数组中每一项都是一个object，那么需要在Property方法中添加Items方法，然后在Items中继续使用Property。\n\n```php\n/*\n     *  @SWG\\PUT(\n     *   path=\"/checktaskitem/{item_id}\",       //注意：当有参数是以path的方式传递，要在这里加上{}\n     *   tags={\"巡检\"},\n     *   summary=\"提交巡检结果\",\n     *\n             @SWG\\Parameter(                    //这里就是使用path方式传递的参数\n                name=\"item_id\",\n                required=true,\n                type=\"integer\",\n                description=\"巡检id\",\n                in=\"path\"\n             ),\n             @SWG\\Parameter(                  //当有body方式传递时，单独用一个parameter，其类型定义为body\n               name=\"person\",\n               in=\"body\",\n               required=true,\n               \n               @SWG\\Schema(                   //Schema的作用时可以有一个model对参数进行解释，具体作用用截图展示\n                   type=\"object\"              //给传递的参数定义类型，目前是对象，也可以定义为array\n                   \n                   @SWG\\Property(                      //注意：当使用了Schema后，每个字段需要用Property来定义\n                        property=\"item_serialno\",      //字段名\n                        type=\"string\",                 //字段类型\n                        description=\"和对讲平台给的巡检单号\", //字段的注释\n                   ),\n          \n                   @SWG\\Property(\n                        property=\"item_resultdata\",\n                        type=\"array\",                 //注意：这里把这个字段定义为了数组（也可以定义为object）\n                        description=\"巡检结果具体项\",\n                        \n                        @SWG\\Items(                  //注意：如果父级是[]子级是{}，需要加入Items，如果父级{}则不用添加Items\n                            @SWG\\Property(\n                               property=\"item_id\",\n                               type=\"integer\",\n                               description=\"巡检项id\"\n                            ),\n                            @SWG\\Property(\n                                property=\"children\",\n                                type=\"array\",         //同上，这里又有一个数组，并且使用了Items说明数组中嵌套了对象\n                                description=\"具体巡检内容\",\n                                \n                                @SWG\\Items(\n                                    @SWG\\Property(\n                                        property=\"item_id\",\n                                        type=\"integer\",\n                                        description=\"巡检项id\"\n                                    ),\n                                )\n                            ),\n                        )\n                   ),\n               )\n           ),\n      )\n     \n*/\n```\n{% asset_img swagger3.png %}\n{% asset_img swagger4.png %}\n\n# 返回参数\n\n>返回的参数中必定存在各种数组、对象的嵌套，我们在写swagger的时候其实可以参考复杂类型的参数传递方式，同样都是数组包裹对象，或者对象包裹数组，本质上是一样的。只是原本写在Parameter方法中的Schema现在要写在Response中。\n\n```php\n/*\n *  @SWG\\Get(\n *   path=\"/checktaskitem/failed\",\n *   tags={\"巡检\"},\n *   summary=\"根据巡检id获取该巡检违规项具体信息\",\n *\n *  @SWG\\Parameter(\n *      name=\"item_id\",\n *      description=\"巡检id\",\n *      required=true,\n *      type=\"integer\",\n *      in=\"query\"\n *  ),\n *\n *  @SWG\\Response(                                             //定义响应参数的时候，首先使用Response\n *         response=200,                                       //响应\n *         description=\"基本信息\",\n *         @SWG\\Schema(                                        //同样的这里使用Schema表示可以在model中查看注释\n *            type=\"array\",\n *                  @SWG\\Items(                                //如果父级为[]子级为{}则要是用Items，其中包含了子级{}中的属性的类型和注释\n *                      @SWG\\Property(\n *                         property=\"item_id\",\n *                         type=\"integer\",\n *                         description=\"巡检项ID\"\n *                     ),\n *                     @SWG\\Property(\n *                         property=\"inspection_id\",\n *                         type=\"string\",\n *                         description=\"巡检单id\"\n *                     ),\n *                      @SWG\\Property(\n *                         property=\"item_name\",\n *                         type=\"integer\",\n *                         description=\"巡检项名称\"\n *                     ),\n *\n *                     @SWG\\Property(\n *                         property=\"enterprise_name\",\n *                         type=\"string\",\n *                         description=\"企业名称\"\n *                     ),\n *                  ),\n *\n *                ),\n *     ),\n *   @SWG\\Response(response=401, description=\"用户验证失败\"),\n *   @SWG\\Response(response=500, description=\"服务器错误\"),\n * )\n *\n */\n```\n{% asset_img swagger5.png %}\n{% asset_img swagger6.png %}\n\n# 了解内容\n\n>很多时候我们的接口是需要带上一个token才能进行使用的，如果没有token就会锁住该接口，不允许访问。这时我们可以在最后加上security，如果没有写则表示这个接口不需要使用token，比如登录接口就不需要。\n\n```php\n/**\n *  @SWG\\Get(\n *   path=\"/checktaskitem/failed\",\n *   tags={\"巡检\"},\n *   summary=\"根据巡检id获取该巡检违规项具体信息\",\n *  @SWG\\Parameter(),\n *  @SWG\\Response(),\n*     security={\n*          {\n*              \"Bearer\":{}\n*          }\n*      },\n* )\n*/\n```\n\n{% asset_img swagger7.png %}\n","slug":"swagger在laravel中的使用","published":1,"updated":"2019-09-19T07:05:07.633Z","comments":1,"photos":[],"link":"","_id":"ck49n28cf0016fiyhi0dq1ln6","content":"<h1 id=\"开始前了解\"><a href=\"#开始前了解\" class=\"headerlink\" title=\"开始前了解\"></a>开始前了解</h1><blockquote>\n<p>推荐一个比较完成的文档<a href=\"https://learnku.com/laravel/t/7430/how-to-write-api-documents-based-on-swagger-php#b5a896\" target=\"_blank\" rel=\"noopener\">https://learnku.com/laravel/t/7430/how-to-write-api-documents-based-on-swagger-php#b5a896</a>  </p>\n</blockquote>\n<a id=\"more\"></a>   \n<blockquote>\n<p>swagger主要是用于给api接口写文档的，接口主要有几个关键点需要文档对其进行解释     </p>\n</blockquote>\n<ol>\n<li>请求方法</li>\n<li>请求的路径</li>\n<li>请求的参数</li>\n<li>返沪状态</li>\n<li>返回参数  </li>\n</ol>\n<blockquote>\n<p>另外强调一点，所有的swagger语句都要写在注释里面！</p>\n</blockquote>\n<h1 id=\"请求方法\"><a href=\"#请求方法\" class=\"headerlink\" title=\"请求方法\"></a>请求方法</h1><blockquote>\n<p>主要是指GET、POST等请求方法在swagger中应该如何表示。<br>如果一个模块或者说一个功能点需要多个接口，可以使用tags属性给接口打个标签。    </p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    //请求的方法写在开头，例如：GET、POST、DELETE等</span></span><br><span class=\"line\"><span class=\"comment\">    <span class=\"doctag\">@SWG</span>\\GET(</span></span><br><span class=\"line\"><span class=\"comment\">        tags=&#123;\"巡检\"&#125;,                   //相当于给这个请求归类，一般按照模块划分，这里指这个请求属于巡检模块</span></span><br><span class=\"line\"><span class=\"comment\">        path=\"/checktaskitem\",          //请求的路径</span></span><br><span class=\"line\"><span class=\"comment\">        summary=\"根据巡检员获取其巡检列表\"  //对改请求的描述，主要说明其功能</span></span><br><span class=\"line\"><span class=\"comment\">    )</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger1.png\">  \n\n<h1 id=\"请求参数\"><a href=\"#请求参数\" class=\"headerlink\" title=\"请求参数\"></a>请求参数</h1><blockquote>\n<p>参数主要有几种形式：</p>\n</blockquote>\n<ol>\n<li>query string：    api/checktask?item_id=1</li>\n<li>path:     api/checktask/1</li>\n<li>body:    post打包传值的形式    </li>\n</ol>\n<h2 id=\"简单一点的请求方式\"><a href=\"#简单一点的请求方式\" class=\"headerlink\" title=\"简单一点的请求方式\"></a>简单一点的请求方式</h2><blockquote>\n<p>简单的请求方式就是指通过query或者path这两种形式进行传值的方式，因为不涉及到参数数组、对象的嵌套，因此有多少个参数就写多少个Parameter方法就可以。Parameter方法的参数配置参考：</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    //请求的方法写在开头，例如：GET、POST、DELETE等</span></span><br><span class=\"line\"><span class=\"comment\">    <span class=\"doctag\">@SWG</span>\\GET(</span></span><br><span class=\"line\"><span class=\"comment\">        tags=&#123;\"巡检\"&#125;,                   //相当于给这个请求归类，一般按照模块划分，这里指这个请求属于巡检模块</span></span><br><span class=\"line\"><span class=\"comment\">        path=\"/checktaskitem/failed\",   //请求的路径</span></span><br><span class=\"line\"><span class=\"comment\">        summary=\"根据巡检id获取巡检违规项\" //对改请求的描述，主要说明其功能</span></span><br><span class=\"line\"><span class=\"comment\">        </span></span><br><span class=\"line\"><span class=\"comment\">        //请求参数</span></span><br><span class=\"line\"><span class=\"comment\">        <span class=\"doctag\">@SWG</span>\\Parameter(</span></span><br><span class=\"line\"><span class=\"comment\">            name=\"item_id\",      //参数key</span></span><br><span class=\"line\"><span class=\"comment\">            description=\"巡检id\",//参数注释</span></span><br><span class=\"line\"><span class=\"comment\">            required=true,      //参数是否必填，注意：这里填写boolean值，不能填写字符串</span></span><br><span class=\"line\"><span class=\"comment\">            type=\"integer\",     //参数值类型，注意：数值为integer，字符串为string</span></span><br><span class=\"line\"><span class=\"comment\">            in=\"query\",         //参数传递的形式，注意：这里主要有query、path、body（比较麻烦，单独讨论）</span></span><br><span class=\"line\"><span class=\"comment\">        )</span></span><br><span class=\"line\"><span class=\"comment\">    )</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger2.png\">   \n\n<h2 id=\"复杂一点的请求方式\"><a href=\"#复杂一点的请求方式\" class=\"headerlink\" title=\"复杂一点的请求方式\"></a>复杂一点的请求方式</h2><blockquote>\n<p>使用post或者put等方法的时候往往涉及到了对象、数组的多层嵌套进行传值。在swagger中书写起来比较麻烦一点。对Parameter传递的参数中需要添加一个Schema方法，该方法作用就是可以在文档中生成一个model，展示请求参数的注释和数据结构。</p>\n</blockquote>\n<blockquote>\n<p>如果Schema传递的是个object，那么在Schema方法中的Property就是它的每个属性，如果Schema传递的是个数组，并且数组中每一项都是一个object，那么需要在Property方法中添加Items方法，然后在Items中继续使用Property。</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     *  <span class=\"doctag\">@SWG</span>\\PUT(</span></span><br><span class=\"line\"><span class=\"comment\">     *   path=\"/checktaskitem/&#123;item_id&#125;\",       //注意：当有参数是以path的方式传递，要在这里加上&#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     *   tags=&#123;\"巡检\"&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">     *   summary=\"提交巡检结果\",</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">             <span class=\"doctag\">@SWG</span>\\Parameter(                    //这里就是使用path方式传递的参数</span></span><br><span class=\"line\"><span class=\"comment\">                name=\"item_id\",</span></span><br><span class=\"line\"><span class=\"comment\">                required=true,</span></span><br><span class=\"line\"><span class=\"comment\">                type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\">                description=\"巡检id\",</span></span><br><span class=\"line\"><span class=\"comment\">                in=\"path\"</span></span><br><span class=\"line\"><span class=\"comment\">             ),</span></span><br><span class=\"line\"><span class=\"comment\">             <span class=\"doctag\">@SWG</span>\\Parameter(                  //当有body方式传递时，单独用一个parameter，其类型定义为body</span></span><br><span class=\"line\"><span class=\"comment\">               name=\"person\",</span></span><br><span class=\"line\"><span class=\"comment\">               in=\"body\",</span></span><br><span class=\"line\"><span class=\"comment\">               required=true,</span></span><br><span class=\"line\"><span class=\"comment\">               </span></span><br><span class=\"line\"><span class=\"comment\">               <span class=\"doctag\">@SWG</span>\\Schema(                   //Schema的作用时可以有一个model对参数进行解释，具体作用用截图展示</span></span><br><span class=\"line\"><span class=\"comment\">                   type=\"object\"              //给传递的参数定义类型，目前是对象，也可以定义为array</span></span><br><span class=\"line\"><span class=\"comment\">                   </span></span><br><span class=\"line\"><span class=\"comment\">                   <span class=\"doctag\">@SWG</span>\\Property(                      //注意：当使用了Schema后，每个字段需要用Property来定义</span></span><br><span class=\"line\"><span class=\"comment\">                        property=\"item_serialno\",      //字段名</span></span><br><span class=\"line\"><span class=\"comment\">                        type=\"string\",                 //字段类型</span></span><br><span class=\"line\"><span class=\"comment\">                        description=\"和对讲平台给的巡检单号\", //字段的注释</span></span><br><span class=\"line\"><span class=\"comment\">                   ),</span></span><br><span class=\"line\"><span class=\"comment\">          </span></span><br><span class=\"line\"><span class=\"comment\">                   <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\">                        property=\"item_resultdata\",</span></span><br><span class=\"line\"><span class=\"comment\">                        type=\"array\",                 //注意：这里把这个字段定义为了数组（也可以定义为object）</span></span><br><span class=\"line\"><span class=\"comment\">                        description=\"巡检结果具体项\",</span></span><br><span class=\"line\"><span class=\"comment\">                        </span></span><br><span class=\"line\"><span class=\"comment\">                        <span class=\"doctag\">@SWG</span>\\Items(                  //注意：如果父级是[]子级是&#123;&#125;，需要加入Items，如果父级&#123;&#125;则不用添加Items</span></span><br><span class=\"line\"><span class=\"comment\">                            <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\">                               property=\"item_id\",</span></span><br><span class=\"line\"><span class=\"comment\">                               type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\">                               description=\"巡检项id\"</span></span><br><span class=\"line\"><span class=\"comment\">                            ),</span></span><br><span class=\"line\"><span class=\"comment\">                            <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\">                                property=\"children\",</span></span><br><span class=\"line\"><span class=\"comment\">                                type=\"array\",         //同上，这里又有一个数组，并且使用了Items说明数组中嵌套了对象</span></span><br><span class=\"line\"><span class=\"comment\">                                description=\"具体巡检内容\",</span></span><br><span class=\"line\"><span class=\"comment\">                                </span></span><br><span class=\"line\"><span class=\"comment\">                                <span class=\"doctag\">@SWG</span>\\Items(</span></span><br><span class=\"line\"><span class=\"comment\">                                    <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\">                                        property=\"item_id\",</span></span><br><span class=\"line\"><span class=\"comment\">                                        type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\">                                        description=\"巡检项id\"</span></span><br><span class=\"line\"><span class=\"comment\">                                    ),</span></span><br><span class=\"line\"><span class=\"comment\">                                )</span></span><br><span class=\"line\"><span class=\"comment\">                            ),</span></span><br><span class=\"line\"><span class=\"comment\">                        )</span></span><br><span class=\"line\"><span class=\"comment\">                   ),</span></span><br><span class=\"line\"><span class=\"comment\">               )</span></span><br><span class=\"line\"><span class=\"comment\">           ),</span></span><br><span class=\"line\"><span class=\"comment\">      )</span></span><br><span class=\"line\"><span class=\"comment\">     </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger3.png\">\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger4.png\">\n\n<h1 id=\"返回参数\"><a href=\"#返回参数\" class=\"headerlink\" title=\"返回参数\"></a>返回参数</h1><blockquote>\n<p>返回的参数中必定存在各种数组、对象的嵌套，我们在写swagger的时候其实可以参考复杂类型的参数传递方式，同样都是数组包裹对象，或者对象包裹数组，本质上是一样的。只是原本写在Parameter方法中的Schema现在要写在Response中。</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Get(</span></span><br><span class=\"line\"><span class=\"comment\"> *   path=\"/checktaskitem/failed\",</span></span><br><span class=\"line\"><span class=\"comment\"> *   tags=&#123;\"巡检\"&#125;,</span></span><br><span class=\"line\"><span class=\"comment\"> *   summary=\"根据巡检id获取该巡检违规项具体信息\",</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Parameter(</span></span><br><span class=\"line\"><span class=\"comment\"> *      name=\"item_id\",</span></span><br><span class=\"line\"><span class=\"comment\"> *      description=\"巡检id\",</span></span><br><span class=\"line\"><span class=\"comment\"> *      required=true,</span></span><br><span class=\"line\"><span class=\"comment\"> *      type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\"> *      in=\"query\"</span></span><br><span class=\"line\"><span class=\"comment\"> *  ),</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Response(                                             //定义响应参数的时候，首先使用Response</span></span><br><span class=\"line\"><span class=\"comment\"> *         response=200,                                       //响应</span></span><br><span class=\"line\"><span class=\"comment\"> *         description=\"基本信息\",</span></span><br><span class=\"line\"><span class=\"comment\"> *         <span class=\"doctag\">@SWG</span>\\Schema(                                        //同样的这里使用Schema表示可以在model中查看注释</span></span><br><span class=\"line\"><span class=\"comment\"> *            type=\"array\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                  <span class=\"doctag\">@SWG</span>\\Items(                                //如果父级为[]子级为&#123;&#125;则要是用Items，其中包含了子级&#123;&#125;中的属性的类型和注释</span></span><br><span class=\"line\"><span class=\"comment\"> *                      <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\"> *                         property=\"item_id\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         description=\"巡检项ID\"</span></span><br><span class=\"line\"><span class=\"comment\"> *                     ),</span></span><br><span class=\"line\"><span class=\"comment\"> *                     <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\"> *                         property=\"inspection_id\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         type=\"string\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         description=\"巡检单id\"</span></span><br><span class=\"line\"><span class=\"comment\"> *                     ),</span></span><br><span class=\"line\"><span class=\"comment\"> *                      <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\"> *                         property=\"item_name\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         description=\"巡检项名称\"</span></span><br><span class=\"line\"><span class=\"comment\"> *                     ),</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *                     <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\"> *                         property=\"enterprise_name\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         type=\"string\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         description=\"企业名称\"</span></span><br><span class=\"line\"><span class=\"comment\"> *                     ),</span></span><br><span class=\"line\"><span class=\"comment\"> *                  ),</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *                ),</span></span><br><span class=\"line\"><span class=\"comment\"> *     ),</span></span><br><span class=\"line\"><span class=\"comment\"> *   <span class=\"doctag\">@SWG</span>\\Response(response=401, description=\"用户验证失败\"),</span></span><br><span class=\"line\"><span class=\"comment\"> *   <span class=\"doctag\">@SWG</span>\\Response(response=500, description=\"服务器错误\"),</span></span><br><span class=\"line\"><span class=\"comment\"> * )</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger5.png\">\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger6.png\">\n\n<h1 id=\"了解内容\"><a href=\"#了解内容\" class=\"headerlink\" title=\"了解内容\"></a>了解内容</h1><blockquote>\n<p>很多时候我们的接口是需要带上一个token才能进行使用的，如果没有token就会锁住该接口，不允许访问。这时我们可以在最后加上security，如果没有写则表示这个接口不需要使用token，比如登录接口就不需要。</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Get(</span></span><br><span class=\"line\"><span class=\"comment\"> *   path=\"/checktaskitem/failed\",</span></span><br><span class=\"line\"><span class=\"comment\"> *   tags=&#123;\"巡检\"&#125;,</span></span><br><span class=\"line\"><span class=\"comment\"> *   summary=\"根据巡检id获取该巡检违规项具体信息\",</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Parameter(),</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Response(),</span></span><br><span class=\"line\"><span class=\"comment\">*     security=&#123;</span></span><br><span class=\"line\"><span class=\"comment\">*          &#123;</span></span><br><span class=\"line\"><span class=\"comment\">*              \"Bearer\":&#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">*          &#125;</span></span><br><span class=\"line\"><span class=\"comment\">*      &#125;,</span></span><br><span class=\"line\"><span class=\"comment\">* )</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger7.png\">\n","site":{"data":{}},"excerpt":"<h1 id=\"开始前了解\"><a href=\"#开始前了解\" class=\"headerlink\" title=\"开始前了解\"></a>开始前了解</h1><blockquote>\n<p>推荐一个比较完成的文档<a href=\"https://learnku.com/laravel/t/7430/how-to-write-api-documents-based-on-swagger-php#b5a896\" target=\"_blank\" rel=\"noopener\">https://learnku.com/laravel/t/7430/how-to-write-api-documents-based-on-swagger-php#b5a896</a>  </p>\n</blockquote>","more":"<blockquote>\n<p>swagger主要是用于给api接口写文档的，接口主要有几个关键点需要文档对其进行解释     </p>\n</blockquote>\n<ol>\n<li>请求方法</li>\n<li>请求的路径</li>\n<li>请求的参数</li>\n<li>返沪状态</li>\n<li>返回参数  </li>\n</ol>\n<blockquote>\n<p>另外强调一点，所有的swagger语句都要写在注释里面！</p>\n</blockquote>\n<h1 id=\"请求方法\"><a href=\"#请求方法\" class=\"headerlink\" title=\"请求方法\"></a>请求方法</h1><blockquote>\n<p>主要是指GET、POST等请求方法在swagger中应该如何表示。<br>如果一个模块或者说一个功能点需要多个接口，可以使用tags属性给接口打个标签。    </p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    //请求的方法写在开头，例如：GET、POST、DELETE等</span></span><br><span class=\"line\"><span class=\"comment\">    <span class=\"doctag\">@SWG</span>\\GET(</span></span><br><span class=\"line\"><span class=\"comment\">        tags=&#123;\"巡检\"&#125;,                   //相当于给这个请求归类，一般按照模块划分，这里指这个请求属于巡检模块</span></span><br><span class=\"line\"><span class=\"comment\">        path=\"/checktaskitem\",          //请求的路径</span></span><br><span class=\"line\"><span class=\"comment\">        summary=\"根据巡检员获取其巡检列表\"  //对改请求的描述，主要说明其功能</span></span><br><span class=\"line\"><span class=\"comment\">    )</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger1.png\">  \n\n<h1 id=\"请求参数\"><a href=\"#请求参数\" class=\"headerlink\" title=\"请求参数\"></a>请求参数</h1><blockquote>\n<p>参数主要有几种形式：</p>\n</blockquote>\n<ol>\n<li>query string：    api/checktask?item_id=1</li>\n<li>path:     api/checktask/1</li>\n<li>body:    post打包传值的形式    </li>\n</ol>\n<h2 id=\"简单一点的请求方式\"><a href=\"#简单一点的请求方式\" class=\"headerlink\" title=\"简单一点的请求方式\"></a>简单一点的请求方式</h2><blockquote>\n<p>简单的请求方式就是指通过query或者path这两种形式进行传值的方式，因为不涉及到参数数组、对象的嵌套，因此有多少个参数就写多少个Parameter方法就可以。Parameter方法的参数配置参考：</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    //请求的方法写在开头，例如：GET、POST、DELETE等</span></span><br><span class=\"line\"><span class=\"comment\">    <span class=\"doctag\">@SWG</span>\\GET(</span></span><br><span class=\"line\"><span class=\"comment\">        tags=&#123;\"巡检\"&#125;,                   //相当于给这个请求归类，一般按照模块划分，这里指这个请求属于巡检模块</span></span><br><span class=\"line\"><span class=\"comment\">        path=\"/checktaskitem/failed\",   //请求的路径</span></span><br><span class=\"line\"><span class=\"comment\">        summary=\"根据巡检id获取巡检违规项\" //对改请求的描述，主要说明其功能</span></span><br><span class=\"line\"><span class=\"comment\">        </span></span><br><span class=\"line\"><span class=\"comment\">        //请求参数</span></span><br><span class=\"line\"><span class=\"comment\">        <span class=\"doctag\">@SWG</span>\\Parameter(</span></span><br><span class=\"line\"><span class=\"comment\">            name=\"item_id\",      //参数key</span></span><br><span class=\"line\"><span class=\"comment\">            description=\"巡检id\",//参数注释</span></span><br><span class=\"line\"><span class=\"comment\">            required=true,      //参数是否必填，注意：这里填写boolean值，不能填写字符串</span></span><br><span class=\"line\"><span class=\"comment\">            type=\"integer\",     //参数值类型，注意：数值为integer，字符串为string</span></span><br><span class=\"line\"><span class=\"comment\">            in=\"query\",         //参数传递的形式，注意：这里主要有query、path、body（比较麻烦，单独讨论）</span></span><br><span class=\"line\"><span class=\"comment\">        )</span></span><br><span class=\"line\"><span class=\"comment\">    )</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger2.png\">   \n\n<h2 id=\"复杂一点的请求方式\"><a href=\"#复杂一点的请求方式\" class=\"headerlink\" title=\"复杂一点的请求方式\"></a>复杂一点的请求方式</h2><blockquote>\n<p>使用post或者put等方法的时候往往涉及到了对象、数组的多层嵌套进行传值。在swagger中书写起来比较麻烦一点。对Parameter传递的参数中需要添加一个Schema方法，该方法作用就是可以在文档中生成一个model，展示请求参数的注释和数据结构。</p>\n</blockquote>\n<blockquote>\n<p>如果Schema传递的是个object，那么在Schema方法中的Property就是它的每个属性，如果Schema传递的是个数组，并且数组中每一项都是一个object，那么需要在Property方法中添加Items方法，然后在Items中继续使用Property。</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     *  <span class=\"doctag\">@SWG</span>\\PUT(</span></span><br><span class=\"line\"><span class=\"comment\">     *   path=\"/checktaskitem/&#123;item_id&#125;\",       //注意：当有参数是以path的方式传递，要在这里加上&#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     *   tags=&#123;\"巡检\"&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">     *   summary=\"提交巡检结果\",</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">             <span class=\"doctag\">@SWG</span>\\Parameter(                    //这里就是使用path方式传递的参数</span></span><br><span class=\"line\"><span class=\"comment\">                name=\"item_id\",</span></span><br><span class=\"line\"><span class=\"comment\">                required=true,</span></span><br><span class=\"line\"><span class=\"comment\">                type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\">                description=\"巡检id\",</span></span><br><span class=\"line\"><span class=\"comment\">                in=\"path\"</span></span><br><span class=\"line\"><span class=\"comment\">             ),</span></span><br><span class=\"line\"><span class=\"comment\">             <span class=\"doctag\">@SWG</span>\\Parameter(                  //当有body方式传递时，单独用一个parameter，其类型定义为body</span></span><br><span class=\"line\"><span class=\"comment\">               name=\"person\",</span></span><br><span class=\"line\"><span class=\"comment\">               in=\"body\",</span></span><br><span class=\"line\"><span class=\"comment\">               required=true,</span></span><br><span class=\"line\"><span class=\"comment\">               </span></span><br><span class=\"line\"><span class=\"comment\">               <span class=\"doctag\">@SWG</span>\\Schema(                   //Schema的作用时可以有一个model对参数进行解释，具体作用用截图展示</span></span><br><span class=\"line\"><span class=\"comment\">                   type=\"object\"              //给传递的参数定义类型，目前是对象，也可以定义为array</span></span><br><span class=\"line\"><span class=\"comment\">                   </span></span><br><span class=\"line\"><span class=\"comment\">                   <span class=\"doctag\">@SWG</span>\\Property(                      //注意：当使用了Schema后，每个字段需要用Property来定义</span></span><br><span class=\"line\"><span class=\"comment\">                        property=\"item_serialno\",      //字段名</span></span><br><span class=\"line\"><span class=\"comment\">                        type=\"string\",                 //字段类型</span></span><br><span class=\"line\"><span class=\"comment\">                        description=\"和对讲平台给的巡检单号\", //字段的注释</span></span><br><span class=\"line\"><span class=\"comment\">                   ),</span></span><br><span class=\"line\"><span class=\"comment\">          </span></span><br><span class=\"line\"><span class=\"comment\">                   <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\">                        property=\"item_resultdata\",</span></span><br><span class=\"line\"><span class=\"comment\">                        type=\"array\",                 //注意：这里把这个字段定义为了数组（也可以定义为object）</span></span><br><span class=\"line\"><span class=\"comment\">                        description=\"巡检结果具体项\",</span></span><br><span class=\"line\"><span class=\"comment\">                        </span></span><br><span class=\"line\"><span class=\"comment\">                        <span class=\"doctag\">@SWG</span>\\Items(                  //注意：如果父级是[]子级是&#123;&#125;，需要加入Items，如果父级&#123;&#125;则不用添加Items</span></span><br><span class=\"line\"><span class=\"comment\">                            <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\">                               property=\"item_id\",</span></span><br><span class=\"line\"><span class=\"comment\">                               type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\">                               description=\"巡检项id\"</span></span><br><span class=\"line\"><span class=\"comment\">                            ),</span></span><br><span class=\"line\"><span class=\"comment\">                            <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\">                                property=\"children\",</span></span><br><span class=\"line\"><span class=\"comment\">                                type=\"array\",         //同上，这里又有一个数组，并且使用了Items说明数组中嵌套了对象</span></span><br><span class=\"line\"><span class=\"comment\">                                description=\"具体巡检内容\",</span></span><br><span class=\"line\"><span class=\"comment\">                                </span></span><br><span class=\"line\"><span class=\"comment\">                                <span class=\"doctag\">@SWG</span>\\Items(</span></span><br><span class=\"line\"><span class=\"comment\">                                    <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\">                                        property=\"item_id\",</span></span><br><span class=\"line\"><span class=\"comment\">                                        type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\">                                        description=\"巡检项id\"</span></span><br><span class=\"line\"><span class=\"comment\">                                    ),</span></span><br><span class=\"line\"><span class=\"comment\">                                )</span></span><br><span class=\"line\"><span class=\"comment\">                            ),</span></span><br><span class=\"line\"><span class=\"comment\">                        )</span></span><br><span class=\"line\"><span class=\"comment\">                   ),</span></span><br><span class=\"line\"><span class=\"comment\">               )</span></span><br><span class=\"line\"><span class=\"comment\">           ),</span></span><br><span class=\"line\"><span class=\"comment\">      )</span></span><br><span class=\"line\"><span class=\"comment\">     </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger3.png\">\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger4.png\">\n\n<h1 id=\"返回参数\"><a href=\"#返回参数\" class=\"headerlink\" title=\"返回参数\"></a>返回参数</h1><blockquote>\n<p>返回的参数中必定存在各种数组、对象的嵌套，我们在写swagger的时候其实可以参考复杂类型的参数传递方式，同样都是数组包裹对象，或者对象包裹数组，本质上是一样的。只是原本写在Parameter方法中的Schema现在要写在Response中。</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Get(</span></span><br><span class=\"line\"><span class=\"comment\"> *   path=\"/checktaskitem/failed\",</span></span><br><span class=\"line\"><span class=\"comment\"> *   tags=&#123;\"巡检\"&#125;,</span></span><br><span class=\"line\"><span class=\"comment\"> *   summary=\"根据巡检id获取该巡检违规项具体信息\",</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Parameter(</span></span><br><span class=\"line\"><span class=\"comment\"> *      name=\"item_id\",</span></span><br><span class=\"line\"><span class=\"comment\"> *      description=\"巡检id\",</span></span><br><span class=\"line\"><span class=\"comment\"> *      required=true,</span></span><br><span class=\"line\"><span class=\"comment\"> *      type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\"> *      in=\"query\"</span></span><br><span class=\"line\"><span class=\"comment\"> *  ),</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Response(                                             //定义响应参数的时候，首先使用Response</span></span><br><span class=\"line\"><span class=\"comment\"> *         response=200,                                       //响应</span></span><br><span class=\"line\"><span class=\"comment\"> *         description=\"基本信息\",</span></span><br><span class=\"line\"><span class=\"comment\"> *         <span class=\"doctag\">@SWG</span>\\Schema(                                        //同样的这里使用Schema表示可以在model中查看注释</span></span><br><span class=\"line\"><span class=\"comment\"> *            type=\"array\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                  <span class=\"doctag\">@SWG</span>\\Items(                                //如果父级为[]子级为&#123;&#125;则要是用Items，其中包含了子级&#123;&#125;中的属性的类型和注释</span></span><br><span class=\"line\"><span class=\"comment\"> *                      <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\"> *                         property=\"item_id\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         description=\"巡检项ID\"</span></span><br><span class=\"line\"><span class=\"comment\"> *                     ),</span></span><br><span class=\"line\"><span class=\"comment\"> *                     <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\"> *                         property=\"inspection_id\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         type=\"string\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         description=\"巡检单id\"</span></span><br><span class=\"line\"><span class=\"comment\"> *                     ),</span></span><br><span class=\"line\"><span class=\"comment\"> *                      <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\"> *                         property=\"item_name\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         type=\"integer\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         description=\"巡检项名称\"</span></span><br><span class=\"line\"><span class=\"comment\"> *                     ),</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *                     <span class=\"doctag\">@SWG</span>\\Property(</span></span><br><span class=\"line\"><span class=\"comment\"> *                         property=\"enterprise_name\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         type=\"string\",</span></span><br><span class=\"line\"><span class=\"comment\"> *                         description=\"企业名称\"</span></span><br><span class=\"line\"><span class=\"comment\"> *                     ),</span></span><br><span class=\"line\"><span class=\"comment\"> *                  ),</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *                ),</span></span><br><span class=\"line\"><span class=\"comment\"> *     ),</span></span><br><span class=\"line\"><span class=\"comment\"> *   <span class=\"doctag\">@SWG</span>\\Response(response=401, description=\"用户验证失败\"),</span></span><br><span class=\"line\"><span class=\"comment\"> *   <span class=\"doctag\">@SWG</span>\\Response(response=500, description=\"服务器错误\"),</span></span><br><span class=\"line\"><span class=\"comment\"> * )</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger5.png\">\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger6.png\">\n\n<h1 id=\"了解内容\"><a href=\"#了解内容\" class=\"headerlink\" title=\"了解内容\"></a>了解内容</h1><blockquote>\n<p>很多时候我们的接口是需要带上一个token才能进行使用的，如果没有token就会锁住该接口，不允许访问。这时我们可以在最后加上security，如果没有写则表示这个接口不需要使用token，比如登录接口就不需要。</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Get(</span></span><br><span class=\"line\"><span class=\"comment\"> *   path=\"/checktaskitem/failed\",</span></span><br><span class=\"line\"><span class=\"comment\"> *   tags=&#123;\"巡检\"&#125;,</span></span><br><span class=\"line\"><span class=\"comment\"> *   summary=\"根据巡检id获取该巡检违规项具体信息\",</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Parameter(),</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@SWG</span>\\Response(),</span></span><br><span class=\"line\"><span class=\"comment\">*     security=&#123;</span></span><br><span class=\"line\"><span class=\"comment\">*          &#123;</span></span><br><span class=\"line\"><span class=\"comment\">*              \"Bearer\":&#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">*          &#125;</span></span><br><span class=\"line\"><span class=\"comment\">*      &#125;,</span></span><br><span class=\"line\"><span class=\"comment\">* )</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/2019/07/19/swagger在laravel中的使用/swagger7.png\">"},{"title":"流媒体播放前端方案","date":"2019-12-02T08:10:31.000Z","_content":"\n# 前言\n\n当前应用比较多的流媒体协议主要是RTMP、HTTP-FLV、HLS这三种，具体每种协议有什么特点在另一篇[学习记录中](https://www.xiaotaotao.vip/2019/11/28/%E6%B5%81%E5%AA%92%E4%BD%93%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%AE%A4%E8%AF%86/)。正是因为使用协议的不同，传输的数据格式不同，所以在前端进行播流的时候会有不同的解决方案。对不同的需求，使用的解决方案难易也不相同。下面主要是针对上面三种流媒体协议的一些解决方案。\n\n# video.js\n\nvideo.js是现在比较完善的一个播放器了，他可以兼容RTMP、HTTP-FLV、HLS三种流。但是实现播流使用的技术不完全相同。其中HLS的流会被放在video标签中播放，RTMP、HTTP-FLV的流则只能使用flash插件进行播放。该播放器功能比较强大，具体的使用可以参考[官方文档](https://docs.videojs.com/)。因为有针对vue项目的[单独封装](https://github.com/surmon-china/vue-video-player)，所以这里给出了video.js在vue项目中的初级使用方法。\n\n```html\n<template>\n    <div>\n        <videoPlayer \n        class=\"video-player-box\"\n        ref=\"videoPlayer\"\n        :options=\"playerOptions\"\n        :playsinline=\"true\"\n        ></videoPlayer>\n    </div>\n</template>\n<script>\n\n/* 最好以下面这种方式引入，如果按照文档中的方式引入会有bug */\n\nimport { videoPlayer } from 'vue-video-player';\nimport 'videojs-contrib-hls' //播放hls协议流记得引入(video.js中有，直接引入即可)\nimport 'videojs-flash'\t\t//需要使用flash插件播放的时候引入（需要npm下载）\nrequire('video.js/dist/video-js.css')\nrequire('vue-video-player/src/custom-theme.css')\n\n\nexport default {\n    data(){\n        return{\n\t\t\tplayerOptions:{\n\t\t\t  \tplaybackRates: [0.7, 1.0, 1.5, 2.0], //播放速度\n\t\t\t\tautoplay: false, //如果true,浏览器准备好时开始回放。\n\t\t\t\tmuted: false, // 默认情况下将会消除任何音频。\n\t\t\t\tloop: false, // 导致视频一结束就重新开始。\n\t\t\t\tpreload: 'auto', // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\n\t\t\t\tlanguage: 'zh-CN',\n\t\t\t\taspectRatio: '16:9', // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\n\t\t\t\tfluid: false, // 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。\n\t\t\t\tsources: [{\n\t\t\t\t\ttype: \"rtmp/flv\",\n\t\t\t\t\tsrc:'http://xxxxxxxx:18080/app/stream.flv?token=60ba75a736762ce8c946fb65fd0e8b59_16ec5c56b75'\n\t\t\t\t}],\n\t\t\t\ttechOrder:['flash'],  //该数组决定了使用播放器的顺序这里表示只使用flash，也可以使用['html','flash']先使用video标签\n\t\t\t\tposter: \"\", //你的封面地址\n\t\t\t\tnotSupportedMessage: '此视频暂无法播放，请稍后再试', //允许覆盖Video.js无法播放媒体源时显示的默认信息。\n\t\t\t\tcontrolBar: {\n\t\t\t\t\ttimeDivider: true,\n\t\t\t\t\tdurationDisplay: true,\n\t\t\t\t\tremainingTimeDisplay: false,\n\t\t\t\t\tfullscreenToggle: true //全屏按钮\n\t\t\t\t},\t\t\t\t\t\n\t\t  },\n        }\n    },\n    components:{\n        videoPlayer\n    }\n}\n</script>\n```\n\n# flv.js\n\n该协议是bilibili公司的开源协议，因为video标签不支持flv格式的视频，所以HTTP-FLV的流只能使用flash插件播放。flv.js就是解决HTTP-FLV的流不能在video标签播放的库。主要原理是通过将flv格式转码为mp4格式后，再使用video播放。因为该js库的开源才使得大家可以既使用延迟非常低的HTTP-FLV协议，又可以使用video标签进行自定义交互(flv.js在移动端不兼容，所以在移动端浏览器无法使用)。以下是在vue项目中简单使用flv.js的方法，关于部分使用中的坑，可以参考[这里](https://www.xiaotaotao.vip/2019/11/13/VUE%E4%B8%AD%E4%BD%BF%E7%94%A8flvjs%E8%B8%A9%E5%9D%91/)。\n\n```html\n<template>\n  <div id=\"app\">\n\t<video id=\"videoElement\" controls autoplay muted width=\"600\" height=\"450\"></video>\n  </div>\n</template>\n<script>\nimport flvjs from 'flv.js'\nexport default {\n  mounted(){\n\tif (flvjs.isSupported()) {\n        let videoElement = document.getElementById('videoElement');\n        let flvPlayer = flvjs.createPlayer({\n\t\t\ttype: 'flv',\n\t\t\tisLive: true,   //直播流\n\t\t\thasAudio: false,\n\t\t\turl:'http://xxxxxx/6538-1.1567494734966.flv'\n\t\t});\n\t\tconsole.log(flvPlayer,'flv对象')\n        flvPlayer.attachMediaElement(videoElement);\n        flvPlayer.load();\n        flvPlayer.play();\n    }\n  },\n}\n</script>\n\n```\n\n# aliplayer\n\n阿里巴巴的视频播放器，可以兼容RTMP、HTTP-FLV、HLS三种协议流，其中可以使用video标签播放HLS和HTTP-FLV（点播可以，直播暂时没有调试好，理论上是可以的，调试好后补充），RTMP协议的流也只能使用flash插件播放。有大公司背景做支撑，应该不用担心该库的维护问题，而且兼容也做的比价好，使用熟练后应该是一个比较完善的解决方案。以下是在vue项目中基础的使用方法，关于该库的使用细节待深入学习了解后再记录。\n\n```html\n<template>\n    <div class='prism-player' :id='playerId' :style='playStyle'></div>\n</template>\n<script>\n    export default {\n        name: 'Aliplayer',\n        props: {\n            playStyle: {\n                type: String,\n                default: ''\n            },\n            aliplayerSdkPath: {\n                // Aliplayer 代码的路径\n                type: String,\n                default: 'https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js'\n            },\n            autoplay: {\n                type: Boolean,\n                default: false\n            },\n            isLive: {\n                type: Boolean,\n                default: false\n            },\n            playsinline: {\n                type: Boolean,\n                default: false\n            },\n            width: {\n                type: String,\n                default: '100%'\n            },\n            height: {\n                type: String,\n                default: '320px'\n            },\n            controlBarVisibility: {\n                type: String,\n                default: 'always'\n            },\n            useH5Prism: {\n                type: Boolean,\n                default: false\n            },\n            useFlashPrism: {\n                type: Boolean,\n                default: false\n            },\n            vid: {\n                type: String,\n                default: ''\n            },\n            playauth: {\n                type: String,\n                default: ''\n            },\n            source: {\n                type: String,\n                default: ''\n            },\n            cover: {\n                type: String,\n                default: ''\n            },\n            format: {\n                type: String,\n                default: 'm3u8'\n            },\n            x5_video_position: {\n                type: String,\n                default: 'top'\n            },\n            x5_type: {\n                type: String,\n                default: 'h5'\n            },\n            x5_fullscreen: {\n                type: Boolean,\n                default: false\n            },\n            x5_orientation: {\n                type: Number,\n                default: 2\n            },\n            autoPlayDelay: {\n                type: Number,\n                default: 0\n            },\n            autoPlayDelayDisplayText: {\n                type: String\n            }\n        },\n        data () {\n            return {\n                playerId: 'aliplayer_' + Math.random() * 100000000000000000,\n                scriptTagStatus: 0,\n                instance: null\n            }\n        },\n        created () {\n            if (window.Aliplayer !== undefined) {\n                // 如果全局对象存在，说明编辑器代码已经初始化完成，直接加载编辑器\n                this.scriptTagStatus = 2;\n                this.initAliplayer()\n            } else {\n                // 如果全局对象不存在，说明编辑器代码还没有加载完成，需要加载编辑器代码\n                this.insertScriptTag()\n            }\n        },\n        mounted () {\n            if (window.Aliplayer !== undefined) {\n                // 如果全局对象存在，说明编辑器代码已经初始化完成，直接加载编辑器\n                this.scriptTagStatus = 2;\n                this.initAliplayer()\n            } else {\n                // 如果全局对象不存在，说明编辑器代码还没有加载完成，需要加载编辑器代码\n                this.insertScriptTag()\n            }\n        },\n        methods: {\n            insertScriptTag () {\n                const _this = this;\n                let playerScriptTag = document.getElementById('playerScriptTag');\n                // 如果这个tag不存在，则生成相关代码tag以加载代码\n                if (playerScriptTag === null) {\n                    playerScriptTag = document.createElement('script');\n                    playerScriptTag.type = 'text/javascript';\n                    playerScriptTag.src = this.aliplayerSdkPath;\n                    playerScriptTag.id = 'playerScriptTag';\n                    let s = document.getElementsByTagName('head')[0];\n                    s.appendChild(playerScriptTag)\n                }\n                if (playerScriptTag.loaded) {\n                    _this.scriptTagStatus++\n                } else {\n                    playerScriptTag.addEventListener('load', () => {\n                        _this.scriptTagStatus++;\n                        playerScriptTag.loaded = true;\n                        _this.initAliplayer()\n                    })\n                }\n                _this.initAliplayer()\n            },\n            initAliplayer () {\n                const _this = this;\n                // scriptTagStatus 为 2 的时候，说明两个必需引入的 js 文件都已经被引入，且加载完成\n                if (_this.scriptTagStatus === 2 && _this.instance === null) {\n                    // Vue 异步执行 DOM 更新，这样一来代码执行到这里的时候可能 template 里面的 script 标签还没真正创建\n                    // 所以，我们只能在 nextTick 里面初始化 Aliplayer\n                    _this.$nextTick(() => {\n                        _this.instance = window.Aliplayer({\n                            id: _this.playerId,\n                            autoplay: _this.autoplay,\n                            isLive: _this.isLive,\n                            playsinline: _this.playsinline,\n                            format: _this.format,\n                            width: _this.width,\n                            height: _this.height,\n                            controlBarVisibility: _this.controlBarVisibility,\n                            useH5Prism: _this.useH5Prism,\n                            useFlashPrism: _this.useFlashPrism,\n                            vid: _this.vid,\n                            playauth: _this.playauth,\n                            source: _this.source,\n                            cover: _this.cover,\n                            x5_video_position: _this.x5_video_position,\n                            x5_type: _this.x5_type,\n                            x5_fullscreen: _this.x5_fullscreen,\n                            x5_orientation: _this.x5_orientation,\n                            autoPlayDelay: _this.autoPlayDelay,\n\t\t\t\t\t\t\tautoPlayDelayDisplayText: _this.autoPlayDelayDisplayText,\n\n\t\t\t\t\t\t\tenableStashBufferForFlv:true,\n\n                        });\n                        // 绑定事件，当 AliPlayer 初始化完成后，将编辑器实例通过自定义的 ready 事件交出去\n                        _this.instance.on('ready', () => {\n                            this.$emit('ready', _this.instance)\n                        });\n                        _this.instance.on('play', () => {\n                            this.$emit('play', _this.instance)\n                        });\n                        _this.instance.on('pause', () => {\n                            this.$emit('pause', _this.instance)\n                        });\n                        _this.instance.on('ended', () => {\n                            this.$emit('ended', _this.instance)\n                        });\n                        _this.instance.on('liveStreamStop', () => {\n                            this.$emit('liveStreamStop', _this.instance)\n                        });\n                        _this.instance.on('m3u8Retry', () => {\n                            this.$emit('m3u8Retry', _this.instance)\n                        });\n                        _this.instance.on('hideBar', () => {\n                            this.$emit('hideBar', _this.instance)\n                        });\n                        _this.instance.on('waiting', () => {\n                            this.$emit('waiting', _this.instance)\n                        });\n                        _this.instance.on('snapshoted', () => {\n                            this.$emit('snapshoted', _this.instance)\n                        })\n                    })\n                }\n            },\n            /**\n             * 播放视频\n             */\n            play: function () {\n                this.instance.play()\n            },\n            /**\n             * 暂停视频\n             */\n            pause: function () {\n                this.instance.pause()\n            },\n            /**\n             * 重播视频\n             */\n            replay: function () {\n                this.instance.replay()\n            },\n            /**\n             * 跳转到某个时刻进行播放\n             * @argument time 的单位为秒\n             */\n            seek: function (time) {\n                this.instance.seek(time)\n            },\n            /**\n             * 获取当前时间 单位秒\n             */\n            getCurrentTime: function () {\n                return this.instance.getCurrentTime()\n            },\n            /**\n             *获取视频总时长，返回的单位为秒\n             * @returns 返回的单位为秒\n             */\n            getDuration: function () {\n                return this.instance.getDuration()\n            },\n            /**\n             获取当前的音量，返回值为0-1的实数ios和部分android会失效\n             */\n            getVolume: function () {\n                return this.instance.getVolume()\n            },\n            /**\n             设置音量，vol为0-1的实数，ios和部分android会失效\n             */\n            setVolume: function (vol) {\n                this.instance.setVolume(vol)\n            },\n            /**\n             *直接播放视频url，time为可选值（单位秒）目前只支持同种格式（mp4/flv/m3u8）之间切换暂不支持直播rtmp流切换\n             *@argument url 视频地址\n             *@argument time 跳转到多少秒\n             */\n            loadByUrl: function (url, time) {\n                this.instance.loadByUrl(url, time)\n            },\n            /**\n             * 设置播放速度\n             *@argument speed 速度\n             */\n            setSpeed: function (speed) {\n                this.instance.setSpeed(speed)\n            },\n            /**\n             * 设置播放器大小w,h可分别为400px像素或60%百分比chrome浏览器下flash播放器分别不能小于397x297\n             *@argument w 播放器宽度\n             *@argument h 播放器高度\n             */\n            setPlayerSize: function (w, h) {\n                this.instance.setPlayerSize(w, h)\n            },\n            /**\n             * 目前只支持HTML5界面上的重载功能,暂不支持直播rtmp流切换m3u8）之间切换,暂不支持直播rtmp流切换\n             *@argument vid 视频id\n             *@argument playauth 播放凭证\n             */\n            reloaduserPlayInfoAndVidRequestMts: function (vid, playauth) {\n                this.instance.reloaduserPlayInfoAndVidRequestMts(vid, playauth)\n            }\n        }\n    }\n</script>\n\n<style>\n    @import url(//g.alicdn.com/de/prismplayer/2.8.0/skins/default/aliplayer-min.css);\n</style>\n\n```\n\n# video标签\n\nHLS流在部分浏览器中可以直接使用video标签播放，这种情况是最好的。既保证了代码的精简，使用起来也非常的简单，直接把留地址放video标签就可以了。但是因为各家浏览器对video标签可播放的协议流兼容不同，所以基本上在web端没办法直接使用video标签，除了Safari，苹果家的浏览器可以直接播放HLS的流，毕竟他们是一家的嘛。除去web端浏览器外，video标签在移动端浏览器对HLS流的兼容性出奇的好，几乎所有的移动端浏览器都支持。也就是说如果有的播放需求只需要在移动端并且使用的是HLS的流，那么就可以直接使用video标签播放了。\n\n> 使用比较简单，这里就不做示范了。\n\n# 总结\n\n>各种播放器对不同流媒体协议的支持情况\n\n|流媒体协议|video.js|flv.js|aliplayer|video|\n|:-:|:-:|:-:|:-:|:-:|\n|RTMP|true（flash）|false|true（flash）|false|\n|HTTP-FLV|true（flash）|true|true|false|\n|HLS|true|false|true|true|\n\n>各种播放器兼容情况（待完善）\n\n。。。。。。\n","source":"_posts/流媒体播放前端方案.md","raw":"---\ntitle: 流媒体播放前端方案\ndate: 2019-12-02 16:10:31\ncategories: JavaScript\n---\n\n# 前言\n\n当前应用比较多的流媒体协议主要是RTMP、HTTP-FLV、HLS这三种，具体每种协议有什么特点在另一篇[学习记录中](https://www.xiaotaotao.vip/2019/11/28/%E6%B5%81%E5%AA%92%E4%BD%93%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%AE%A4%E8%AF%86/)。正是因为使用协议的不同，传输的数据格式不同，所以在前端进行播流的时候会有不同的解决方案。对不同的需求，使用的解决方案难易也不相同。下面主要是针对上面三种流媒体协议的一些解决方案。\n\n# video.js\n\nvideo.js是现在比较完善的一个播放器了，他可以兼容RTMP、HTTP-FLV、HLS三种流。但是实现播流使用的技术不完全相同。其中HLS的流会被放在video标签中播放，RTMP、HTTP-FLV的流则只能使用flash插件进行播放。该播放器功能比较强大，具体的使用可以参考[官方文档](https://docs.videojs.com/)。因为有针对vue项目的[单独封装](https://github.com/surmon-china/vue-video-player)，所以这里给出了video.js在vue项目中的初级使用方法。\n\n```html\n<template>\n    <div>\n        <videoPlayer \n        class=\"video-player-box\"\n        ref=\"videoPlayer\"\n        :options=\"playerOptions\"\n        :playsinline=\"true\"\n        ></videoPlayer>\n    </div>\n</template>\n<script>\n\n/* 最好以下面这种方式引入，如果按照文档中的方式引入会有bug */\n\nimport { videoPlayer } from 'vue-video-player';\nimport 'videojs-contrib-hls' //播放hls协议流记得引入(video.js中有，直接引入即可)\nimport 'videojs-flash'\t\t//需要使用flash插件播放的时候引入（需要npm下载）\nrequire('video.js/dist/video-js.css')\nrequire('vue-video-player/src/custom-theme.css')\n\n\nexport default {\n    data(){\n        return{\n\t\t\tplayerOptions:{\n\t\t\t  \tplaybackRates: [0.7, 1.0, 1.5, 2.0], //播放速度\n\t\t\t\tautoplay: false, //如果true,浏览器准备好时开始回放。\n\t\t\t\tmuted: false, // 默认情况下将会消除任何音频。\n\t\t\t\tloop: false, // 导致视频一结束就重新开始。\n\t\t\t\tpreload: 'auto', // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\n\t\t\t\tlanguage: 'zh-CN',\n\t\t\t\taspectRatio: '16:9', // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\n\t\t\t\tfluid: false, // 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。\n\t\t\t\tsources: [{\n\t\t\t\t\ttype: \"rtmp/flv\",\n\t\t\t\t\tsrc:'http://xxxxxxxx:18080/app/stream.flv?token=60ba75a736762ce8c946fb65fd0e8b59_16ec5c56b75'\n\t\t\t\t}],\n\t\t\t\ttechOrder:['flash'],  //该数组决定了使用播放器的顺序这里表示只使用flash，也可以使用['html','flash']先使用video标签\n\t\t\t\tposter: \"\", //你的封面地址\n\t\t\t\tnotSupportedMessage: '此视频暂无法播放，请稍后再试', //允许覆盖Video.js无法播放媒体源时显示的默认信息。\n\t\t\t\tcontrolBar: {\n\t\t\t\t\ttimeDivider: true,\n\t\t\t\t\tdurationDisplay: true,\n\t\t\t\t\tremainingTimeDisplay: false,\n\t\t\t\t\tfullscreenToggle: true //全屏按钮\n\t\t\t\t},\t\t\t\t\t\n\t\t  },\n        }\n    },\n    components:{\n        videoPlayer\n    }\n}\n</script>\n```\n\n# flv.js\n\n该协议是bilibili公司的开源协议，因为video标签不支持flv格式的视频，所以HTTP-FLV的流只能使用flash插件播放。flv.js就是解决HTTP-FLV的流不能在video标签播放的库。主要原理是通过将flv格式转码为mp4格式后，再使用video播放。因为该js库的开源才使得大家可以既使用延迟非常低的HTTP-FLV协议，又可以使用video标签进行自定义交互(flv.js在移动端不兼容，所以在移动端浏览器无法使用)。以下是在vue项目中简单使用flv.js的方法，关于部分使用中的坑，可以参考[这里](https://www.xiaotaotao.vip/2019/11/13/VUE%E4%B8%AD%E4%BD%BF%E7%94%A8flvjs%E8%B8%A9%E5%9D%91/)。\n\n```html\n<template>\n  <div id=\"app\">\n\t<video id=\"videoElement\" controls autoplay muted width=\"600\" height=\"450\"></video>\n  </div>\n</template>\n<script>\nimport flvjs from 'flv.js'\nexport default {\n  mounted(){\n\tif (flvjs.isSupported()) {\n        let videoElement = document.getElementById('videoElement');\n        let flvPlayer = flvjs.createPlayer({\n\t\t\ttype: 'flv',\n\t\t\tisLive: true,   //直播流\n\t\t\thasAudio: false,\n\t\t\turl:'http://xxxxxx/6538-1.1567494734966.flv'\n\t\t});\n\t\tconsole.log(flvPlayer,'flv对象')\n        flvPlayer.attachMediaElement(videoElement);\n        flvPlayer.load();\n        flvPlayer.play();\n    }\n  },\n}\n</script>\n\n```\n\n# aliplayer\n\n阿里巴巴的视频播放器，可以兼容RTMP、HTTP-FLV、HLS三种协议流，其中可以使用video标签播放HLS和HTTP-FLV（点播可以，直播暂时没有调试好，理论上是可以的，调试好后补充），RTMP协议的流也只能使用flash插件播放。有大公司背景做支撑，应该不用担心该库的维护问题，而且兼容也做的比价好，使用熟练后应该是一个比较完善的解决方案。以下是在vue项目中基础的使用方法，关于该库的使用细节待深入学习了解后再记录。\n\n```html\n<template>\n    <div class='prism-player' :id='playerId' :style='playStyle'></div>\n</template>\n<script>\n    export default {\n        name: 'Aliplayer',\n        props: {\n            playStyle: {\n                type: String,\n                default: ''\n            },\n            aliplayerSdkPath: {\n                // Aliplayer 代码的路径\n                type: String,\n                default: 'https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js'\n            },\n            autoplay: {\n                type: Boolean,\n                default: false\n            },\n            isLive: {\n                type: Boolean,\n                default: false\n            },\n            playsinline: {\n                type: Boolean,\n                default: false\n            },\n            width: {\n                type: String,\n                default: '100%'\n            },\n            height: {\n                type: String,\n                default: '320px'\n            },\n            controlBarVisibility: {\n                type: String,\n                default: 'always'\n            },\n            useH5Prism: {\n                type: Boolean,\n                default: false\n            },\n            useFlashPrism: {\n                type: Boolean,\n                default: false\n            },\n            vid: {\n                type: String,\n                default: ''\n            },\n            playauth: {\n                type: String,\n                default: ''\n            },\n            source: {\n                type: String,\n                default: ''\n            },\n            cover: {\n                type: String,\n                default: ''\n            },\n            format: {\n                type: String,\n                default: 'm3u8'\n            },\n            x5_video_position: {\n                type: String,\n                default: 'top'\n            },\n            x5_type: {\n                type: String,\n                default: 'h5'\n            },\n            x5_fullscreen: {\n                type: Boolean,\n                default: false\n            },\n            x5_orientation: {\n                type: Number,\n                default: 2\n            },\n            autoPlayDelay: {\n                type: Number,\n                default: 0\n            },\n            autoPlayDelayDisplayText: {\n                type: String\n            }\n        },\n        data () {\n            return {\n                playerId: 'aliplayer_' + Math.random() * 100000000000000000,\n                scriptTagStatus: 0,\n                instance: null\n            }\n        },\n        created () {\n            if (window.Aliplayer !== undefined) {\n                // 如果全局对象存在，说明编辑器代码已经初始化完成，直接加载编辑器\n                this.scriptTagStatus = 2;\n                this.initAliplayer()\n            } else {\n                // 如果全局对象不存在，说明编辑器代码还没有加载完成，需要加载编辑器代码\n                this.insertScriptTag()\n            }\n        },\n        mounted () {\n            if (window.Aliplayer !== undefined) {\n                // 如果全局对象存在，说明编辑器代码已经初始化完成，直接加载编辑器\n                this.scriptTagStatus = 2;\n                this.initAliplayer()\n            } else {\n                // 如果全局对象不存在，说明编辑器代码还没有加载完成，需要加载编辑器代码\n                this.insertScriptTag()\n            }\n        },\n        methods: {\n            insertScriptTag () {\n                const _this = this;\n                let playerScriptTag = document.getElementById('playerScriptTag');\n                // 如果这个tag不存在，则生成相关代码tag以加载代码\n                if (playerScriptTag === null) {\n                    playerScriptTag = document.createElement('script');\n                    playerScriptTag.type = 'text/javascript';\n                    playerScriptTag.src = this.aliplayerSdkPath;\n                    playerScriptTag.id = 'playerScriptTag';\n                    let s = document.getElementsByTagName('head')[0];\n                    s.appendChild(playerScriptTag)\n                }\n                if (playerScriptTag.loaded) {\n                    _this.scriptTagStatus++\n                } else {\n                    playerScriptTag.addEventListener('load', () => {\n                        _this.scriptTagStatus++;\n                        playerScriptTag.loaded = true;\n                        _this.initAliplayer()\n                    })\n                }\n                _this.initAliplayer()\n            },\n            initAliplayer () {\n                const _this = this;\n                // scriptTagStatus 为 2 的时候，说明两个必需引入的 js 文件都已经被引入，且加载完成\n                if (_this.scriptTagStatus === 2 && _this.instance === null) {\n                    // Vue 异步执行 DOM 更新，这样一来代码执行到这里的时候可能 template 里面的 script 标签还没真正创建\n                    // 所以，我们只能在 nextTick 里面初始化 Aliplayer\n                    _this.$nextTick(() => {\n                        _this.instance = window.Aliplayer({\n                            id: _this.playerId,\n                            autoplay: _this.autoplay,\n                            isLive: _this.isLive,\n                            playsinline: _this.playsinline,\n                            format: _this.format,\n                            width: _this.width,\n                            height: _this.height,\n                            controlBarVisibility: _this.controlBarVisibility,\n                            useH5Prism: _this.useH5Prism,\n                            useFlashPrism: _this.useFlashPrism,\n                            vid: _this.vid,\n                            playauth: _this.playauth,\n                            source: _this.source,\n                            cover: _this.cover,\n                            x5_video_position: _this.x5_video_position,\n                            x5_type: _this.x5_type,\n                            x5_fullscreen: _this.x5_fullscreen,\n                            x5_orientation: _this.x5_orientation,\n                            autoPlayDelay: _this.autoPlayDelay,\n\t\t\t\t\t\t\tautoPlayDelayDisplayText: _this.autoPlayDelayDisplayText,\n\n\t\t\t\t\t\t\tenableStashBufferForFlv:true,\n\n                        });\n                        // 绑定事件，当 AliPlayer 初始化完成后，将编辑器实例通过自定义的 ready 事件交出去\n                        _this.instance.on('ready', () => {\n                            this.$emit('ready', _this.instance)\n                        });\n                        _this.instance.on('play', () => {\n                            this.$emit('play', _this.instance)\n                        });\n                        _this.instance.on('pause', () => {\n                            this.$emit('pause', _this.instance)\n                        });\n                        _this.instance.on('ended', () => {\n                            this.$emit('ended', _this.instance)\n                        });\n                        _this.instance.on('liveStreamStop', () => {\n                            this.$emit('liveStreamStop', _this.instance)\n                        });\n                        _this.instance.on('m3u8Retry', () => {\n                            this.$emit('m3u8Retry', _this.instance)\n                        });\n                        _this.instance.on('hideBar', () => {\n                            this.$emit('hideBar', _this.instance)\n                        });\n                        _this.instance.on('waiting', () => {\n                            this.$emit('waiting', _this.instance)\n                        });\n                        _this.instance.on('snapshoted', () => {\n                            this.$emit('snapshoted', _this.instance)\n                        })\n                    })\n                }\n            },\n            /**\n             * 播放视频\n             */\n            play: function () {\n                this.instance.play()\n            },\n            /**\n             * 暂停视频\n             */\n            pause: function () {\n                this.instance.pause()\n            },\n            /**\n             * 重播视频\n             */\n            replay: function () {\n                this.instance.replay()\n            },\n            /**\n             * 跳转到某个时刻进行播放\n             * @argument time 的单位为秒\n             */\n            seek: function (time) {\n                this.instance.seek(time)\n            },\n            /**\n             * 获取当前时间 单位秒\n             */\n            getCurrentTime: function () {\n                return this.instance.getCurrentTime()\n            },\n            /**\n             *获取视频总时长，返回的单位为秒\n             * @returns 返回的单位为秒\n             */\n            getDuration: function () {\n                return this.instance.getDuration()\n            },\n            /**\n             获取当前的音量，返回值为0-1的实数ios和部分android会失效\n             */\n            getVolume: function () {\n                return this.instance.getVolume()\n            },\n            /**\n             设置音量，vol为0-1的实数，ios和部分android会失效\n             */\n            setVolume: function (vol) {\n                this.instance.setVolume(vol)\n            },\n            /**\n             *直接播放视频url，time为可选值（单位秒）目前只支持同种格式（mp4/flv/m3u8）之间切换暂不支持直播rtmp流切换\n             *@argument url 视频地址\n             *@argument time 跳转到多少秒\n             */\n            loadByUrl: function (url, time) {\n                this.instance.loadByUrl(url, time)\n            },\n            /**\n             * 设置播放速度\n             *@argument speed 速度\n             */\n            setSpeed: function (speed) {\n                this.instance.setSpeed(speed)\n            },\n            /**\n             * 设置播放器大小w,h可分别为400px像素或60%百分比chrome浏览器下flash播放器分别不能小于397x297\n             *@argument w 播放器宽度\n             *@argument h 播放器高度\n             */\n            setPlayerSize: function (w, h) {\n                this.instance.setPlayerSize(w, h)\n            },\n            /**\n             * 目前只支持HTML5界面上的重载功能,暂不支持直播rtmp流切换m3u8）之间切换,暂不支持直播rtmp流切换\n             *@argument vid 视频id\n             *@argument playauth 播放凭证\n             */\n            reloaduserPlayInfoAndVidRequestMts: function (vid, playauth) {\n                this.instance.reloaduserPlayInfoAndVidRequestMts(vid, playauth)\n            }\n        }\n    }\n</script>\n\n<style>\n    @import url(//g.alicdn.com/de/prismplayer/2.8.0/skins/default/aliplayer-min.css);\n</style>\n\n```\n\n# video标签\n\nHLS流在部分浏览器中可以直接使用video标签播放，这种情况是最好的。既保证了代码的精简，使用起来也非常的简单，直接把留地址放video标签就可以了。但是因为各家浏览器对video标签可播放的协议流兼容不同，所以基本上在web端没办法直接使用video标签，除了Safari，苹果家的浏览器可以直接播放HLS的流，毕竟他们是一家的嘛。除去web端浏览器外，video标签在移动端浏览器对HLS流的兼容性出奇的好，几乎所有的移动端浏览器都支持。也就是说如果有的播放需求只需要在移动端并且使用的是HLS的流，那么就可以直接使用video标签播放了。\n\n> 使用比较简单，这里就不做示范了。\n\n# 总结\n\n>各种播放器对不同流媒体协议的支持情况\n\n|流媒体协议|video.js|flv.js|aliplayer|video|\n|:-:|:-:|:-:|:-:|:-:|\n|RTMP|true（flash）|false|true（flash）|false|\n|HTTP-FLV|true（flash）|true|true|false|\n|HLS|true|false|true|true|\n\n>各种播放器兼容情况（待完善）\n\n。。。。。。\n","slug":"流媒体播放前端方案","published":1,"updated":"2019-12-03T02:33:27.883Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck49n28d40018fiyhwjc0aed1","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>当前应用比较多的流媒体协议主要是RTMP、HTTP-FLV、HLS这三种，具体每种协议有什么特点在另一篇<a href=\"https://www.xiaotaotao.vip/2019/11/28/%E6%B5%81%E5%AA%92%E4%BD%93%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%AE%A4%E8%AF%86/\">学习记录中</a>。正是因为使用协议的不同，传输的数据格式不同，所以在前端进行播流的时候会有不同的解决方案。对不同的需求，使用的解决方案难易也不相同。下面主要是针对上面三种流媒体协议的一些解决方案。</p><a id=\"more\"></a>\n<h1 id=\"video-js\"><a href=\"#video-js\" class=\"headerlink\" title=\"video.js\"></a>video.js</h1><p>video.js是现在比较完善的一个播放器了，他可以兼容RTMP、HTTP-FLV、HLS三种流。但是实现播流使用的技术不完全相同。其中HLS的流会被放在video标签中播放，RTMP、HTTP-FLV的流则只能使用flash插件进行播放。该播放器功能比较强大，具体的使用可以参考<a href=\"https://docs.videojs.com/\" target=\"_blank\" rel=\"noopener\">官方文档</a>。因为有针对vue项目的<a href=\"https://github.com/surmon-china/vue-video-player\" target=\"_blank\" rel=\"noopener\">单独封装</a>，所以这里给出了video.js在vue项目中的初级使用方法。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">videoPlayer</span> </span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">class</span>=<span class=\"string\">\"video-player-box\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">ref</span>=<span class=\"string\">\"videoPlayer\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">:options</span>=<span class=\"string\">\"playerOptions\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">:playsinline</span>=<span class=\"string\">\"true\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">videoPlayer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"actionscript\"><span class=\"comment\">/* 最好以下面这种方式引入，如果按照文档中的方式引入会有bug */</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> &#123; videoPlayer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-player'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> <span class=\"string\">'videojs-contrib-hls'</span> <span class=\"comment\">//播放hls协议流记得引入(video.js中有，直接引入即可)</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> <span class=\"string\">'videojs-flash'</span>\t\t<span class=\"comment\">//需要使用flash插件播放的时候引入（需要npm下载）</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"built_in\">require</span>(<span class=\"string\">'video.js/dist/video-js.css'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"built_in\">require</span>(<span class=\"string\">'vue-video-player/src/custom-theme.css'</span>)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">    data()&#123;</span><br><span class=\"line\"><span class=\"actionscript\">        <span class=\"keyword\">return</span>&#123;</span></span><br><span class=\"line\">\t\t\tplayerOptions:&#123;</span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t  \tplaybackRates: [<span class=\"number\">0.7</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.5</span>, <span class=\"number\">2.0</span>], <span class=\"comment\">//播放速度</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tautoplay: <span class=\"literal\">false</span>, <span class=\"comment\">//如果true,浏览器准备好时开始回放。</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tmuted: <span class=\"literal\">false</span>, <span class=\"comment\">// 默认情况下将会消除任何音频。</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tloop: <span class=\"literal\">false</span>, <span class=\"comment\">// 导致视频一结束就重新开始。</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tpreload: <span class=\"string\">'auto'</span>, <span class=\"comment\">// 建议浏览器在&lt;video&gt;加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tlanguage: <span class=\"string\">'zh-CN'</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\taspectRatio: <span class=\"string\">'16:9'</span>, <span class=\"comment\">// 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tfluid: <span class=\"literal\">false</span>, <span class=\"comment\">// 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。</span></span></span><br><span class=\"line\">\t\t\t\tsources: [&#123;</span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\ttype: <span class=\"string\">\"rtmp/flv\"</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\tsrc:<span class=\"string\">'http://xxxxxxxx:18080/app/stream.flv?token=60ba75a736762ce8c946fb65fd0e8b59_16ec5c56b75'</span></span></span><br><span class=\"line\">\t\t\t\t&#125;],</span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\ttechOrder:[<span class=\"string\">'flash'</span>],  <span class=\"comment\">//该数组决定了使用播放器的顺序这里表示只使用flash，也可以使用['html','flash']先使用video标签</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tposter: <span class=\"string\">\"\"</span>, <span class=\"comment\">//你的封面地址</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tnotSupportedMessage: <span class=\"string\">'此视频暂无法播放，请稍后再试'</span>, <span class=\"comment\">//允许覆盖Video.js无法播放媒体源时显示的默认信息。</span></span></span><br><span class=\"line\">\t\t\t\tcontrolBar: &#123;</span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\ttimeDivider: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\tdurationDisplay: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\tremainingTimeDisplay: <span class=\"literal\">false</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\tfullscreenToggle: <span class=\"literal\">true</span> <span class=\"comment\">//全屏按钮</span></span></span><br><span class=\"line\">\t\t\t\t&#125;,\t\t\t\t\t</span><br><span class=\"line\">\t\t  &#125;,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    components:&#123;</span><br><span class=\"line\">        videoPlayer</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"flv-js\"><a href=\"#flv-js\" class=\"headerlink\" title=\"flv.js\"></a>flv.js</h1><p>该协议是bilibili公司的开源协议，因为video标签不支持flv格式的视频，所以HTTP-FLV的流只能使用flash插件播放。flv.js就是解决HTTP-FLV的流不能在video标签播放的库。主要原理是通过将flv格式转码为mp4格式后，再使用video播放。因为该js库的开源才使得大家可以既使用延迟非常低的HTTP-FLV协议，又可以使用video标签进行自定义交互(flv.js在移动端不兼容，所以在移动端浏览器无法使用)。以下是在vue项目中简单使用flv.js的方法，关于部分使用中的坑，可以参考<a href=\"https://www.xiaotaotao.vip/2019/11/13/VUE%E4%B8%AD%E4%BD%BF%E7%94%A8flvjs%E8%B8%A9%E5%9D%91/\">这里</a>。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">video</span> <span class=\"attr\">id</span>=<span class=\"string\">\"videoElement\"</span> <span class=\"attr\">controls</span> <span class=\"attr\">autoplay</span> <span class=\"attr\">muted</span> <span class=\"attr\">width</span>=<span class=\"string\">\"600\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"450\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> flvjs <span class=\"keyword\">from</span> <span class=\"string\">'flv.js'</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">  mounted()&#123;</span><br><span class=\"line\"><span class=\"actionscript\">\t<span class=\"keyword\">if</span> (flvjs.isSupported()) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> videoElement = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'videoElement'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> flvPlayer = flvjs.createPlayer(&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\ttype: <span class=\"string\">'flv'</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\tisLive: <span class=\"literal\">true</span>,   <span class=\"comment\">//直播流</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\thasAudio: <span class=\"literal\">false</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\turl:<span class=\"string\">'http://xxxxxx/6538-1.1567494734966.flv'</span></span></span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(flvPlayer,<span class=\"string\">'flv对象'</span>)</span></span><br><span class=\"line\">        flvPlayer.attachMediaElement(videoElement);</span><br><span class=\"line\">        flvPlayer.load();</span><br><span class=\"line\">        flvPlayer.play();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"aliplayer\"><a href=\"#aliplayer\" class=\"headerlink\" title=\"aliplayer\"></a>aliplayer</h1><p>阿里巴巴的视频播放器，可以兼容RTMP、HTTP-FLV、HLS三种协议流，其中可以使用video标签播放HLS和HTTP-FLV（点播可以，直播暂时没有调试好，理论上是可以的，调试好后补充），RTMP协议的流也只能使用flash插件播放。有大公司背景做支撑，应该不用担心该库的维护问题，而且兼容也做的比价好，使用熟练后应该是一个比较完善的解决方案。以下是在vue项目中基础的使用方法，关于该库的使用细节待深入学习了解后再记录。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'prism-player'</span> <span class=\"attr\">:id</span>=<span class=\"string\">'playerId'</span> <span class=\"attr\">:style</span>=<span class=\"string\">'playStyle'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">        name: <span class=\"string\">'Aliplayer'</span>,</span></span><br><span class=\"line\">        props: &#123;</span><br><span class=\"line\">            playStyle: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">''</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            aliplayerSdkPath: &#123;</span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// Aliplayer 代码的路径</span></span></span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            autoplay: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            isLive: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            playsinline: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            width: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'100%'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            height: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'320px'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            controlBarVisibility: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'always'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            useH5Prism: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            useFlashPrism: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            vid: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">''</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            playauth: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">''</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            source: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">''</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            cover: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">''</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            format: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'m3u8'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            x5_video_position: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'top'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            x5_type: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'h5'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            x5_fullscreen: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            x5_orientation: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Number</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"number\">2</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            autoPlayDelay: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Number</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"number\">0</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            autoPlayDelayDisplayText: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span></span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        data () &#123;</span><br><span class=\"line\"><span class=\"actionscript\">            <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                playerId: <span class=\"string\">'aliplayer_'</span> + <span class=\"built_in\">Math</span>.random() * <span class=\"number\">100000000000000000</span>,</span></span><br><span class=\"line\">                scriptTagStatus: 0,</span><br><span class=\"line\"><span class=\"actionscript\">                instance: <span class=\"literal\">null</span></span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        created () &#123;</span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.Aliplayer !== <span class=\"literal\">undefined</span>) &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// 如果全局对象存在，说明编辑器代码已经初始化完成，直接加载编辑器</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.scriptTagStatus = <span class=\"number\">2</span>;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.initAliplayer()</span></span><br><span class=\"line\"><span class=\"actionscript\">            &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// 如果全局对象不存在，说明编辑器代码还没有加载完成，需要加载编辑器代码</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.insertScriptTag()</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        mounted () &#123;</span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.Aliplayer !== <span class=\"literal\">undefined</span>) &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// 如果全局对象存在，说明编辑器代码已经初始化完成，直接加载编辑器</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.scriptTagStatus = <span class=\"number\">2</span>;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.initAliplayer()</span></span><br><span class=\"line\"><span class=\"actionscript\">            &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// 如果全局对象不存在，说明编辑器代码还没有加载完成，需要加载编辑器代码</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.insertScriptTag()</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            insertScriptTag () &#123;</span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">const</span> _this = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">let</span> playerScriptTag = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'playerScriptTag'</span>);</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// 如果这个tag不存在，则生成相关代码tag以加载代码</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">if</span> (playerScriptTag === <span class=\"literal\">null</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    playerScriptTag = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'script'</span>);</span></span><br><span class=\"line\"><span class=\"actionscript\">                    playerScriptTag.type = <span class=\"string\">'text/javascript'</span>;</span></span><br><span class=\"line\"><span class=\"actionscript\">                    playerScriptTag.src = <span class=\"keyword\">this</span>.aliplayerSdkPath;</span></span><br><span class=\"line\"><span class=\"actionscript\">                    playerScriptTag.id = <span class=\"string\">'playerScriptTag'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"keyword\">let</span> s = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">'head'</span>)[<span class=\"number\">0</span>];</span></span><br><span class=\"line\">                    s.appendChild(playerScriptTag)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">if</span> (playerScriptTag.loaded) &#123;</span></span><br><span class=\"line\">                    _this.scriptTagStatus++</span><br><span class=\"line\"><span class=\"actionscript\">                &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                    playerScriptTag.addEventListener(<span class=\"string\">'load'</span>, () =&gt; &#123;</span></span><br><span class=\"line\">                        _this.scriptTagStatus++;</span><br><span class=\"line\"><span class=\"actionscript\">                        playerScriptTag.loaded = <span class=\"literal\">true</span>;</span></span><br><span class=\"line\">                        _this.initAliplayer()</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                _this.initAliplayer()</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            initAliplayer () &#123;</span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">const</span> _this = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// scriptTagStatus 为 2 的时候，说明两个必需引入的 js 文件都已经被引入，且加载完成</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">if</span> (_this.scriptTagStatus === <span class=\"number\">2</span> &amp;&amp; _this.instance === <span class=\"literal\">null</span>) &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                    <span class=\"comment\">// Vue 异步执行 DOM 更新，这样一来代码执行到这里的时候可能 template 里面的 script 标签还没真正创建</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                    <span class=\"comment\">// 所以，我们只能在 nextTick 里面初始化 Aliplayer</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    _this.$nextTick(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                        _this.instance = <span class=\"built_in\">window</span>.Aliplayer(&#123;</span></span><br><span class=\"line\">                            id: _this.playerId,</span><br><span class=\"line\">                            autoplay: _this.autoplay,</span><br><span class=\"line\">                            isLive: _this.isLive,</span><br><span class=\"line\">                            playsinline: _this.playsinline,</span><br><span class=\"line\">                            format: _this.format,</span><br><span class=\"line\">                            width: _this.width,</span><br><span class=\"line\">                            height: _this.height,</span><br><span class=\"line\">                            controlBarVisibility: _this.controlBarVisibility,</span><br><span class=\"line\">                            useH5Prism: _this.useH5Prism,</span><br><span class=\"line\">                            useFlashPrism: _this.useFlashPrism,</span><br><span class=\"line\">                            vid: _this.vid,</span><br><span class=\"line\">                            playauth: _this.playauth,</span><br><span class=\"line\">                            source: _this.source,</span><br><span class=\"line\">                            cover: _this.cover,</span><br><span class=\"line\">                            x5_video_position: _this.x5_video_position,</span><br><span class=\"line\">                            x5_type: _this.x5_type,</span><br><span class=\"line\">                            x5_fullscreen: _this.x5_fullscreen,</span><br><span class=\"line\">                            x5_orientation: _this.x5_orientation,</span><br><span class=\"line\">                            autoPlayDelay: _this.autoPlayDelay,</span><br><span class=\"line\">\t\t\t\t\t\t\tautoPlayDelayDisplayText: _this.autoPlayDelayDisplayText,</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\t\t\tenableStashBufferForFlv:<span class=\"literal\">true</span>,</span></span><br><span class=\"line\"></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        <span class=\"comment\">// 绑定事件，当 AliPlayer 初始化完成后，将编辑器实例通过自定义的 ready 事件交出去</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'ready'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'ready'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'play'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'play'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'pause'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'pause'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'ended'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'ended'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'liveStreamStop'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'liveStreamStop'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'m3u8Retry'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'m3u8Retry'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'hideBar'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'hideBar'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'waiting'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'waiting'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'snapshoted'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'snapshoted'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;)</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 播放视频</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            play: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.play()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 暂停视频</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            pause: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.pause()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 重播视频</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            replay: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.replay()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 跳转到某个时刻进行播放</span><br><span class=\"line\"><span class=\"vbscript\">             * @argument <span class=\"built_in\">time</span> 的单位为秒</span></span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            seek: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(time)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.seek(time)</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 获取当前时间 单位秒</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            getCurrentTime: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.instance.getCurrentTime()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             *获取视频总时长，返回的单位为秒</span><br><span class=\"line\">             * @returns 返回的单位为秒</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            getDuration: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.instance.getDuration()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             获取当前的音量，返回值为0-1的实数ios和部分android会失效</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            getVolume: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.instance.getVolume()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             设置音量，vol为0-1的实数，ios和部分android会失效</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            setVolume: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(vol)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.setVolume(vol)</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\"><span class=\"vbscript\">             *直接播放视频url，<span class=\"built_in\">time</span>为可选值（单位秒）目前只支持同种格式（mp4/flv/m3u8）之间切换暂不支持直播rtmp流切换</span></span><br><span class=\"line\">             *@argument url 视频地址</span><br><span class=\"line\"><span class=\"vbscript\">             *@argument <span class=\"built_in\">time</span> 跳转到多少秒</span></span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            loadByUrl: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(url, time)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.loadByUrl(url, time)</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 设置播放速度</span><br><span class=\"line\">             *@argument speed 速度</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            setSpeed: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(speed)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.setSpeed(speed)</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 设置播放器大小w,h可分别为400px像素或60%百分比chrome浏览器下flash播放器分别不能小于397x297</span><br><span class=\"line\">             *@argument w 播放器宽度</span><br><span class=\"line\">             *@argument h 播放器高度</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            setPlayerSize: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(w, h)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.setPlayerSize(w, h)</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 目前只支持HTML5界面上的重载功能,暂不支持直播rtmp流切换m3u8）之间切换,暂不支持直播rtmp流切换</span><br><span class=\"line\">             *@argument vid 视频id</span><br><span class=\"line\">             *@argument playauth 播放凭证</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            reloaduserPlayInfoAndVidRequestMts: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(vid, playauth)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.reloaduserPlayInfoAndVidRequestMts(vid, playauth)</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    @<span class=\"keyword\">import</span> url(//g.alicdn.com/de/prismplayer/<span class=\"number\">2.8</span>.<span class=\"number\">0</span>/skins/default/aliplayer-min.css);</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"video标签\"><a href=\"#video标签\" class=\"headerlink\" title=\"video标签\"></a>video标签</h1><p>HLS流在部分浏览器中可以直接使用video标签播放，这种情况是最好的。既保证了代码的精简，使用起来也非常的简单，直接把留地址放video标签就可以了。但是因为各家浏览器对video标签可播放的协议流兼容不同，所以基本上在web端没办法直接使用video标签，除了Safari，苹果家的浏览器可以直接播放HLS的流，毕竟他们是一家的嘛。除去web端浏览器外，video标签在移动端浏览器对HLS流的兼容性出奇的好，几乎所有的移动端浏览器都支持。也就是说如果有的播放需求只需要在移动端并且使用的是HLS的流，那么就可以直接使用video标签播放了。</p>\n<blockquote>\n<p>使用比较简单，这里就不做示范了。</p>\n</blockquote>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><blockquote>\n<p>各种播放器对不同流媒体协议的支持情况</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"center\">流媒体协议</th>\n<th align=\"center\">video.js</th>\n<th align=\"center\">flv.js</th>\n<th align=\"center\">aliplayer</th>\n<th align=\"center\">video</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">RTMP</td>\n<td align=\"center\">true（flash）</td>\n<td align=\"center\">false</td>\n<td align=\"center\">true（flash）</td>\n<td align=\"center\">false</td>\n</tr>\n<tr>\n<td align=\"center\">HTTP-FLV</td>\n<td align=\"center\">true（flash）</td>\n<td align=\"center\">true</td>\n<td align=\"center\">true</td>\n<td align=\"center\">false</td>\n</tr>\n<tr>\n<td align=\"center\">HLS</td>\n<td align=\"center\">true</td>\n<td align=\"center\">false</td>\n<td align=\"center\">true</td>\n<td align=\"center\">true</td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>各种播放器兼容情况（待完善）</p>\n</blockquote>\n<p>。。。。。。</p>\n","site":{"data":{}},"excerpt":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>当前应用比较多的流媒体协议主要是RTMP、HTTP-FLV、HLS这三种，具体每种协议有什么特点在另一篇<a href=\"https://www.xiaotaotao.vip/2019/11/28/%E6%B5%81%E5%AA%92%E4%BD%93%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%AE%A4%E8%AF%86/\">学习记录中</a>。正是因为使用协议的不同，传输的数据格式不同，所以在前端进行播流的时候会有不同的解决方案。对不同的需求，使用的解决方案难易也不相同。下面主要是针对上面三种流媒体协议的一些解决方案。</p>","more":"\n<h1 id=\"video-js\"><a href=\"#video-js\" class=\"headerlink\" title=\"video.js\"></a>video.js</h1><p>video.js是现在比较完善的一个播放器了，他可以兼容RTMP、HTTP-FLV、HLS三种流。但是实现播流使用的技术不完全相同。其中HLS的流会被放在video标签中播放，RTMP、HTTP-FLV的流则只能使用flash插件进行播放。该播放器功能比较强大，具体的使用可以参考<a href=\"https://docs.videojs.com/\" target=\"_blank\" rel=\"noopener\">官方文档</a>。因为有针对vue项目的<a href=\"https://github.com/surmon-china/vue-video-player\" target=\"_blank\" rel=\"noopener\">单独封装</a>，所以这里给出了video.js在vue项目中的初级使用方法。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">videoPlayer</span> </span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">class</span>=<span class=\"string\">\"video-player-box\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">ref</span>=<span class=\"string\">\"videoPlayer\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">:options</span>=<span class=\"string\">\"playerOptions\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">:playsinline</span>=<span class=\"string\">\"true\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">videoPlayer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"actionscript\"><span class=\"comment\">/* 最好以下面这种方式引入，如果按照文档中的方式引入会有bug */</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> &#123; videoPlayer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue-video-player'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> <span class=\"string\">'videojs-contrib-hls'</span> <span class=\"comment\">//播放hls协议流记得引入(video.js中有，直接引入即可)</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> <span class=\"string\">'videojs-flash'</span>\t\t<span class=\"comment\">//需要使用flash插件播放的时候引入（需要npm下载）</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"built_in\">require</span>(<span class=\"string\">'video.js/dist/video-js.css'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"built_in\">require</span>(<span class=\"string\">'vue-video-player/src/custom-theme.css'</span>)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">    data()&#123;</span><br><span class=\"line\"><span class=\"actionscript\">        <span class=\"keyword\">return</span>&#123;</span></span><br><span class=\"line\">\t\t\tplayerOptions:&#123;</span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t  \tplaybackRates: [<span class=\"number\">0.7</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.5</span>, <span class=\"number\">2.0</span>], <span class=\"comment\">//播放速度</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tautoplay: <span class=\"literal\">false</span>, <span class=\"comment\">//如果true,浏览器准备好时开始回放。</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tmuted: <span class=\"literal\">false</span>, <span class=\"comment\">// 默认情况下将会消除任何音频。</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tloop: <span class=\"literal\">false</span>, <span class=\"comment\">// 导致视频一结束就重新开始。</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tpreload: <span class=\"string\">'auto'</span>, <span class=\"comment\">// 建议浏览器在&lt;video&gt;加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tlanguage: <span class=\"string\">'zh-CN'</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\taspectRatio: <span class=\"string\">'16:9'</span>, <span class=\"comment\">// 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tfluid: <span class=\"literal\">false</span>, <span class=\"comment\">// 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。</span></span></span><br><span class=\"line\">\t\t\t\tsources: [&#123;</span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\ttype: <span class=\"string\">\"rtmp/flv\"</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\tsrc:<span class=\"string\">'http://xxxxxxxx:18080/app/stream.flv?token=60ba75a736762ce8c946fb65fd0e8b59_16ec5c56b75'</span></span></span><br><span class=\"line\">\t\t\t\t&#125;],</span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\ttechOrder:[<span class=\"string\">'flash'</span>],  <span class=\"comment\">//该数组决定了使用播放器的顺序这里表示只使用flash，也可以使用['html','flash']先使用video标签</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tposter: <span class=\"string\">\"\"</span>, <span class=\"comment\">//你的封面地址</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\tnotSupportedMessage: <span class=\"string\">'此视频暂无法播放，请稍后再试'</span>, <span class=\"comment\">//允许覆盖Video.js无法播放媒体源时显示的默认信息。</span></span></span><br><span class=\"line\">\t\t\t\tcontrolBar: &#123;</span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\ttimeDivider: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\tdurationDisplay: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\tremainingTimeDisplay: <span class=\"literal\">false</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\tfullscreenToggle: <span class=\"literal\">true</span> <span class=\"comment\">//全屏按钮</span></span></span><br><span class=\"line\">\t\t\t\t&#125;,\t\t\t\t\t</span><br><span class=\"line\">\t\t  &#125;,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    components:&#123;</span><br><span class=\"line\">        videoPlayer</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"flv-js\"><a href=\"#flv-js\" class=\"headerlink\" title=\"flv.js\"></a>flv.js</h1><p>该协议是bilibili公司的开源协议，因为video标签不支持flv格式的视频，所以HTTP-FLV的流只能使用flash插件播放。flv.js就是解决HTTP-FLV的流不能在video标签播放的库。主要原理是通过将flv格式转码为mp4格式后，再使用video播放。因为该js库的开源才使得大家可以既使用延迟非常低的HTTP-FLV协议，又可以使用video标签进行自定义交互(flv.js在移动端不兼容，所以在移动端浏览器无法使用)。以下是在vue项目中简单使用flv.js的方法，关于部分使用中的坑，可以参考<a href=\"https://www.xiaotaotao.vip/2019/11/13/VUE%E4%B8%AD%E4%BD%BF%E7%94%A8flvjs%E8%B8%A9%E5%9D%91/\">这里</a>。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">video</span> <span class=\"attr\">id</span>=<span class=\"string\">\"videoElement\"</span> <span class=\"attr\">controls</span> <span class=\"attr\">autoplay</span> <span class=\"attr\">muted</span> <span class=\"attr\">width</span>=<span class=\"string\">\"600\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"450\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> flvjs <span class=\"keyword\">from</span> <span class=\"string\">'flv.js'</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">  mounted()&#123;</span><br><span class=\"line\"><span class=\"actionscript\">\t<span class=\"keyword\">if</span> (flvjs.isSupported()) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> videoElement = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'videoElement'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> flvPlayer = flvjs.createPlayer(&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\ttype: <span class=\"string\">'flv'</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\tisLive: <span class=\"literal\">true</span>,   <span class=\"comment\">//直播流</span></span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\thasAudio: <span class=\"literal\">false</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\turl:<span class=\"string\">'http://xxxxxx/6538-1.1567494734966.flv'</span></span></span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">console</span>.log(flvPlayer,<span class=\"string\">'flv对象'</span>)</span></span><br><span class=\"line\">        flvPlayer.attachMediaElement(videoElement);</span><br><span class=\"line\">        flvPlayer.load();</span><br><span class=\"line\">        flvPlayer.play();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"aliplayer\"><a href=\"#aliplayer\" class=\"headerlink\" title=\"aliplayer\"></a>aliplayer</h1><p>阿里巴巴的视频播放器，可以兼容RTMP、HTTP-FLV、HLS三种协议流，其中可以使用video标签播放HLS和HTTP-FLV（点播可以，直播暂时没有调试好，理论上是可以的，调试好后补充），RTMP协议的流也只能使用flash插件播放。有大公司背景做支撑，应该不用担心该库的维护问题，而且兼容也做的比价好，使用熟练后应该是一个比较完善的解决方案。以下是在vue项目中基础的使用方法，关于该库的使用细节待深入学习了解后再记录。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'prism-player'</span> <span class=\"attr\">:id</span>=<span class=\"string\">'playerId'</span> <span class=\"attr\">:style</span>=<span class=\"string\">'playStyle'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">        name: <span class=\"string\">'Aliplayer'</span>,</span></span><br><span class=\"line\">        props: &#123;</span><br><span class=\"line\">            playStyle: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">''</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            aliplayerSdkPath: &#123;</span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// Aliplayer 代码的路径</span></span></span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            autoplay: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            isLive: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            playsinline: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            width: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'100%'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            height: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'320px'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            controlBarVisibility: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'always'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            useH5Prism: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            useFlashPrism: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            vid: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">''</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            playauth: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">''</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            source: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">''</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            cover: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">''</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            format: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'m3u8'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            x5_video_position: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'top'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            x5_type: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"string\">'h5'</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            x5_fullscreen: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            x5_orientation: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Number</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"number\">2</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            autoPlayDelay: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">Number</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">default</span>: <span class=\"number\">0</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            autoPlayDelayDisplayText: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"built_in\">String</span></span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        data () &#123;</span><br><span class=\"line\"><span class=\"actionscript\">            <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                playerId: <span class=\"string\">'aliplayer_'</span> + <span class=\"built_in\">Math</span>.random() * <span class=\"number\">100000000000000000</span>,</span></span><br><span class=\"line\">                scriptTagStatus: 0,</span><br><span class=\"line\"><span class=\"actionscript\">                instance: <span class=\"literal\">null</span></span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        created () &#123;</span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.Aliplayer !== <span class=\"literal\">undefined</span>) &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// 如果全局对象存在，说明编辑器代码已经初始化完成，直接加载编辑器</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.scriptTagStatus = <span class=\"number\">2</span>;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.initAliplayer()</span></span><br><span class=\"line\"><span class=\"actionscript\">            &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// 如果全局对象不存在，说明编辑器代码还没有加载完成，需要加载编辑器代码</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.insertScriptTag()</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        mounted () &#123;</span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.Aliplayer !== <span class=\"literal\">undefined</span>) &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// 如果全局对象存在，说明编辑器代码已经初始化完成，直接加载编辑器</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.scriptTagStatus = <span class=\"number\">2</span>;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.initAliplayer()</span></span><br><span class=\"line\"><span class=\"actionscript\">            &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// 如果全局对象不存在，说明编辑器代码还没有加载完成，需要加载编辑器代码</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.insertScriptTag()</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            insertScriptTag () &#123;</span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">const</span> _this = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">let</span> playerScriptTag = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'playerScriptTag'</span>);</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// 如果这个tag不存在，则生成相关代码tag以加载代码</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">if</span> (playerScriptTag === <span class=\"literal\">null</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    playerScriptTag = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'script'</span>);</span></span><br><span class=\"line\"><span class=\"actionscript\">                    playerScriptTag.type = <span class=\"string\">'text/javascript'</span>;</span></span><br><span class=\"line\"><span class=\"actionscript\">                    playerScriptTag.src = <span class=\"keyword\">this</span>.aliplayerSdkPath;</span></span><br><span class=\"line\"><span class=\"actionscript\">                    playerScriptTag.id = <span class=\"string\">'playerScriptTag'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"keyword\">let</span> s = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">'head'</span>)[<span class=\"number\">0</span>];</span></span><br><span class=\"line\">                    s.appendChild(playerScriptTag)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">if</span> (playerScriptTag.loaded) &#123;</span></span><br><span class=\"line\">                    _this.scriptTagStatus++</span><br><span class=\"line\"><span class=\"actionscript\">                &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                    playerScriptTag.addEventListener(<span class=\"string\">'load'</span>, () =&gt; &#123;</span></span><br><span class=\"line\">                        _this.scriptTagStatus++;</span><br><span class=\"line\"><span class=\"actionscript\">                        playerScriptTag.loaded = <span class=\"literal\">true</span>;</span></span><br><span class=\"line\">                        _this.initAliplayer()</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                _this.initAliplayer()</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            initAliplayer () &#123;</span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">const</span> _this = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"comment\">// scriptTagStatus 为 2 的时候，说明两个必需引入的 js 文件都已经被引入，且加载完成</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">if</span> (_this.scriptTagStatus === <span class=\"number\">2</span> &amp;&amp; _this.instance === <span class=\"literal\">null</span>) &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                    <span class=\"comment\">// Vue 异步执行 DOM 更新，这样一来代码执行到这里的时候可能 template 里面的 script 标签还没真正创建</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                    <span class=\"comment\">// 所以，我们只能在 nextTick 里面初始化 Aliplayer</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    _this.$nextTick(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                        _this.instance = <span class=\"built_in\">window</span>.Aliplayer(&#123;</span></span><br><span class=\"line\">                            id: _this.playerId,</span><br><span class=\"line\">                            autoplay: _this.autoplay,</span><br><span class=\"line\">                            isLive: _this.isLive,</span><br><span class=\"line\">                            playsinline: _this.playsinline,</span><br><span class=\"line\">                            format: _this.format,</span><br><span class=\"line\">                            width: _this.width,</span><br><span class=\"line\">                            height: _this.height,</span><br><span class=\"line\">                            controlBarVisibility: _this.controlBarVisibility,</span><br><span class=\"line\">                            useH5Prism: _this.useH5Prism,</span><br><span class=\"line\">                            useFlashPrism: _this.useFlashPrism,</span><br><span class=\"line\">                            vid: _this.vid,</span><br><span class=\"line\">                            playauth: _this.playauth,</span><br><span class=\"line\">                            source: _this.source,</span><br><span class=\"line\">                            cover: _this.cover,</span><br><span class=\"line\">                            x5_video_position: _this.x5_video_position,</span><br><span class=\"line\">                            x5_type: _this.x5_type,</span><br><span class=\"line\">                            x5_fullscreen: _this.x5_fullscreen,</span><br><span class=\"line\">                            x5_orientation: _this.x5_orientation,</span><br><span class=\"line\">                            autoPlayDelay: _this.autoPlayDelay,</span><br><span class=\"line\">\t\t\t\t\t\t\tautoPlayDelayDisplayText: _this.autoPlayDelayDisplayText,</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"actionscript\">\t\t\t\t\t\t\tenableStashBufferForFlv:<span class=\"literal\">true</span>,</span></span><br><span class=\"line\"></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        <span class=\"comment\">// 绑定事件，当 AliPlayer 初始化完成后，将编辑器实例通过自定义的 ready 事件交出去</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'ready'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'ready'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'play'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'play'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'pause'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'pause'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'ended'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'ended'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'liveStreamStop'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'liveStreamStop'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'m3u8Retry'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'m3u8Retry'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'hideBar'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'hideBar'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'waiting'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'waiting'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;);</span><br><span class=\"line\"><span class=\"actionscript\">                        _this.instance.on(<span class=\"string\">'snapshoted'</span>, () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                            <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'snapshoted'</span>, _this.instance)</span></span><br><span class=\"line\">                        &#125;)</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 播放视频</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            play: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.play()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 暂停视频</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            pause: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.pause()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 重播视频</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            replay: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.replay()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 跳转到某个时刻进行播放</span><br><span class=\"line\"><span class=\"vbscript\">             * @argument <span class=\"built_in\">time</span> 的单位为秒</span></span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            seek: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(time)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.seek(time)</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 获取当前时间 单位秒</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            getCurrentTime: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.instance.getCurrentTime()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             *获取视频总时长，返回的单位为秒</span><br><span class=\"line\">             * @returns 返回的单位为秒</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            getDuration: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.instance.getDuration()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             获取当前的音量，返回值为0-1的实数ios和部分android会失效</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            getVolume: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.instance.getVolume()</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             设置音量，vol为0-1的实数，ios和部分android会失效</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            setVolume: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(vol)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.setVolume(vol)</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\"><span class=\"vbscript\">             *直接播放视频url，<span class=\"built_in\">time</span>为可选值（单位秒）目前只支持同种格式（mp4/flv/m3u8）之间切换暂不支持直播rtmp流切换</span></span><br><span class=\"line\">             *@argument url 视频地址</span><br><span class=\"line\"><span class=\"vbscript\">             *@argument <span class=\"built_in\">time</span> 跳转到多少秒</span></span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            loadByUrl: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(url, time)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.loadByUrl(url, time)</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 设置播放速度</span><br><span class=\"line\">             *@argument speed 速度</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            setSpeed: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(speed)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.setSpeed(speed)</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 设置播放器大小w,h可分别为400px像素或60%百分比chrome浏览器下flash播放器分别不能小于397x297</span><br><span class=\"line\">             *@argument w 播放器宽度</span><br><span class=\"line\">             *@argument h 播放器高度</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            setPlayerSize: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(w, h)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.setPlayerSize(w, h)</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            /**</span><br><span class=\"line\">             * 目前只支持HTML5界面上的重载功能,暂不支持直播rtmp流切换m3u8）之间切换,暂不支持直播rtmp流切换</span><br><span class=\"line\">             *@argument vid 视频id</span><br><span class=\"line\">             *@argument playauth 播放凭证</span><br><span class=\"line\">             */</span><br><span class=\"line\"><span class=\"actionscript\">            reloaduserPlayInfoAndVidRequestMts: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(vid, playauth)</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.instance.reloaduserPlayInfoAndVidRequestMts(vid, playauth)</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    @<span class=\"keyword\">import</span> url(//g.alicdn.com/de/prismplayer/<span class=\"number\">2.8</span>.<span class=\"number\">0</span>/skins/default/aliplayer-min.css);</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"video标签\"><a href=\"#video标签\" class=\"headerlink\" title=\"video标签\"></a>video标签</h1><p>HLS流在部分浏览器中可以直接使用video标签播放，这种情况是最好的。既保证了代码的精简，使用起来也非常的简单，直接把留地址放video标签就可以了。但是因为各家浏览器对video标签可播放的协议流兼容不同，所以基本上在web端没办法直接使用video标签，除了Safari，苹果家的浏览器可以直接播放HLS的流，毕竟他们是一家的嘛。除去web端浏览器外，video标签在移动端浏览器对HLS流的兼容性出奇的好，几乎所有的移动端浏览器都支持。也就是说如果有的播放需求只需要在移动端并且使用的是HLS的流，那么就可以直接使用video标签播放了。</p>\n<blockquote>\n<p>使用比较简单，这里就不做示范了。</p>\n</blockquote>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><blockquote>\n<p>各种播放器对不同流媒体协议的支持情况</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"center\">流媒体协议</th>\n<th align=\"center\">video.js</th>\n<th align=\"center\">flv.js</th>\n<th align=\"center\">aliplayer</th>\n<th align=\"center\">video</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">RTMP</td>\n<td align=\"center\">true（flash）</td>\n<td align=\"center\">false</td>\n<td align=\"center\">true（flash）</td>\n<td align=\"center\">false</td>\n</tr>\n<tr>\n<td align=\"center\">HTTP-FLV</td>\n<td align=\"center\">true（flash）</td>\n<td align=\"center\">true</td>\n<td align=\"center\">true</td>\n<td align=\"center\">false</td>\n</tr>\n<tr>\n<td align=\"center\">HLS</td>\n<td align=\"center\">true</td>\n<td align=\"center\">false</td>\n<td align=\"center\">true</td>\n<td align=\"center\">true</td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>各种播放器兼容情况（待完善）</p>\n</blockquote>\n<p>。。。。。。</p>\n"}],"PostAsset":[{"_id":"source/_posts/封装VUE组件并发布到npm/目录结构.png","post":"ck49n28al000cfiyh5oqdrbn4","slug":"目录结构.png","modified":1,"renderable":1},{"_id":"source/_posts/VUE中使用flvjs踩坑/视频加载.png","post":"ck49n28ai0008fiyhdfnkmrta","slug":"视频加载.png","modified":1,"renderable":1},{"_id":"source/_posts/VUE中使用flvjs踩坑/静音报错.png","post":"ck49n28ai0008fiyhdfnkmrta","slug":"静音报错.png","modified":1,"renderable":1},{"_id":"source/_posts/swagger在laravel中的使用/swagger1.png","post":"ck49n28cf0016fiyhi0dq1ln6","slug":"swagger1.png","modified":1,"renderable":1},{"_id":"source/_posts/swagger在laravel中的使用/swagger2.png","post":"ck49n28cf0016fiyhi0dq1ln6","slug":"swagger2.png","modified":1,"renderable":1},{"_id":"source/_posts/swagger在laravel中的使用/swagger3.png","post":"ck49n28cf0016fiyhi0dq1ln6","slug":"swagger3.png","modified":1,"renderable":1},{"_id":"source/_posts/swagger在laravel中的使用/swagger4.png","post":"ck49n28cf0016fiyhi0dq1ln6","slug":"swagger4.png","modified":1,"renderable":1},{"_id":"source/_posts/swagger在laravel中的使用/swagger5.png","post":"ck49n28cf0016fiyhi0dq1ln6","slug":"swagger5.png","modified":1,"renderable":1},{"_id":"source/_posts/swagger在laravel中的使用/swagger6.png","post":"ck49n28cf0016fiyhi0dq1ln6","slug":"swagger6.png","modified":1,"renderable":1},{"_id":"source/_posts/swagger在laravel中的使用/swagger7.png","post":"ck49n28cf0016fiyhi0dq1ln6","slug":"swagger7.png","modified":1,"renderable":1}],"PostCategory":[{"post_id":"ck49n28a60000fiyhl02210xp","category_id":"ck49n28ad0003fiyhovu1vt6w","_id":"ck49n28ak000afiyhlvtzu7nz"},{"post_id":"ck49n28ai0008fiyhdfnkmrta","category_id":"ck49n28ad0003fiyhovu1vt6w","_id":"ck49n28am000efiyhtpwnpvow"},{"post_id":"ck49n28ab0002fiyhkh7rcndi","category_id":"ck49n28ah0007fiyhm2ou1any","_id":"ck49n28ao000hfiyhqsjk06f1"},{"post_id":"ck49n28ae0004fiyhvwfowatx","category_id":"ck49n28ak000bfiyh45v1frqo","_id":"ck49n28ap000kfiyhy797fj05"},{"post_id":"ck49n28am000dfiyhwk1i77hg","category_id":"ck49n28ah0007fiyhm2ou1any","_id":"ck49n28aq000mfiyh5e2sq465"},{"post_id":"ck49n28ag0005fiyhqi6axs5h","category_id":"ck49n28ah0007fiyhm2ou1any","_id":"ck49n28ar000pfiyhj0fgee8z"},{"post_id":"ck49n28ah0006fiyhs2uzfx9a","category_id":"ck49n28ak000bfiyh45v1frqo","_id":"ck49n28at000sfiyhpflmpv1e"},{"post_id":"ck49n28ar000nfiyh0tho0cqh","category_id":"ck49n28ad0003fiyhovu1vt6w","_id":"ck49n28at000ufiyh0093kp35"},{"post_id":"ck49n28aj0009fiyh0fsb1d8k","category_id":"ck49n28ar000ofiyhj7dqmsm4","_id":"ck49n28au000vfiyhbglhm5sa"},{"post_id":"ck49n28as000rfiyhq45anf9o","category_id":"ck49n28ah0007fiyhm2ou1any","_id":"ck49n28au000xfiyh2owb5pba"},{"post_id":"ck49n28al000cfiyh5oqdrbn4","category_id":"ck49n28at000tfiyht1k3hc6m","_id":"ck49n28au000yfiyhs535trlw"},{"post_id":"ck49n28ao000gfiyhi6rtke44","category_id":"ck49n28au000wfiyhk3rj7ppt","_id":"ck49n28av0010fiyhixlecaji"},{"post_id":"ck49n28ap000ifiyhnst1hktj","category_id":"ck49n28au000zfiyh0cczp62m","_id":"ck49n28av0012fiyhdnd0ktsf"},{"post_id":"ck49n28aq000lfiyh3nv52ree","category_id":"ck49n28av0011fiyho48bybkk","_id":"ck49n28aw0014fiyhe3jba26k"},{"post_id":"ck49n28ar000qfiyh1j0w611n","category_id":"ck49n28at000tfiyht1k3hc6m","_id":"ck49n28aw0015fiyhs5exdohm"},{"post_id":"ck49n28cf0016fiyhi0dq1ln6","category_id":"ck49n28at000tfiyht1k3hc6m","_id":"ck49n28cg0017fiyhcm31l2nj"},{"post_id":"ck49n28d40018fiyhwjc0aed1","category_id":"ck49n28ar000ofiyhj7dqmsm4","_id":"ck49n28d50019fiyhbdaqn5fe"}],"PostTag":[],"Tag":[]}}