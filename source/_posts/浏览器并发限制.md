---
title: 浏览器并发限制
date: 2019-10-25 11:28:17
categories: 浏览器
---

# 什么是浏览器并发

浏览器并发主要是指在同一个域名下，浏览器可以同时发起多少次http请求。并发数具体到不同的浏览器是不同的，现目前的浏览器厂商们规定的最大并发数一般都是6左右。最高的并发可以达到10，最低的是2。部分浏览器也可以通过自定义设置并发数，但是都有上限，不同的浏览器上限不同。

# 为什么需要限制浏览器并发

这里要从浏览器本身和服务器两个角度进行说明：

1. 发出http请求是需要开启新线程的，而且每个系统可以发出请求的端口数量是有限的。如果浏览器的请求占用了大量的开销，会导致客户端运行速度变慢。

2. 一般的服务端会限制同一个ip在一段时间内的请求数量，如果并发数量太大会造成服务器压力过大，同时也会导致该ip被服务器拉黑。

# 浏览器并发限制造成了什么影响

1. 因为同一域名下一般只能同时发起6个左右的请求，所以会导致如果一个页面包含了大量静态资源而加载缓慢的情况。可以想象以下如果自己写了一个简易的淘宝页面，里面用到了大量的css文件和商品图片，在浏览器打开这个页面浏览器就会发出几百条请求去获取这些静态资源，而这几百条请求按6个一组排队以此请求，这样就导致了这个页面长时间的白屏，用户体验极差。

2. 如果还在请求中添加了cookie，那么所有的静态资源请求也都会带上cookie，数百个无用的cookie也对页面响应的时间造成了影响。

# 如何降低浏览器并发限制的影响

这里也是从两个方向入手，一个是浏览器并发限制本身，另一个是优化用户体验。

1. 因为浏览器并发限制的是同一个域名，所以现在大部分企业都会选择将静态资源放在不同的域名下，这样可以大幅度的提高并发数量。另外就是在使用图标等小图片时使用精灵图的方式，即将多个图标放在一张图上，通过css属性进行定位获取，这种方法可以将多个请求降低为一条请求。

2. 浏览器并发的限制主要是导致了白屏时间过长，用户体验不好。现在也有很多的企业选用骨架屏的方式，可以先给用户展示一个骨架页面，等资源加载完毕再展示完整页面。


# 参考资料
[https://segmentfault.com/a/1190000016369295](https://segmentfault.com/a/1190000016369295)

[https://www.cnblogs.com/sunsky303/p/8862128.html](https://www.cnblogs.com/sunsky303/p/8862128.html)
