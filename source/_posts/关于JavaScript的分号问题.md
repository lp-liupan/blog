---
title: 关于JavaScript的分号问题
date: 2019-11-08 12:42:17
categories: JavaScript
---

# 分号的争论  

关于JavaScript是不是应该使用分号结尾这个话题已经被撕逼很多次了，有着无数的分号严谨论者，也有随喜好自由决定者。我原来本属于前者，一度认为分号可以让我的代码更加的严谨，后来发现我经常会忘记使用分号，但是对代码并没有造成什么后果，反而成为了我心里上的负担，总觉得没有打分号就感觉代码有问题。后来看了[尤雨溪和玉伯等几位大佬的回答](https://www.zhihu.com/question/20298345)，越发的觉得自己不应该被分号所限制，我只要保证好我的编码习惯，也就不会出现因为分号导致的bug。

# JavaScript的分号处理机制

JavaScript为自动的在每行代码的结尾处加上分号以表示该行的结束，如果碰见下列5种符号开头的代码，如：`/`、`(`、`[`、`+`、`-`，并且上一行代码没有使用分号结尾，则该行代码会被直接合并到上一行代码后面，例：
```js
let a = b
(function (){
	console.log('111111');
})

//上面的代码会被JavaScript解析为
let a = b(function (){
	console.log('111111');
})
```
>注意：在使用`return`返回值的时候，如果返回值和`return`不在同一行，则会返回undefined。所以我们要保证返回的值必须和return在同一行，即：

```js
	//错误示范
	(function (){
		return 
		{
			a:1
		}
	})()

	//上面代码会被解析为
	(function (){
		return ;
		{
			a:1
		};
	})()

	//正确的书写方式应该是
	(function (){
		return {
			a:1
		}
	})()
```

>由此可知，我们其实只要避免在`/`、`(`、`[`、`+`、`-`这五种符号开头的代码的上一行中注意使用分号即可。而且在真正的实际开发中，几乎不会出现这五种符号开头的代码，需要被你注意的情况可以忽略不计。

# 到底是否应该使用分号

我比较支持[玉伯](https://www.zhihu.com/question/20298345)的说法，按照项目来，按照风格来。毕竟分号不是一个强制的规定，如果项目规范中要求了使用，，或者原来的项目中一贯风格都使用了，那么后续也应该保持统一风格。如果没有强制性的规定，那么大可以放松的面对分号。比如vue项目源码中就不使用分号，那么我们也没必要强求。总之就是，看个人习惯，你习惯了C风格的代码，那你就写分号，你觉得麻烦，那就不写。

